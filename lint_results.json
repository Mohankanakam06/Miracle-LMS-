[{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\NavLink.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\assignments\\CreateAssignmentDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\classes\\CreatePeriodDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\courses\\AddSubjectDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":89,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3487,3490],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3487,3490],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useState } from 'react';\r\nimport { useForm, useFieldArray } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport * as z from 'zod';\r\nimport { useCreateCourse } from '@/hooks/useLMS';\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { BookPlus, Loader2, Plus, Trash2 } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\n\r\nconst DEPARTMENTS = [\r\n    { value: 'CSE', label: 'CSE' },\r\n    { value: 'ECE', label: 'ECE' },\r\n    { value: 'EEE', label: 'EEE' },\r\n    { value: 'MECH', label: 'Mechanical' },\r\n    { value: 'CIVIL', label: 'Civil' },\r\n    { value: 'Basic Science', label: 'Basic Science' },\r\n    { value: 'Humanities', label: 'Humanities' },\r\n    { value: 'Engineering Science', label: 'Engineering Science' },\r\n    { value: 'Management', label: 'Management' },\r\n];\r\n\r\nconst REGULATIONS = [\r\n    { value: 'R23', label: 'R23' },\r\n    { value: 'R22', label: 'R22' },\r\n    { value: 'R21', label: 'R21' },\r\n    { value: 'R20', label: 'R20' },\r\n];\r\n\r\nconst courseSchema = z.object({\r\n    name: z.string().min(1, 'Course name is required'),\r\n    code: z.string().min(1, 'Course code is required'),\r\n    description: z.string().optional(),\r\n    department: z.string().min(1, 'Department is required'),\r\n    semester: z.string().min(1, 'Semester is required'), // Form uses string, we convert to number\r\n    credits: z.string().min(1, 'Credits is required'), // Form uses string, we convert to number\r\n    regulation: z.string().min(1, 'Regulation is required'),\r\n    units: z.array(z.object({\r\n        title: z.string().min(1, 'Unit title is required'),\r\n        content: z.string().min(1, 'Unit content is required'),\r\n    })).optional(),\r\n});\r\n\r\ntype CourseFormValues = z.infer<typeof courseSchema>;\r\n\r\nexport default function AddSubjectDialog() {\r\n    const [open, setOpen] = useState(false);\r\n    const createCourse = useCreateCourse();\r\n\r\n    const form = useForm<CourseFormValues>({\r\n        resolver: zodResolver(courseSchema),\r\n        defaultValues: {\r\n            name: '',\r\n            code: '',\r\n            description: '',\r\n            department: '',\r\n            semester: '',\r\n            credits: '',\r\n            regulation: '',\r\n            units: [{ title: '', content: '' }],\r\n        },\r\n    });\r\n\r\n    const { fields, append, remove } = useFieldArray({\r\n        control: form.control,\r\n        name: \"units\",\r\n    });\r\n\r\n    const onSubmit = async (values: CourseFormValues) => {\r\n        try {\r\n            await createCourse.mutateAsync({\r\n                name: values.name,\r\n                code: values.code,\r\n                description: values.description,\r\n                department: values.department,\r\n                semester: parseInt(values.semester),\r\n                credits: parseInt(values.credits),\r\n                regulation: values.regulation,\r\n                units: values.units,\r\n            });\r\n            toast.success('Subject/Course created successfully');\r\n            form.reset();\r\n            setOpen(false);\r\n        } catch (error: any) {\r\n            toast.error(error.message || 'Failed to create subject');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={setOpen}>\r\n            <DialogTrigger asChild>\r\n                <Button variant=\"hero\">\r\n                    <BookPlus className=\"h-4 w-4\" />\r\n                    Add Subject\r\n                </Button>\r\n            </DialogTrigger>\r\n            <DialogContent className=\"sm:max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Add New Subject (Course)</DialogTitle>\r\n                    <DialogDescription>Create a new subject and add its syllabus.</DialogDescription>\r\n                </DialogHeader>\r\n                <Form {...form}>\r\n                    <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"name\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Course Name</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input placeholder=\"e.g. Data Structures\" {...field} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"code\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Course Code</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input placeholder=\"e.g. R231101\" {...field} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"department\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Department</FormLabel>\r\n                                        <Select onValueChange={field.onChange} value={field.value}>\r\n                                            <FormControl>\r\n                                                <SelectTrigger>\r\n                                                    <SelectValue placeholder=\"Select department\" />\r\n                                                </SelectTrigger>\r\n                                            </FormControl>\r\n                                            <SelectContent>\r\n                                                {DEPARTMENTS.map((dept) => (\r\n                                                    <SelectItem key={dept.value} value={dept.value}>\r\n                                                        {dept.label}\r\n                                                    </SelectItem>\r\n                                                ))}\r\n                                            </SelectContent>\r\n                                        </Select>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"regulation\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Regulation</FormLabel>\r\n                                        <Select onValueChange={field.onChange} value={field.value}>\r\n                                            <FormControl>\r\n                                                <SelectTrigger>\r\n                                                    <SelectValue placeholder=\"Select regulation\" />\r\n                                                </SelectTrigger>\r\n                                            </FormControl>\r\n                                            <SelectContent>\r\n                                                {REGULATIONS.map((reg) => (\r\n                                                    <SelectItem key={reg.value} value={reg.value}>\r\n                                                        {reg.label}\r\n                                                    </SelectItem>\r\n                                                ))}\r\n                                            </SelectContent>\r\n                                        </Select>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"semester\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Semester</FormLabel>\r\n                                        <Select onValueChange={field.onChange} value={field.value}>\r\n                                            <FormControl>\r\n                                                <SelectTrigger>\r\n                                                    <SelectValue placeholder=\"Select semester\" />\r\n                                                </SelectTrigger>\r\n                                            </FormControl>\r\n                                            <SelectContent>\r\n                                                {[1, 2, 3, 4, 5, 6, 7, 8].map((sem) => (\r\n                                                    <SelectItem key={sem} value={sem.toString()}>\r\n                                                        Semester {sem}\r\n                                                    </SelectItem>\r\n                                                ))}\r\n                                            </SelectContent>\r\n                                        </Select>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"credits\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Credits</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input type=\"number\" placeholder=\"e.g. 3\" {...field} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n                        </div>\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"description\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Description (Optional)</FormLabel>\r\n                                    <FormControl>\r\n                                        <Textarea placeholder=\"Brief description of the course...\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <div className=\"space-y-4 border rounded-lg p-4 bg-muted/20\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <FormLabel className=\"text-lg font-semibold\">Syllabus Units</FormLabel>\r\n                                <Button\r\n                                    type=\"button\"\r\n                                    variant=\"outline\"\r\n                                    size=\"sm\"\r\n                                    onClick={() => append({ title: '', content: '' })}\r\n                                >\r\n                                    <Plus className=\"h-4 w-4 mr-2\" />\r\n                                    Add Unit\r\n                                </Button>\r\n                            </div>\r\n\r\n                            {fields.map((field, index) => (\r\n                                <div key={field.id} className=\"space-y-2 p-3 border rounded-md bg-background\">\r\n                                    <div className=\"flex items-center justify-between\">\r\n                                        <FormLabel>Unit {index + 1}</FormLabel>\r\n                                        {fields.length > 1 && (\r\n                                            <Button\r\n                                                type=\"button\"\r\n                                                variant=\"ghost\"\r\n                                                size=\"icon\"\r\n                                                className=\"text-destructive h-8 w-8\"\r\n                                                onClick={() => remove(index)}\r\n                                            >\r\n                                                <Trash2 className=\"h-4 w-4\" />\r\n                                            </Button>\r\n                                        )}\r\n                                    </div>\r\n                                    <FormField\r\n                                        control={form.control}\r\n                                        name={`units.${index}.title`}\r\n                                        render={({ field }) => (\r\n                                            <FormItem>\r\n                                                <FormControl>\r\n                                                    <Input placeholder={`Unit ${index + 1} Title`} {...field} />\r\n                                                </FormControl>\r\n                                                <FormMessage />\r\n                                            </FormItem>\r\n                                        )}\r\n                                    />\r\n                                    <FormField\r\n                                        control={form.control}\r\n                                        name={`units.${index}.content`}\r\n                                        render={({ field }) => (\r\n                                            <FormItem>\r\n                                                <FormControl>\r\n                                                    <Textarea\r\n                                                        placeholder=\"Unit content description...\"\r\n                                                        className=\"min-h-[80px]\"\r\n                                                        {...field}\r\n                                                    />\r\n                                                </FormControl>\r\n                                                <FormMessage />\r\n                                            </FormItem>\r\n                                        )}\r\n                                    />\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n\r\n                        <div className=\"flex justify-end gap-2 pt-4\">\r\n                            <Button type=\"button\" variant=\"outline\" onClick={() => setOpen(false)}>\r\n                                Cancel\r\n                            </Button>\r\n                            <Button type=\"submit\" disabled={createCourse.isPending}>\r\n                                {createCourse.isPending && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\r\n                                Create Subject\r\n                            </Button>\r\n                        </div>\r\n                    </form>\r\n                </Form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\dashboard\\AssignmentsList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\dashboard\\AttendanceChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\dashboard\\DatabaseSeeder.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\dashboard\\GradesChart.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":80,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3122,3125],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3122,3125],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Cell } from 'recharts';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { BarChart3 } from 'lucide-react';\r\n\r\ninterface GradeData {\r\n  subject: string;\r\n  marks: number;\r\n  maxMarks: number;\r\n}\r\n\r\ninterface GradesChartProps {\r\n  data: GradeData[];\r\n}\r\n\r\nexport default function GradesChart({ data }: GradesChartProps) {\r\n  const chartData = data.map(d => ({\r\n    ...d,\r\n    percentage: Math.round((d.marks / d.maxMarks) * 100),\r\n  }));\r\n\r\n  const getBarColor = (percentage: number) => {\r\n    if (percentage >= 80) return 'hsl(142, 71%, 45%)';\r\n    if (percentage >= 60) return 'hsl(217, 91%, 60%)';\r\n    if (percentage >= 40) return 'hsl(38, 92%, 50%)';\r\n    return 'hsl(0, 84%, 60%)';\r\n  };\r\n\r\n  const averagePercentage = chartData.length > 0 \r\n    ? Math.round(chartData.reduce((sum, d) => sum + d.percentage, 0) / chartData.length)\r\n    : 0;\r\n\r\n  return (\r\n    <Card className=\"shadow-lg border-0 bg-gradient-to-br from-card to-muted/30\">\r\n      <CardHeader className=\"pb-2\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <CardTitle className=\"font-display text-lg flex items-center gap-2\">\r\n            <div className=\"p-2 rounded-lg bg-primary/10\">\r\n              <BarChart3 className=\"h-5 w-5 text-primary\" />\r\n            </div>\r\n            Academic Performance\r\n          </CardTitle>\r\n          <div className=\"text-right\">\r\n            <p className=\"text-2xl font-bold font-display text-primary\">{averagePercentage}%</p>\r\n            <p className=\"text-xs text-muted-foreground\">Average</p>\r\n          </div>\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent>\r\n        {chartData.length === 0 ? (\r\n          <div className=\"h-48 flex items-center justify-center text-muted-foreground\">\r\n            No grades data available yet\r\n          </div>\r\n        ) : (\r\n          <div className=\"h-48\">\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <BarChart data={chartData} layout=\"vertical\" margin={{ left: 0, right: 20 }}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" horizontal={false} stroke=\"hsl(var(--border))\" />\r\n                <XAxis \r\n                  type=\"number\" \r\n                  domain={[0, 100]} \r\n                  tickFormatter={(value) => `${value}%`}\r\n                  stroke=\"hsl(var(--muted-foreground))\"\r\n                  fontSize={12}\r\n                />\r\n                <YAxis \r\n                  type=\"category\" \r\n                  dataKey=\"subject\" \r\n                  width={80}\r\n                  stroke=\"hsl(var(--muted-foreground))\"\r\n                  fontSize={12}\r\n                  tickLine={false}\r\n                />\r\n                <Tooltip\r\n                  contentStyle={{ \r\n                    background: 'hsl(var(--card))', \r\n                    border: '1px solid hsl(var(--border))',\r\n                    borderRadius: '8px',\r\n                    boxShadow: 'var(--shadow-lg)'\r\n                  }}\r\n                  formatter={(value: number, name: string, props: any) => [\r\n                    `${props.payload.marks}/${props.payload.maxMarks} (${value}%)`,\r\n                    'Score'\r\n                  ]}\r\n                />\r\n                <Bar dataKey=\"percentage\" radius={[0, 4, 4, 0]} maxBarSize={24}>\r\n                  {chartData.map((entry, index) => (\r\n                    <Cell key={`cell-${index}`} fill={getBarColor(entry.percentage)} />\r\n                  ))}\r\n                </Bar>\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\dashboard\\QuickActions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\dashboard\\StatsCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\dashboard\\StatsGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\dashboard\\UpcomingSchedule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\dashboard\\WelcomeCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\fees\\AddFeeDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\fees\\UpdateFeeDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\layout\\DashboardLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\layout\\SidebarLayout.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The ref value 'sidebarRef.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'sidebarRef.current' to a variable inside the effect, and use that variable in the cleanup function.","line":104,"column":50,"nodeType":"Identifier","endLine":104,"endColumn":57}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef, useLayoutEffect, useEffect } from 'react';\r\nimport { Link, useLocation, useNavigate, Outlet } from 'react-router-dom';\r\nimport { useAuth } from '@/hooks/useAuth';\r\nimport { useNotifications } from '@/hooks/useLMS';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Avatar, AvatarFallback } from '@/components/ui/avatar';\r\nimport {\r\n    DropdownMenu,\r\n    DropdownMenuContent,\r\n    DropdownMenuItem,\r\n    DropdownMenuLabel,\r\n    DropdownMenuSeparator,\r\n    DropdownMenuTrigger,\r\n} from '@/components/ui/dropdown-menu';\r\nimport {\r\n    GraduationCap,\r\n    LayoutDashboard,\r\n    Calendar,\r\n    BookOpen,\r\n    FileText,\r\n    ClipboardList,\r\n    Bell,\r\n    Users,\r\n    Settings,\r\n    LogOut,\r\n    Menu,\r\n    X,\r\n    BarChart3,\r\n    CreditCard,\r\n    MessageSquare,\r\n    Upload,\r\n    CheckSquare,\r\n    Calculator,\r\n    CalendarDays,\r\n    Megaphone,\r\n    MessagesSquare,\r\n    Star,\r\n    Library,\r\n    Search,\r\n    PartyPopper,\r\n} from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport SubjectSelectionDialog from '@/components/onboarding/SubjectSelectionDialog';\r\n\r\n\r\ninterface NavItem {\r\n    label: string;\r\n    icon: React.ReactNode;\r\n    href: string;\r\n    roles: ('admin' | 'teacher' | 'student')[];\r\n    color: string; // e.g. \"text-blue-500\" or custom class suffix\r\n    indicatorColor: string; // e.g. \"border-l-indicator-blue\"\r\n}\r\n\r\nconst navItems: NavItem[] = [\r\n    { label: 'Dashboard', icon: <LayoutDashboard className=\"h-5 w-5\" />, href: '/dashboard', roles: ['admin', 'teacher', 'student'], color: \"text-blue-500\", indicatorColor: \"border-l-indicator-blue\" },\r\n    { label: 'Timetable', icon: <Calendar className=\"h-5 w-5\" />, href: '/timetable', roles: ['teacher', 'student'], color: \"text-green-500\", indicatorColor: \"border-l-indicator-green\" },\r\n    { label: 'Syllabus', icon: <BookOpen className=\"h-5 w-5\" />, href: '/syllabus', roles: ['admin', 'teacher', 'student'], color: \"text-purple-500\", indicatorColor: \"border-l-indicator-purple\" },\r\n    { label: 'Assignments', icon: <ClipboardList className=\"h-5 w-5\" />, href: '/assignments', roles: ['teacher', 'student'], color: \"text-orange-500\", indicatorColor: \"border-l-indicator-orange\" },\r\n    { label: 'Notes & Materials', icon: <FileText className=\"h-5 w-5\" />, href: '/notes', roles: ['teacher', 'student'], color: \"text-yellow-500\", indicatorColor: \"border-l-indicator-orange\" },\r\n    { label: 'Attendance', icon: <CheckSquare className=\"h-5 w-5\" />, href: '/attendance', roles: ['admin', 'teacher', 'student'], color: \"text-emerald-500\", indicatorColor: \"border-l-indicator-green\" },\r\n    { label: 'Grades', icon: <BarChart3 className=\"h-5 w-5\" />, href: '/grades', roles: ['teacher', 'student'], color: \"text-cyan-500\", indicatorColor: \"border-l-indicator-blue\" },\r\n    { label: 'CGPA Calculator', icon: <Calculator className=\"h-5 w-5\" />, href: '/cgpa-calculator', roles: ['student'], color: \"text-pink-500\", indicatorColor: \"border-l-indicator-purple\" },\r\n    { label: 'Exam Schedule', icon: <CalendarDays className=\"h-5 w-5\" />, href: '/exam-schedule', roles: ['admin', 'teacher', 'student'], color: \"text-red-500\", indicatorColor: \"border-l-indicator-orange\" },\r\n    { label: 'Academic Calendar', icon: <Calendar className=\"h-5 w-5\" />, href: '/academic-calendar', roles: ['admin', 'teacher', 'student'], color: \"text-indigo-500\", indicatorColor: \"border-l-indicator-blue\" },\r\n    { label: 'Previous Papers', icon: <FileText className=\"h-5 w-5\" />, href: '/previous-papers', roles: ['admin', 'teacher', 'student'], color: \"text-teal-500\", indicatorColor: \"border-l-indicator-green\" },\r\n    { label: 'Announcements', icon: <Megaphone className=\"h-5 w-5\" />, href: '/announcements', roles: ['admin', 'teacher', 'student'], color: \"text-orange-400\", indicatorColor: \"border-l-indicator-orange\" },\r\n    { label: 'Discussion Forums', icon: <MessagesSquare className=\"h-5 w-5\" />, href: '/discussion-forums', roles: ['admin', 'teacher', 'student'], color: \"text-violet-500\", indicatorColor: \"border-l-indicator-purple\" },\r\n    { label: 'Faculty Feedback', icon: <Star className=\"h-5 w-5\" />, href: '/faculty-feedback', roles: ['admin', 'teacher', 'student'], color: \"text-yellow-400\", indicatorColor: \"border-l-indicator-orange\" },\r\n    { label: 'Library', icon: <Library className=\"h-5 w-5\" />, href: '/library', roles: ['admin', 'student', 'teacher'], color: \"text-rose-500\", indicatorColor: \"border-l-indicator-purple\" },\r\n    { label: 'Lost & Found', icon: <Search className=\"h-5 w-5\" />, href: '/lost-and-found', roles: ['admin', 'teacher', 'student'], color: \"text-slate-400\", indicatorColor: \"border-l-indicator-blue\" },\r\n    { label: 'Events', icon: <PartyPopper className=\"h-5 w-5\" />, href: '/events', roles: ['admin', 'teacher', 'student'], color: \"text-fuchsia-500\", indicatorColor: \"border-l-indicator-purple\" },\r\n    { label: 'Notifications', icon: <Bell className=\"h-5 w-5\" />, href: '/notifications', roles: ['admin', 'teacher', 'student'], color: \"text-red-400\", indicatorColor: \"border-l-indicator-orange\" },\r\n    { label: 'Fee Management', icon: <CreditCard className=\"h-5 w-5\" />, href: '/fees', roles: ['admin', 'student'], color: \"text-green-600\", indicatorColor: \"border-l-indicator-green\" },\r\n    { label: 'Manage Users', icon: <Users className=\"h-5 w-5\" />, href: '/users', roles: ['admin'], color: \"text-blue-600\", indicatorColor: \"border-l-indicator-blue\" },\r\n    { label: 'Upload Content', icon: <Upload className=\"h-5 w-5\" />, href: '/upload', roles: ['admin', 'teacher'], color: \"text-amber-500\", indicatorColor: \"border-l-indicator-orange\" },\r\n    { label: 'Query Bot', icon: <MessageSquare className=\"h-5 w-5\" />, href: '/query-bot', roles: ['admin', 'teacher', 'student'], color: \"text-sky-500\", indicatorColor: \"border-l-indicator-blue\" },\r\n];\r\n\r\n// Global variable to persist scroll position across remounts (backup)\r\nlet globalSidebarScroll = 0;\r\n\r\nexport default function SidebarLayout() {\r\n    const { user, userRole, signOut } = useAuth();\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n    const [sidebarOpen, setSidebarOpen] = useState(false);\r\n    const { data: notifications } = useNotifications(user?.id);\r\n    const sidebarRef = useRef<HTMLDivElement>(null);\r\n\r\n    const unreadCount = notifications?.filter(n => !n.read).length || 0;\r\n\r\n    // With SidebarLayout being a layout route, it won't unmount on page changes.\r\n    // But we keep the scroll restore logic just in case user refreshes or navigates away and back.\r\n    useLayoutEffect(() => {\r\n        if (globalSidebarScroll > 0 && sidebarRef.current) {\r\n            sidebarRef.current.scrollTop = globalSidebarScroll;\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (sidebarRef.current) {\r\n                globalSidebarScroll = sidebarRef.current.scrollTop;\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    const handleSignOut = async () => {\r\n        await signOut();\r\n        navigate('/auth');\r\n    };\r\n\r\n    const filteredNavItems = navItems.filter(item =>\r\n        userRole && item.roles.includes(userRole)\r\n    );\r\n\r\n    const userInitials = user?.email?.substring(0, 2).toUpperCase() || 'U';\r\n\r\n    const roleLabels = {\r\n        admin: 'Administrator',\r\n        teacher: 'Faculty',\r\n        student: 'B.Tech Student',\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-background bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-primary/5 via-background to-background\">\r\n            {/* Mobile sidebar backdrop */}\r\n            {sidebarOpen && (\r\n                <div\r\n                    className=\"fixed inset-0 bg-background/80 backdrop-blur-sm z-40 lg:hidden\"\r\n                    onClick={() => setSidebarOpen(false)}\r\n                />\r\n            )}\r\n\r\n            <SubjectSelectionDialog />\r\n\r\n\r\n            {/* Sidebar */}\r\n            <aside className={cn(\r\n                \"fixed top-0 left-0 z-50 h-screen w-72 border-r border-sidebar-border shadow-xl transition-transform duration-300 lg:translate-x-0 bg-sidebar/95 backdrop-blur-xl\",\r\n                sidebarOpen ? \"translate-x-0\" : \"-translate-x-full\"\r\n            )}>\r\n                <div className=\"flex flex-col h-full\">\r\n                    {/* Logo */}\r\n                    <div className=\"flex items-center gap-3 p-6 border-b border-sidebar-border/50\">\r\n                        <img src=\"/logo.png\" alt=\"Miracle\" className=\"h-12 w-12 rounded-full shadow-lg\" />\r\n                        <div>\r\n                            <h1 className=\"font-display font-bold text-sidebar-foreground text-base tracking-tight\">Miracle Portal</h1>\r\n                            <p className=\"text-xs text-sidebar-foreground/60 font-medium\">{roleLabels[userRole as keyof typeof roleLabels] || 'User'}</p>\r\n                        </div>\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            className=\"lg:hidden ml-auto text-sidebar-foreground hover:bg-sidebar-accent\"\r\n                            onClick={() => setSidebarOpen(false)}\r\n                        >\r\n                            <X className=\"h-5 w-5\" />\r\n                        </Button>\r\n                    </div>\r\n\r\n                    {/* Navigation */}\r\n                    <div\r\n                        ref={sidebarRef}\r\n                        className=\"flex-1 py-6 px-4 overflow-y-auto\"\r\n                    >\r\n                        <nav className=\"space-y-1.5\">\r\n                            {filteredNavItems.map((item) => {\r\n                                const isActive = location.pathname === item.href;\r\n                                return (\r\n                                    <Link\r\n                                        key={item.href}\r\n                                        to={item.href}\r\n                                        onClick={() => setSidebarOpen(false)}\r\n                                        className={cn(\r\n                                            \"group flex items-center gap-3 px-3.5 py-3 rounded-xl text-sm font-medium transition-all duration-200 border-l-4 border-transparent\",\r\n                                            isActive\r\n                                                ? cn(\"bg-sidebar-accent shadow-md shadow-black/20 scale-[1.02]\", item.indicatorColor, item.color)\r\n                                                : \"text-sidebar-foreground/70 hover:bg-sidebar-accent/50 hover:text-sidebar-foreground hover:translate-x-1\"\r\n                                        )}\r\n                                    >\r\n                                        <span className={cn(\"transition-colors\", isActive ? \"text-current\" : \"text-sidebar-foreground/50 group-hover:text-sidebar-foreground\")}>\r\n                                            {item.icon}\r\n                                        </span>\r\n                                        {item.label}\r\n                                    </Link>\r\n                                );\r\n                            })}\r\n                        </nav>\r\n                    </div>\r\n\r\n                    {/* User section */}\r\n                    <div className=\"p-4 border-t border-sidebar-border/50 backdrop-blur-md bg-sidebar/30\">\r\n                        <DropdownMenu>\r\n                            <DropdownMenuTrigger asChild>\r\n                                <button className=\"flex items-center gap-3 w-full p-2.5 rounded-xl hover:bg-sidebar-accent/50 transition-colors border border-transparent hover:border-sidebar-border/50\">\r\n                                    <Avatar className=\"h-10 w-10 border-2 border-sidebar-primary/20\">\r\n                                        <AvatarFallback className=\"bg-sidebar-primary/20 text-sidebar-primary font-bold\">\r\n                                            {userInitials}\r\n                                        </AvatarFallback>\r\n                                    </Avatar>\r\n                                    <div className=\"flex-1 text-left overflow-hidden\">\r\n                                        <p className=\"text-sm font-semibold text-sidebar-foreground truncate\">\r\n                                            {user?.email}\r\n                                        </p>\r\n                                        <p className=\"text-xs text-sidebar-foreground/60 capitalize flex items-center gap-1.5\">\r\n                                            <span className=\"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse\"></span>\r\n                                            Online\r\n                                        </p>\r\n                                    </div>\r\n                                </button>\r\n                            </DropdownMenuTrigger>\r\n                            <DropdownMenuContent align=\"end\" className=\"w-56 glass-heavy border-sidebar-border\">\r\n                                <DropdownMenuLabel>My Account</DropdownMenuLabel>\r\n                                <DropdownMenuSeparator className=\"bg-border/50\" />\r\n                                <DropdownMenuItem onClick={() => navigate('/settings')}>\r\n                                    <Settings className=\"mr-2 h-4 w-4\" />\r\n                                    Settings\r\n                                </DropdownMenuItem>\r\n                                <DropdownMenuSeparator className=\"bg-border/50\" />\r\n                                <DropdownMenuItem onClick={handleSignOut} className=\"text-destructive focus:text-destructive focus:bg-destructive/10\">\r\n                                    <LogOut className=\"mr-2 h-4 w-4\" />\r\n                                    Log out\r\n                                </DropdownMenuItem>\r\n                            </DropdownMenuContent>\r\n                        </DropdownMenu>\r\n                    </div>\r\n                </div>\r\n            </aside>\r\n\r\n            {/* Main content */}\r\n            <div className=\"lg:pl-72 transition-all duration-300\">\r\n                {/* Top bar */}\r\n                <header className=\"sticky top-0 z-30 flex items-center gap-4 h-20 px-6 sm:px-8 glass text-foreground border-b border-border/40\">\r\n                    <Button\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        className=\"lg:hidden -ml-2 hover:bg-secondary\"\r\n                        onClick={() => setSidebarOpen(true)}\r\n                    >\r\n                        <Menu className=\"h-6 w-6\" />\r\n                    </Button>\r\n\r\n                    <div className=\"flex-1\">\r\n                        <h2 className=\"font-display font-bold text-2xl tracking-tight bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent\">\r\n                            {filteredNavItems.find(item => item.href === location.pathname)?.label || 'Dashboard'}\r\n                        </h2>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            className=\"relative hover:bg-secondary rounded-full w-10 h-10\"\r\n                            onClick={() => navigate('/notifications')}\r\n                        >\r\n                            <Bell className=\"h-5 w-5 text-foreground/70\" />\r\n                            {unreadCount > 0 && (\r\n                                <span className=\"absolute top-2.5 right-2.5 h-2 w-2 bg-destructive rounded-full ring-2 ring-background\"></span>\r\n                            )}\r\n                        </Button>\r\n                    </div>\r\n                </header>\r\n\r\n                {/* Page content */}\r\n                <main className=\"p-6 sm:p-8 max-w-7xl mx-auto\">\r\n                    <div className=\"animate-page-enter\">\r\n                        <Outlet />\r\n                    </div>\r\n                </main>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\onboarding\\SubjectSelectionDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1872,1875],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1872,1875],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":70,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2800,2803],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2800,2803],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useEffect, useState } from 'react';\r\nimport { useQueryClient } from '@tanstack/react-query';\r\nimport { useAuth } from '@/hooks/useAuth';\r\nimport { useProfiles, useCourses } from '@/hooks/useLMS';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Loader2 } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\n\r\nexport default function SubjectSelectionDialog() {\r\n    const { user, userRole } = useAuth();\r\n    const { data: profiles } = useProfiles();\r\n    const { data: courses } = useCourses();\r\n    const queryClient = useQueryClient();\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const [saving, setSaving] = useState(false);\r\n    const [selectedSubject, setSelectedSubject] = useState('');\r\n\r\n    const currentProfile = profiles?.find(p => p.id === user?.id);\r\n\r\n    useEffect(() => {\r\n        // Condition to open dialog:\r\n        // 1. User is logged in\r\n        // 2. User is a teacher\r\n        // 3. Profile data is loaded\r\n        // 4. Subject is missing/empty/null\r\n        if (user && userRole === 'teacher' && currentProfile && !currentProfile.subject) {\r\n            setOpen(true);\r\n        } else {\r\n            setOpen(false);\r\n        }\r\n    }, [user, userRole, currentProfile]);\r\n\r\n    const handleSave = async () => {\r\n        if (!user?.id || !selectedSubject) return;\r\n\r\n        setSaving(true);\r\n        try {\r\n            const { error } = await supabase\r\n                .from('profiles')\r\n                .update({ subject: selectedSubject } as any)\r\n                .eq('id', user.id);\r\n\r\n            if (error) throw error;\r\n\r\n            toast.success('Subject selection saved!');\r\n            setOpen(false);\r\n            // Optionally force reload or invalidate queries, but React Query should handle profile update if we invalidate\r\n            // Since we are using direct supabase call, we should ideally invalidate.\r\n            // But for this simple implementation, the local state update in settings might be needed, \r\n            // but here we just close the dialog. The Dashboard might re-render.\r\n\r\n            // To be safe, reload window or rely on realtime if enabled. \r\n            // For now, let's assume global state update will happen eventually or refresh.\r\n            // Invalidate profiles query to update the UI immediately without reload\r\n            await queryClient.invalidateQueries({ queryKey: ['profiles'] });\r\n\r\n        } catch (error: any) {\r\n            console.error('Error saving subject:', error);\r\n            toast.error(error.message || 'Failed to save subject');\r\n        } finally {\r\n            setSaving(false);\r\n        }\r\n    };\r\n\r\n    // prevent closing by clicking outside if it's mandatory\r\n    // onOpenChange={(val) => !val ? null : setOpen(val)} which effectively disables closing if we don't pass a setter that allows false\r\n    // But for better UX, we'll allow closing but it might pop up again on refresh/nav.\r\n    // Actually, \"onOpenChange={setOpen}\" allows closing. \r\n    // To force, we can control it and only allow closing if subject is saved (handled by internal logic)\r\n    // or just pass `onOpenChange={() => {}}` (no-op) to prevent closing via backdrop.\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={(val) => { if (!val && selectedSubject) setOpen(false); }}>\r\n            {/* Simple hack: only allow close if value selected? No, usually false is passed on escape/backdrop.\r\n                 To make it strictly modal (blocking): don't provide onOpenChange or provide no-op. \r\n                 But shadcn Dialog might require onOpenChange. \r\n                 Let's stick to simple open state.\r\n             */}\r\n            <DialogContent className=\"sm:max-w-[425px]\" onInteractOutside={(e) => e.preventDefault()} onEscapeKeyDown={(e) => e.preventDefault()}>\r\n                <DialogHeader>\r\n                    <DialogTitle>Select Your Subject</DialogTitle>\r\n                    <DialogDescription>\r\n                        Welcome! Please select your primary subject specialization to continue.\r\n                        You can change this later in Settings.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n                <div className=\"grid gap-4 py-4\">\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"subject\">Subject</Label>\r\n                        <Select value={selectedSubject} onValueChange={setSelectedSubject}>\r\n                            <SelectTrigger id=\"subject\">\r\n                                <SelectValue placeholder=\"Select a subject\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent className=\"bg-background border z-50 max-h-[300px]\">\r\n                                {courses?.map((course) => (\r\n                                    <SelectItem key={course.id} value={course.name}>\r\n                                        {course.name} ({course.code})\r\n                                    </SelectItem>\r\n                                ))}\r\n                            </SelectContent>\r\n                        </Select>\r\n                    </div>\r\n                </div>\r\n                <DialogFooter>\r\n                    <Button onClick={handleSave} disabled={!selectedSubject || saving}>\r\n                        {saving && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\r\n                        Confirm Selection\r\n                    </Button>\r\n                </DialogFooter>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\timetable\\AddSlotDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\timetable\\EditSlotDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\timetable\\ManualTimetableEntry.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":184,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":184,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7131,7134],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7131,7134],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":218,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":218,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8267,8270],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8267,8270],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":239,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":239,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8953,8956],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8953,8956],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":245,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":245,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9144,9147],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9144,9147],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { useClasses, useTimetable } from '@/hooks/useLMS';\r\nimport { useAuth } from '@/hooks/useAuth';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { useQueryClient } from '@tanstack/react-query';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { toast } from 'sonner';\r\nimport {\r\n    Plus,\r\n    Loader2,\r\n    Trash2,\r\n    Edit2,\r\n    X,\r\n    CheckCircle2,\r\n    Sparkles\r\n} from 'lucide-react';\r\n\r\nconst DAYS = [\r\n    { value: 'Monday', label: 'Monday' },\r\n    { value: 'Tuesday', label: 'Tuesday' },\r\n    { value: 'Wednesday', label: 'Wednesday' },\r\n    { value: 'Thursday', label: 'Thursday' },\r\n    { value: 'Friday', label: 'Friday' },\r\n    { value: 'Saturday', label: 'Saturday' },\r\n];\r\n\r\n// Fixed college time periods\r\nconst PERIODS = [\r\n    { value: '1', label: '1st Period', start: '09:15', end: '10:05' },\r\n    { value: '2', label: '2nd Period', start: '10:05', end: '10:55' },\r\n    { value: '3', label: '3rd Period', start: '11:05', end: '11:55' },\r\n    { value: '4', label: '4th Period', start: '11:55', end: '12:45' },\r\n    { value: '5', label: '5th Period', start: '13:25', end: '14:15' },\r\n    { value: '6', label: '6th Period', start: '14:15', end: '15:05' },\r\n    { value: '7', label: '7th Period', start: '15:05', end: '15:55' },\r\n    // Lab periods (2 consecutive periods)\r\n    { value: 'lab-12', label: 'Lab (1st & 2nd Period)', start: '09:15', end: '10:55', isLab: true },\r\n    { value: 'lab-23', label: 'Lab (2nd & 3rd Period)', start: '10:05', end: '11:55', isLab: true },\r\n    { value: 'lab-34', label: 'Lab (3rd & 4th Period)', start: '11:05', end: '12:45', isLab: true },\r\n    { value: 'lab-56', label: 'Lab (5th & 6th Period)', start: '13:25', end: '15:05', isLab: true },\r\n    { value: 'lab-67', label: 'Lab (6th & 7th Period)', start: '14:15', end: '15:55', isLab: true },\r\n];\r\n\r\ninterface EditingEntry {\r\n    id: string;\r\n    class_id: string;\r\n    day_of_week: string;\r\n    start_time: string;\r\n    end_time: string;\r\n}\r\n\r\nexport default function ManualTimetableEntry() {\r\n    const { user } = useAuth();\r\n    const { data: classes, isLoading: classesLoading } = useClasses();\r\n    const { data: existingTimetable, isLoading: timetableLoading } = useTimetable();\r\n    const queryClient = useQueryClient();\r\n\r\n    const [classId, setClassId] = useState('');\r\n    const [dayOfWeek, setDayOfWeek] = useState('');\r\n    const [selectedPeriod, setSelectedPeriod] = useState('');\r\n    const [isSaving, setIsSaving] = useState(false);\r\n    const [editingEntry, setEditingEntry] = useState<EditingEntry | null>(null);\r\n\r\n    // Custom subject entry\r\n    const [useCustomSubject, setUseCustomSubject] = useState(false);\r\n    const [customSubjectName, setCustomSubjectName] = useState('');\r\n    const [customSubjectCode, setCustomSubjectCode] = useState('');\r\n    const [customSection, setCustomSection] = useState('A');\r\n\r\n    const resetForm = () => {\r\n        setClassId('');\r\n        setDayOfWeek('');\r\n        setSelectedPeriod('');\r\n        setEditingEntry(null);\r\n        setUseCustomSubject(false);\r\n        setCustomSubjectName('');\r\n        setCustomSubjectCode('');\r\n        setCustomSection('A');\r\n    };\r\n\r\n    // Get time from selected period\r\n    const getTimesFromPeriod = (periodValue: string) => {\r\n        const period = PERIODS.find(p => p.value === periodValue);\r\n        return period ? { start: period.start, end: period.end } : null;\r\n    };\r\n\r\n    // Find period by start and end time\r\n    const findPeriodByTime = (start: string, end: string) => {\r\n        const period = PERIODS.find(p => p.start === start && p.end === end);\r\n        return period?.value || '';\r\n    };\r\n\r\n    const handleAddEntry = async () => {\r\n        if (!dayOfWeek || !selectedPeriod) {\r\n            toast.error('Please select day and period');\r\n            return;\r\n        }\r\n\r\n        if (useCustomSubject) {\r\n            if (!customSubjectName.trim() || !customSubjectCode.trim()) {\r\n                toast.error('Please enter subject name and code');\r\n                return;\r\n            }\r\n        } else {\r\n            if (!classId) {\r\n                toast.error('Please select a class');\r\n                return;\r\n            }\r\n        }\r\n\r\n        const times = getTimesFromPeriod(selectedPeriod);\r\n        if (!times) {\r\n            toast.error('Invalid period selected');\r\n            return;\r\n        }\r\n\r\n        setIsSaving(true);\r\n\r\n        try {\r\n            let finalClassId = classId;\r\n\r\n            // If using custom subject, create the course and class first\r\n            if (useCustomSubject) {\r\n                // Step 1: Create the course\r\n                const { data: newCourse, error: courseError } = await supabase\r\n                    .from('courses')\r\n                    .insert({\r\n                        name: customSubjectName.trim(),\r\n                        code: customSubjectCode.trim().toUpperCase(),\r\n                        semester: 1,\r\n                        credits: 3,\r\n                    })\r\n                    .select()\r\n                    .single();\r\n\r\n                if (courseError) throw courseError;\r\n\r\n                // Step 2: Create a class for this course\r\n                const { data: newClass, error: classError } = await supabase\r\n                    .from('classes')\r\n                    .insert({\r\n                        course_id: newCourse.id,\r\n                        teacher_id: user?.id,\r\n                        section: customSection,\r\n                        academic_year: '2025-26',\r\n                    })\r\n                    .select()\r\n                    .single();\r\n\r\n                if (classError) throw classError;\r\n\r\n                finalClassId = newClass.id;\r\n\r\n                // Invalidate classes query to refresh the dropdown\r\n                queryClient.invalidateQueries({ queryKey: ['classes'] });\r\n            }\r\n\r\n            // Step 3: Add timetable entry\r\n            const { error } = await supabase\r\n                .from('timetable')\r\n                .insert({\r\n                    class_id: finalClassId,\r\n                    day_of_week: dayOfWeek,\r\n                    start_time: times.start,\r\n                    end_time: times.end,\r\n                    room: null,\r\n                });\r\n\r\n            if (error) throw error;\r\n\r\n            toast.success(useCustomSubject\r\n                ? 'Subject created and added to timetable!'\r\n                : 'Timetable entry added successfully'\r\n            );\r\n            resetForm();\r\n            queryClient.invalidateQueries({ queryKey: ['timetable'] });\r\n        } catch (error: any) {\r\n            console.error('Error adding timetable entry:', error);\r\n            toast.error(error.message || 'Failed to add entry');\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    const handleUpdateEntry = async () => {\r\n        if (!editingEntry) return;\r\n\r\n        if (editingEntry.start_time >= editingEntry.end_time) {\r\n            toast.error('End time must be after start time');\r\n            return;\r\n        }\r\n\r\n        setIsSaving(true);\r\n\r\n        try {\r\n            const { error } = await supabase\r\n                .from('timetable')\r\n                .update({\r\n                    class_id: editingEntry.class_id,\r\n                    day_of_week: editingEntry.day_of_week,\r\n                    start_time: editingEntry.start_time,\r\n                    end_time: editingEntry.end_time,\r\n                })\r\n                .eq('id', editingEntry.id);\r\n\r\n            if (error) throw error;\r\n\r\n            toast.success('Timetable entry updated');\r\n            setEditingEntry(null);\r\n            queryClient.invalidateQueries({ queryKey: ['timetable'] });\r\n        } catch (error: any) {\r\n            console.error('Error updating entry:', error);\r\n            toast.error(error.message || 'Failed to update entry');\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    const handleDeleteEntry = async (id: string) => {\r\n        if (!confirm('Are you sure you want to delete this entry?')) return;\r\n\r\n        try {\r\n            const { error } = await supabase\r\n                .from('timetable')\r\n                .delete()\r\n                .eq('id', id);\r\n\r\n            if (error) throw error;\r\n\r\n            toast.success('Entry deleted');\r\n            queryClient.invalidateQueries({ queryKey: ['timetable'] });\r\n        } catch (error: any) {\r\n            console.error('Error deleting entry:', error);\r\n            toast.error(error.message || 'Failed to delete entry');\r\n        }\r\n    };\r\n\r\n    const startEditing = (entry: any) => {\r\n        setEditingEntry({\r\n            id: entry.id,\r\n            class_id: entry.class_id,\r\n            day_of_week: entry.day_of_week,\r\n            start_time: entry.start_time.substring(0, 5),\r\n            end_time: entry.end_time.substring(0, 5),\r\n        });\r\n    };\r\n\r\n    if (classesLoading || timetableLoading) {\r\n        return (\r\n            <Card className=\"shadow-card\">\r\n                <CardContent className=\"flex items-center justify-center py-12\">\r\n                    <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n                </CardContent>\r\n            </Card>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Add Entry Form */}\r\n            <Card className=\"shadow-card border-0 bg-gradient-to-br from-primary/5 to-primary/10\">\r\n                <CardHeader>\r\n                    <CardTitle className=\"font-display flex items-center gap-2\">\r\n                        <div className=\"p-2 rounded-lg bg-primary/10\">\r\n                            <Plus className=\"h-5 w-5 text-primary\" />\r\n                        </div>\r\n                        Add Timetable Entry\r\n                    </CardTitle>\r\n                    <CardDescription>\r\n                        Manually add individual class slots to the timetable\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    {/* Toggle for Custom Subject */}\r\n                    <div className=\"flex items-center justify-between p-4 rounded-lg border bg-muted/30 mb-4\">\r\n                        <div className=\"space-y-0.5\">\r\n                            <Label className=\"flex items-center gap-2 font-medium\">\r\n                                <Sparkles className=\"h-4 w-4 text-primary\" />\r\n                                Create New Subject\r\n                            </Label>\r\n                            <p className=\"text-xs text-muted-foreground\">\r\n                                Add a custom subject without going to Courses Management\r\n                            </p>\r\n                        </div>\r\n                        <Switch\r\n                            checked={useCustomSubject}\r\n                            onCheckedChange={(checked) => {\r\n                                setUseCustomSubject(checked);\r\n                                if (checked) setClassId('');\r\n                            }}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-4\">\r\n                        {useCustomSubject ? (\r\n                            <>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label>Subject Name *</Label>\r\n                                    <Input\r\n                                        value={customSubjectName}\r\n                                        onChange={(e) => setCustomSubjectName(e.target.value)}\r\n                                        placeholder=\"e.g., Data Structures\"\r\n                                        maxLength={100}\r\n                                    />\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label>Subject Code *</Label>\r\n                                    <Input\r\n                                        value={customSubjectCode}\r\n                                        onChange={(e) => setCustomSubjectCode(e.target.value.toUpperCase())}\r\n                                        placeholder=\"e.g., CS201\"\r\n                                        maxLength={20}\r\n                                    />\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label>Section</Label>\r\n                                    <Select value={customSection} onValueChange={setCustomSection}>\r\n                                        <SelectTrigger>\r\n                                            <SelectValue placeholder=\"Select section\" />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            <SelectItem value=\"A\">Section A</SelectItem>\r\n                                            <SelectItem value=\"B\">Section B</SelectItem>\r\n                                            <SelectItem value=\"C\">Section C</SelectItem>\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                </div>\r\n                            </>\r\n                        ) : (\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Class/Course *</Label>\r\n                                <Select value={classId} onValueChange={setClassId}>\r\n                                    <SelectTrigger>\r\n                                        <SelectValue placeholder=\"Select class\" />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        {classes?.map(c => (\r\n                                            <SelectItem key={c.id} value={c.id}>\r\n                                                {c.courses?.code} - {c.courses?.name} ({c.section})\r\n                                            </SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Day *</Label>\r\n                            <Select value={dayOfWeek} onValueChange={setDayOfWeek}>\r\n                                <SelectTrigger>\r\n                                    <SelectValue placeholder=\"Select day\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {DAYS.map(d => (\r\n                                        <SelectItem key={d.value} value={d.value}>{d.label}</SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Period *</Label>\r\n                            <Select value={selectedPeriod} onValueChange={setSelectedPeriod}>\r\n                                <SelectTrigger>\r\n                                    <SelectValue placeholder=\"Select period\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    <div className=\"px-2 py-1.5 text-xs font-semibold text-muted-foreground\">Theory Periods</div>\r\n                                    {PERIODS.filter(p => !p.isLab).map(p => (\r\n                                        <SelectItem key={p.value} value={p.value}>\r\n                                            {p.label} ({p.start} - {p.end})\r\n                                        </SelectItem>\r\n                                    ))}\r\n                                    <div className=\"px-2 py-1.5 text-xs font-semibold text-muted-foreground border-t mt-1 pt-1\">Lab Sessions (2 periods)</div>\r\n                                    {PERIODS.filter(p => p.isLab).map(p => (\r\n                                        <SelectItem key={p.value} value={p.value}>\r\n                                            {p.label} ({p.start} - {p.end})\r\n                                        </SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"mt-4 flex justify-end\">\r\n                        <Button onClick={handleAddEntry} disabled={isSaving}>\r\n                            {isSaving ? (\r\n                                <>\r\n                                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                                    {useCustomSubject ? 'Creating...' : 'Adding...'}\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    <Plus className=\"h-4 w-4 mr-2\" />\r\n                                    {useCustomSubject ? 'Create & Add' : 'Add Entry'}\r\n                                </>\r\n                            )}\r\n                        </Button>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {/* Existing Entries */}\r\n            <Card className=\"shadow-card\">\r\n                <CardHeader>\r\n                    <CardTitle className=\"font-display text-lg\">\r\n                        Existing Timetable Entries ({existingTimetable?.length || 0})\r\n                    </CardTitle>\r\n                    <CardDescription>\r\n                        View, edit, or delete existing timetable entries\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    {existingTimetable && existingTimetable.length > 0 ? (\r\n                        <div className=\"overflow-x-auto\">\r\n                            <Table>\r\n                                <TableHeader>\r\n                                    <TableRow>\r\n                                        <TableHead>Course</TableHead>\r\n                                        <TableHead>Code</TableHead>\r\n                                        <TableHead>Section</TableHead>\r\n                                        <TableHead>Day</TableHead>\r\n                                        <TableHead>Time</TableHead>\r\n                                        <TableHead className=\"text-right\">Actions</TableHead>\r\n                                    </TableRow>\r\n                                </TableHeader>\r\n                                <TableBody>\r\n                                    {existingTimetable.map(entry => (\r\n                                        <TableRow key={entry.id}>\r\n                                            {editingEntry?.id === entry.id ? (\r\n                                                <>\r\n                                                    <TableCell colSpan={2}>\r\n                                                        <Select\r\n                                                            value={editingEntry.class_id}\r\n                                                            onValueChange={(v) => setEditingEntry({ ...editingEntry, class_id: v })}\r\n                                                        >\r\n                                                            <SelectTrigger className=\"w-full\">\r\n                                                                <SelectValue />\r\n                                                            </SelectTrigger>\r\n                                                            <SelectContent>\r\n                                                                {classes?.map(c => (\r\n                                                                    <SelectItem key={c.id} value={c.id}>\r\n                                                                        {c.courses?.name} - {c.section}\r\n                                                                    </SelectItem>\r\n                                                                ))\r\n                                                                }\r\n                                                            </SelectContent>\r\n                                                        </Select>\r\n                                                    </TableCell>\r\n                                                    <TableCell>\r\n                                                        <Select\r\n                                                            value={editingEntry.day_of_week}\r\n                                                            onValueChange={(v) => setEditingEntry({ ...editingEntry, day_of_week: v })}\r\n                                                        >\r\n                                                            <SelectTrigger className=\"w-full\">\r\n                                                                <SelectValue />\r\n                                                            </SelectTrigger>\r\n                                                            <SelectContent>\r\n                                                                {DAYS.map(d => (\r\n                                                                    <SelectItem key={d.value} value={d.value}>{d.label}</SelectItem>\r\n                                                                ))\r\n                                                                }\r\n                                                            </SelectContent>\r\n                                                        </Select>\r\n                                                    </TableCell>\r\n                                                    <TableCell>\r\n                                                        <Select\r\n                                                            value={findPeriodByTime(editingEntry.start_time, editingEntry.end_time)}\r\n                                                            onValueChange={(v) => {\r\n                                                                const period = PERIODS.find(p => p.value === v);\r\n                                                                if (period) {\r\n                                                                    setEditingEntry({ ...editingEntry, start_time: period.start, end_time: period.end });\r\n                                                                }\r\n                                                            }}\r\n                                                        >\r\n                                                            <SelectTrigger className=\"w-full min-w-[180px]\">\r\n                                                                <SelectValue placeholder=\"Select period\" />\r\n                                                            </SelectTrigger>\r\n                                                            <SelectContent>\r\n                                                                {PERIODS.filter(p => !p.isLab).map(p => (\r\n                                                                    <SelectItem key={p.value} value={p.value}>\r\n                                                                        {p.label}\r\n                                                                    </SelectItem>\r\n                                                                ))}\r\n                                                                {PERIODS.filter(p => p.isLab).map(p => (\r\n                                                                    <SelectItem key={p.value} value={p.value}>\r\n                                                                        {p.label}\r\n                                                                    </SelectItem>\r\n                                                                ))}\r\n                                                            </SelectContent>\r\n                                                        </Select>\r\n                                                    </TableCell>\r\n                                                    <TableCell className=\"text-right\">\r\n                                                        <div className=\"flex justify-end gap-1\">\r\n                                                            <Button\r\n                                                                size=\"sm\"\r\n                                                                variant=\"ghost\"\r\n                                                                onClick={handleUpdateEntry}\r\n                                                                disabled={isSaving}\r\n                                                            >\r\n                                                                <CheckCircle2 className=\"h-4 w-4 text-success\" />\r\n                                                            </Button>\r\n                                                            <Button\r\n                                                                size=\"sm\"\r\n                                                                variant=\"ghost\"\r\n                                                                onClick={() => setEditingEntry(null)}\r\n                                                            >\r\n                                                                <X className=\"h-4 w-4\" />\r\n                                                            </Button>\r\n                                                        </div>\r\n                                                    </TableCell>\r\n                                                </>\r\n                                            ) : (\r\n                                                <>\r\n                                                    <TableCell className=\"font-medium\">\r\n                                                        {entry.classes?.courses?.name || 'Unknown'}\r\n                                                    </TableCell>\r\n                                                    <TableCell>\r\n                                                        <Badge variant=\"outline\">\r\n                                                            {entry.classes?.courses?.code || '---'}\r\n                                                        </Badge>\r\n                                                    </TableCell>\r\n                                                    <TableCell>\r\n                                                        <Badge variant=\"secondary\">\r\n                                                            {entry.classes?.section || 'A'}\r\n                                                        </Badge>\r\n                                                    </TableCell>\r\n                                                    <TableCell>{entry.day_of_week}</TableCell>\r\n                                                    <TableCell>\r\n                                                        {entry.start_time.substring(0, 5)} - {entry.end_time.substring(0, 5)}\r\n                                                    </TableCell>\r\n                                                    <TableCell className=\"text-right\">\r\n                                                        <div className=\"flex justify-end gap-1\">\r\n                                                            <Button\r\n                                                                size=\"sm\"\r\n                                                                variant=\"ghost\"\r\n                                                                onClick={() => startEditing(entry)}\r\n                                                            >\r\n                                                                <Edit2 className=\"h-4 w-4\" />\r\n                                                            </Button>\r\n                                                            <Button\r\n                                                                size=\"sm\"\r\n                                                                variant=\"ghost\"\r\n                                                                onClick={() => handleDeleteEntry(entry.id)}\r\n                                                                className=\"text-destructive hover:text-destructive\"\r\n                                                            >\r\n                                                                <Trash2 className=\"h-4 w-4\" />\r\n                                                            </Button>\r\n                                                        </div>\r\n                                                    </TableCell>\r\n                                                </>\r\n                                            )}\r\n                                        </TableRow>\r\n                                    ))\r\n                                    }\r\n                                </TableBody>\r\n                            </Table>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"text-center py-8 text-muted-foreground\">\r\n                            <p>No timetable entries yet. Add your first entry above.</p>\r\n                        </div>\r\n                    )}\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\timetable\\TimetableGenerator.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'selectedClasses.length'. Either include it or remove the dependency array.","line":70,"column":8,"nodeType":"ArrayExpression","endLine":70,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [classes, selectedClasses.length]","fix":{"range":[3008,3017],"text":"[classes, selectedClasses.length]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":158,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":158,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6595,6598],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6595,6598],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo } from 'react';\r\nimport { useClasses, useTimetable } from '@/hooks/useLMS';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { useQueryClient } from '@tanstack/react-query';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';\r\nimport { Dialog, DialogContent } from '@/components/ui/dialog';\r\nimport { toast } from 'sonner';\r\nimport {\r\n    Sparkles,\r\n    Loader2,\r\n    BookOpen,\r\n    Calendar,\r\n    Clock,\r\n    Users,\r\n    Save,\r\n    RotateCcw,\r\n    CheckCircle2,\r\n    AlertCircle,\r\n    FileDown,\r\n    Info,\r\n    Pencil,\r\n    Trash2,\r\n    Plus\r\n} from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport {\r\n    generateOptimizedTimetable,\r\n    DAYS,\r\n    TIME_SLOTS,\r\n    type SelectedClass,\r\n    type GeneratedSlot,\r\n    type FacultyWorkload,\r\n    type DayOfWeek\r\n} from '@/lib/timetableScheduler';\r\nimport { generateFacultyTimetablePdf, generateAllFacultyTimetablesPdf } from '@/lib/generateFacultyTimetablePdf'; // Assumed exist\r\nimport AddSlotDialog from './AddSlotDialog';\r\nimport EditSlotDialog from './EditSlotDialog';\r\n\r\nexport default function TimetableGenerator() {\r\n    const { data: classes, isLoading: classesLoading } = useClasses();\r\n    const { data: existingTimetable, isLoading: timetableLoading } = useTimetable();\r\n    const queryClient = useQueryClient();\r\n\r\n    const [selectedClasses, setSelectedClasses] = useState<SelectedClass[]>([]);\r\n    const [generatedSchedule, setGeneratedSchedule] = useState<GeneratedSlot[]>([]);\r\n    const [facultyWorkloads, setFacultyWorkloads] = useState<FacultyWorkload[]>([]);\r\n    const [justification, setJustification] = useState<string[]>([]);\r\n    const [isGenerating, setIsGenerating] = useState(false);\r\n    const [isSaving, setIsSaving] = useState(false);\r\n\r\n    // Dialog states\r\n    const [isAddDialogOpen, setIsAddDialogOpen] = useState(false);\r\n    const [editingSlot, setEditingSlot] = useState<GeneratedSlot | null>(null);\r\n    const [addDialogDefaultDay, setAddDialogDefaultDay] = useState<DayOfWeek>('Monday');\r\n    const [addDialogDefaultSlot, setAddDialogDefaultSlot] = useState<number>(0);\r\n\r\n    // Initialize selected classes from existing ones\r\n    useMemo(() => {\r\n        if (classes && selectedClasses.length === 0) {\r\n            // By default, select all classes for the current semester/year context if we were filtering\r\n            // For now, let's just picking the first 10 to clear the UI or let user select\r\n            // Actually, we should let user select manually or \"Select All\"\r\n        }\r\n    }, [classes]);\r\n\r\n    const toggleClass = (classId: string, isLab: boolean = false) => {\r\n        setSelectedClasses(prev => {\r\n            const exists = prev.find(c => c.id === classId && c.isLab === isLab);\r\n            if (exists) {\r\n                return prev.filter(c => !(c.id === classId && c.isLab === isLab));\r\n            } else {\r\n                const cls = classes?.find(c => c.id === classId);\r\n                if (!cls) return prev;\r\n\r\n                return [...prev, {\r\n                    id: cls.id,\r\n                    courseName: cls.courses?.name || 'Unknown',\r\n                    courseCode: cls.courses?.code || '---',\r\n                    teacherId: cls.teacher_id,\r\n                    facultyName: cls.profiles?.full_name || 'TBA',\r\n                    isLab,\r\n                    section: cls.section\r\n                }];\r\n            }\r\n        });\r\n    };\r\n\r\n    const handleGenerate = async () => {\r\n        if (selectedClasses.length === 0) {\r\n            toast.error('Please select at least one subject');\r\n            return;\r\n        }\r\n\r\n        setIsGenerating(true);\r\n\r\n        // Slight delay to allow UI to update\r\n        setTimeout(() => {\r\n            try {\r\n                const result = generateOptimizedTimetable(\r\n                    selectedClasses,\r\n                    [], // We allow generating from scratch or we could pass existing timetable conflicts\r\n                    // passing empty for now to generate fresh optimal schedule from selected\r\n                );\r\n\r\n                setGeneratedSchedule(result.schedule);\r\n                setFacultyWorkloads(result.facultyWorkloads);\r\n                setJustification(result.justification);\r\n\r\n                if (result.schedule.length < selectedClasses.length * 4) { // Rough check if some were skipped\r\n                    toast.warning(`Generated ${result.schedule.length} slots. Some subjects might not be fully scheduled due to constraints.`);\r\n                } else {\r\n                    toast.success('Timetable generated successfully!');\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Generation error:\", error);\r\n                toast.error('Failed to generate timetable');\r\n            } finally {\r\n                setIsGenerating(false);\r\n            }\r\n        }, 500);\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        if (generatedSchedule.length === 0) return;\r\n\r\n        setIsSaving(true);\r\n        try {\r\n            // 1. Delete existing entries for these classes (optional, or we append?)\r\n            // For a fresh generation, usually we want to clear old slots for the selected classes?\r\n            // Let's assume we are appending/upserting. But if we want to replace, we should maybe warn user.\r\n            // For this implementation, let's just insert new slots.\r\n\r\n            const slotsToInsert = generatedSchedule.map(slot => ({\r\n                class_id: slot.class_id,\r\n                day_of_week: slot.day_of_week,\r\n                start_time: slot.start_time,\r\n                end_time: slot.end_time,\r\n                room: slot.room\r\n            }));\r\n\r\n            const { error } = await supabase\r\n                .from('timetable')\r\n                .insert(slotsToInsert);\r\n\r\n            if (error) throw error;\r\n\r\n            toast.success(`Saved ${slotsToInsert.length} timetable entries!`);\r\n            queryClient.invalidateQueries({ queryKey: ['timetable'] });\r\n\r\n            // Clear generated state after save? OR keep it for review?\r\n            // keep it.\r\n        } catch (error: any) {\r\n            console.error('Save error:', error);\r\n            toast.error(error.message || 'Failed to save timetable');\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    const handleClear = () => {\r\n        setGeneratedSchedule([]);\r\n        setFacultyWorkloads([]);\r\n        setJustification([]);\r\n        setSelectedClasses([]);\r\n    };\r\n\r\n    const getSlotForCell = (day: string, slotIndex: number) => {\r\n        return generatedSchedule.find(s => s.day_of_week === day && s.slotIndices.includes(slotIndex));\r\n    };\r\n\r\n    // Occupied slots map for conflict detection in add/edit dialogs\r\n    const occupiedSlotsMap = useMemo(() => {\r\n        const map = new Map<string, GeneratedSlot>();\r\n        generatedSchedule.forEach(slot => {\r\n            slot.slotIndices.forEach(idx => {\r\n                map.set(`${slot.day_of_week}-${idx}`, slot);\r\n            });\r\n        });\r\n        return map;\r\n    }, [generatedSchedule]);\r\n\r\n    const handleAddSlot = (newSlot: GeneratedSlot) => {\r\n        setGeneratedSchedule(prev => [...prev, newSlot]);\r\n        // Note: We might want to re-calculate workloads here if we want strictly accurate stats\r\n        toast.success('Slot added manually');\r\n    };\r\n\r\n    const handleUpdateSlot = (updatedSlot: GeneratedSlot) => {\r\n        setGeneratedSchedule(prev => prev.map(s =>\r\n            (s.class_id === updatedSlot.class_id && s.day_of_week === editingSlot?.day_of_week && s.start_time === editingSlot?.start_time)\r\n                ? updatedSlot\r\n                : s\r\n        ));\r\n        setEditingSlot(null);\r\n        toast.success('Slot updated');\r\n    };\r\n\r\n    const removeSlot = (indexToRemove: number) => {\r\n        setGeneratedSchedule(prev => prev.filter((_, idx) => idx !== indexToRemove));\r\n        toast.success('Slot removed');\r\n    };\r\n\r\n    // Prepare data for AddSlotDialog selection\r\n    const availableClassOptions = useMemo(() => {\r\n        return classes?.map(c => ({\r\n            id: c.id,\r\n            courseName: c.courses?.name || 'Unknown',\r\n            courseCode: c.courses?.code || '---',\r\n            facultyName: c.profiles?.full_name || 'TBA',\r\n            teacherId: c.teacher_id,\r\n            section: c.section\r\n        })) || [];\r\n    }, [classes]);\r\n\r\n    // Derive subject-faculty map for the legend/info tab\r\n    const subjectFacultyMapping = useMemo(() => {\r\n        const map = new Map<string, { name: string; code: string; faculty: string; isLab: boolean }>();\r\n        generatedSchedule.forEach(slot => {\r\n            if (!map.has(slot.courseCode)) {\r\n                map.set(slot.courseCode, {\r\n                    name: slot.courseName,\r\n                    code: slot.courseCode,\r\n                    faculty: slot.facultyName,\r\n                    isLab: slot.isLab\r\n                });\r\n            }\r\n        });\r\n        return map;\r\n    }, [generatedSchedule]);\r\n\r\n    if (classesLoading) {\r\n        return <div className=\"flex justify-center p-8\"><Loader2 className=\"h-8 w-8 animate-spin text-primary\" /></div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"grid gap-6 lg:grid-cols-3\">\r\n                {/* Left Panel: Class Selection */}\r\n                <div className=\"lg:col-span-1 space-y-4\">\r\n                    <Card className=\"h-[calc(100vh-200px)] flex flex-col shadow-card\">\r\n                        <CardHeader className=\"pb-3 border-b\">\r\n                            <CardTitle className=\"text-lg font-display flex items-center gap-2\">\r\n                                <BookOpen className=\"h-5 w-5 text-primary\" />\r\n                                Select Subjects\r\n                            </CardTitle>\r\n                            <CardDescription>\r\n                                Choose subjects to schedule\r\n                            </CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent className=\"flex-1 overflow-y-auto pt-4 space-y-2\">\r\n                            {classes?.length === 0 ? (\r\n                                <p className=\"text-center text-muted-foreground py-4\">No classes found.</p>\r\n                            ) : (\r\n                                classes?.map(cls => {\r\n                                    const isSelected = selectedClasses.some(c => c.id === cls.id && !c.isLab);\r\n                                    const isLabSelected = selectedClasses.some(c => c.id === cls.id && c.isLab);\r\n                                    return (\r\n                                        <div key={cls.id} className=\"p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors\">\r\n                                            <div className=\"mb-2\">\r\n                                                <div className=\"font-semibold text-sm\">{cls.courses?.name}</div>\r\n                                                <div className=\"text-xs text-muted-foreground flex items-center justify-between mt-1\">\r\n                                                    <span>{cls.courses?.code}</span>\r\n                                                    <span className=\"flex items-center gap-1\">\r\n                                                        <Users className=\"h-3 w-3\" /> {cls.profiles?.full_name}\r\n                                                    </span>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"flex gap-2 text-xs\">\r\n                                                <Button\r\n                                                    variant={isSelected ? \"default\" : \"outline\"}\r\n                                                    size=\"sm\"\r\n                                                    className=\"h-7 flex-1\"\r\n                                                    onClick={() => toggleClass(cls.id, false)}\r\n                                                >\r\n                                                    {isSelected ? <CheckCircle2 className=\"h-3 w-3 mr-1\" /> : <Plus className=\"h-3 w-3 mr-1\" />}\r\n                                                    Theory\r\n                                                </Button>\r\n                                                <Button\r\n                                                    variant={isLabSelected ? \"secondary\" : \"outline\"}\r\n                                                    size=\"sm\"\r\n                                                    className={cn(\"h-7 flex-1\", isLabSelected && \"bg-purple-100 text-purple-800 hover:bg-purple-200\")}\r\n                                                    onClick={() => toggleClass(cls.id, true)}\r\n                                                >\r\n                                                    {isLabSelected ? <CheckCircle2 className=\"h-3 w-3 mr-1\" /> : <Plus className=\"h-3 w-3 mr-1\" />}\r\n                                                    Lab\r\n                                                </Button>\r\n                                            </div>\r\n                                        </div>\r\n                                    );\r\n                                })\r\n                            )}\r\n                        </CardContent>\r\n                        <div className=\"p-4 border-t bg-muted/20 space-y-2\">\r\n                            <Button\r\n                                className=\"w-full gap-2\"\r\n                                onClick={handleGenerate}\r\n                                disabled={isGenerating || selectedClasses.length === 0}\r\n                            >\r\n                                {isGenerating ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Sparkles className=\"h-4 w-4\" />}\r\n                                Generate Timetable\r\n                            </Button>\r\n                            {selectedClasses.length > 0 && (\r\n                                <Button variant=\"ghost\" className=\"w-full text-muted-foreground\" onClick={handleClear}>\r\n                                    Clear Selection\r\n                                </Button>\r\n                            )}\r\n                        </div>\r\n                    </Card>\r\n                </div>\r\n\r\n                {/* Right Panel: Calendar/Results */}\r\n                <div className=\"lg:col-span-2 space-y-4\">\r\n                    {generatedSchedule.length > 0 ? (\r\n                        <Tabs defaultValue=\"grid\" className=\"w-full\">\r\n                            <div className=\"flex items-center justify-between mb-4\">\r\n                                <TabsList>\r\n                                    <TabsTrigger value=\"grid\" className=\"gap-2\"><Calendar className=\"h-4 w-4\" /> Grid View</TabsTrigger>\r\n                                    <TabsTrigger value=\"faculty\" className=\"gap-2\"><Users className=\"h-4 w-4\" /> Faculty Load</TabsTrigger>\r\n                                    <TabsTrigger value=\"info\" className=\"gap-2\"><Info className=\"h-4 w-4\" /> Info</TabsTrigger>\r\n                                </TabsList>\r\n                                <div className=\"flex gap-2\">\r\n                                    <Button variant=\"outline\" size=\"sm\" onClick={() => setIsAddDialogOpen(true)} className=\"gap-2\">\r\n                                        <Plus className=\"h-4 w-4\" /> Add Slot\r\n                                    </Button>\r\n                                    <Button onClick={handleSave} disabled={isSaving} className=\"gap-2\">\r\n                                        {isSaving ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Save className=\"h-4 w-4\" />}\r\n                                        Save Timetable\r\n                                    </Button>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <TabsContent value=\"grid\" className=\"space-y-4\">\r\n                                <Card className=\"shadow-card border-2 border-primary/10\">\r\n                                    <CardContent className=\"p-0 overflow-x-auto\">\r\n                                        <div className=\"min-w-[800px]\">\r\n                                            <table className=\"w-full border-collapse text-sm\">\r\n                                                <thead>\r\n                                                    <tr className=\"bg-muted/50 text-left\">\r\n                                                        <th className=\"p-3 border font-semibold w-24 bg-muted text-center\">Day / Time</th>\r\n                                                        {TIME_SLOTS.map((slot, idx) => (\r\n                                                            <th key={idx} className={cn(\r\n                                                                \"p-2 border font-semibold text-center min-w-[100px]\",\r\n                                                                slot.isLunch && \"bg-amber-50\"\r\n                                                            )}>\r\n                                                                <div className=\"text-xs text-muted-foreground mb-1\">\r\n                                                                    {slot.start} - {slot.end}\r\n                                                                </div>\r\n                                                                {slot.isLunch ? \"LUNCH\" : slot.label}\r\n                                                            </th>\r\n                                                        ))}\r\n                                                    </tr>\r\n                                                </thead>\r\n                                                <tbody>\r\n                                                    {DAYS.map(day => (\r\n                                                        <tr key={day}>\r\n                                                            <td className=\"p-3 border font-medium bg-muted/30 text-center\">{day}</td>\r\n                                                            {TIME_SLOTS.map((slot, slotIdx) => {\r\n                                                                if (slot.isLunch) {\r\n                                                                    return <td key={slotIdx} className=\"p-2 border bg-amber-50/50 text-center text-amber-300\"></td>;\r\n                                                                }\r\n\r\n                                                                const scheduledSlot = getSlotForCell(day, slot.index);\r\n                                                                const isCellStart = scheduledSlot && scheduledSlot.start_time === slot.start;\r\n\r\n                                                                // If this slot is part of a lab spanning multiple periods, only render on start\r\n                                                                if (scheduledSlot && scheduledSlot.isLab && !isCellStart) {\r\n                                                                    return null; // Don't render cell, handled by rowspan/colspan logic or just skipped if we use simple grid\r\n                                                                    // Simpler approach: check if this index is in slotIndices. If it's not the first one, skip rendering? \r\n                                                                    // Wait, HTML table logic needs valid cells.\r\n                                                                    // Let's just render usually, but maybe span?\r\n                                                                }\r\n\r\n                                                                // Actually, with simple grid, we can just render. The 'getSlotForCell' works.\r\n                                                                // But for Lab spanning 2 cols:\r\n                                                                if (scheduledSlot && scheduledSlot.isLab && scheduledSlot.slotIndices[0] === slot.index) {\r\n                                                                    return (\r\n                                                                        <td key={slotIdx} colSpan={2} className=\"p-1 border bg-purple-50 hover:bg-purple-100 transition-colors relative group\">\r\n                                                                            <div className=\"h-full w-full p-2 flex flex-col items-center justify-center text-center gap-1\">\r\n                                                                                <Badge variant=\"secondary\" className=\"bg-purple-200 text-purple-800 border-purple-300 mb-1\">LAB</Badge>\r\n                                                                                <span className=\"font-bold text-xs\">{scheduledSlot.courseCode}</span>\r\n                                                                                <span className=\"text-[10px] text-muted-foreground line-clamp-1\">{scheduledSlot.facultyName}</span>\r\n                                                                            </div>\r\n                                                                            <div className=\"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1 bg-white/80 rounded shadow-sm p-0.5\">\r\n                                                                                <Button variant=\"ghost\" size=\"icon\" className=\"h-5 w-5\" onClick={() => setEditingSlot(scheduledSlot)}>\r\n                                                                                    <Pencil className=\"h-3 w-3\" />\r\n                                                                                </Button>\r\n                                                                                <Button variant=\"ghost\" size=\"icon\" className=\"h-5 w-5 text-destructive\" onClick={() => removeSlot(generatedSchedule.indexOf(scheduledSlot))}>\r\n                                                                                    <Trash2 className=\"h-3 w-3\" />\r\n                                                                                </Button>\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                    )\r\n                                                                }\r\n                                                                if (scheduledSlot && scheduledSlot.isLab) {\r\n                                                                    return null; // Skip 2nd cell of lab\r\n                                                                }\r\n\r\n                                                                return (\r\n                                                                    <td key={slotIdx} className=\"p-1 border hover:bg-accent/10 transition-colors relative group h-20\">\r\n                                                                        {scheduledSlot ? (\r\n                                                                            <div className=\"h-full w-full p-1 flex flex-col items-center justify-center text-center\">\r\n                                                                                <span className=\"font-bold text-xs mb-1 text-primary\">{scheduledSlot.courseCode}</span>\r\n                                                                                <span className=\"text-[10px] text-muted-foreground line-clamp-2\">{scheduledSlot.courseName}</span>\r\n                                                                                <span className=\"text-[10px] font-medium text-muted-foreground mt-1\">{scheduledSlot.facultyName.split(' ')[0]}</span>\r\n\r\n                                                                                <div className=\"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1 bg-white/80 rounded shadow-sm p-0.5\">\r\n                                                                                    <Button variant=\"ghost\" size=\"icon\" className=\"h-5 w-5\" onClick={() => setEditingSlot(scheduledSlot)}>\r\n                                                                                        <Pencil className=\"h-3 w-3\" />\r\n                                                                                    </Button>\r\n                                                                                    <Button variant=\"ghost\" size=\"icon\" className=\"h-5 w-5 text-destructive\" onClick={() => removeSlot(generatedSchedule.indexOf(scheduledSlot))}>\r\n                                                                                        <Trash2 className=\"h-3 w-3\" />\r\n                                                                                    </Button>\r\n                                                                                </div>\r\n                                                                            </div>\r\n                                                                        ) : (\r\n                                                                            <div\r\n                                                                                className=\"h-full w-full flex items-center justify-center opacity-0 group-hover:opacity-100 cursor-pointer\"\r\n                                                                                onClick={() => {\r\n                                                                                    setAddDialogDefaultDay(day);\r\n                                                                                    setAddDialogDefaultSlot(slot.index);\r\n                                                                                    setIsAddDialogOpen(true);\r\n                                                                                }}\r\n                                                                            >\r\n                                                                                <Plus className=\"h-4 w-4 text-muted-foreground\" />\r\n                                                                            </div>\r\n                                                                        )}\r\n                                                                    </td>\r\n                                                                );\r\n                                                            })}\r\n                                                        </tr>\r\n                                                    ))}\r\n                                                </tbody>\r\n                                            </table>\r\n                                        </div>\r\n                                    </CardContent>\r\n                                </Card>\r\n\r\n                                {/* Detailed List */}\r\n                                <div>\r\n                                    <h4 className=\"font-semibold mb-3\">Detailed List:</h4>\r\n                                    <div className=\"overflow-x-auto\">\r\n                                        <table className=\"w-full min-w-[700px]\">\r\n                                            <thead>\r\n                                                <tr className=\"border-b\">\r\n                                                    <th className=\"text-left p-3 font-medium\">Course</th>\r\n                                                    <th className=\"text-left p-3 font-medium\">Faculty</th>\r\n                                                    <th className=\"text-left p-3 font-medium\">Type</th>\r\n                                                    <th className=\"text-left p-3 font-medium\">Day</th>\r\n                                                    <th className=\"text-left p-3 font-medium\">Time</th>\r\n                                                    <th className=\"text-left p-3 font-medium\">Room</th>\r\n                                                    <th className=\"text-right p-3 font-medium\">Actions</th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody>\r\n                                                {generatedSchedule.map((slot, index) => (\r\n                                                    <tr key={index} className=\"border-b last:border-0 hover:bg-muted/50\">\r\n                                                        <td className=\"p-3 font-medium\">{slot.courseName}</td>\r\n                                                        <td className=\"p-3 text-muted-foreground\">{slot.facultyName}</td>\r\n                                                        <td className=\"p-3\">\r\n                                                            <Badge variant={slot.isLab ? \"secondary\" : \"outline\"}\r\n                                                                className={slot.isLab ? \"bg-purple-100 text-purple-800\" : \"\"}>\r\n                                                                {slot.isLab ? 'Lab' : 'Theory'}\r\n                                                            </Badge>\r\n                                                        </td>\r\n                                                        <td className=\"p-3\">{slot.day_of_week}</td>\r\n                                                        <td className=\"p-3\">\r\n                                                            <div className=\"flex items-center gap-1\">\r\n                                                                <Clock className=\"h-4 w-4 text-muted-foreground\" />\r\n                                                                {slot.start_time} - {slot.end_time}\r\n                                                            </div>\r\n                                                        </td>\r\n                                                        <td className=\"p-3\">{slot.room}</td>\r\n                                                        <td className=\"p-3 text-right\">\r\n                                                            <div className=\"flex items-center justify-end gap-1\">\r\n                                                                <Button\r\n                                                                    variant=\"ghost\"\r\n                                                                    size=\"sm\"\r\n                                                                    onClick={() => setEditingSlot(slot)}\r\n                                                                >\r\n                                                                    <Pencil className=\"h-4 w-4\" />\r\n                                                                </Button>\r\n                                                                <Button\r\n                                                                    variant=\"ghost\"\r\n                                                                    size=\"sm\"\r\n                                                                    onClick={() => removeSlot(index)}\r\n                                                                    className=\"text-destructive hover:text-destructive\"\r\n                                                                >\r\n                                                                    <Trash2 className=\"h-4 w-4\" />\r\n                                                                </Button>\r\n                                                            </div>\r\n                                                        </td>\r\n                                                    </tr>\r\n                                                ))}\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </div>\r\n                                </div>\r\n                            </TabsContent>\r\n\r\n                            <TabsContent value=\"faculty\">\r\n                                <FacultyWorkloadView workloads={facultyWorkloads} />\r\n                            </TabsContent>\r\n\r\n                            <TabsContent value=\"info\" className=\"space-y-6\">\r\n                                <Card className=\"shadow-sm\">\r\n                                    <CardHeader className=\"pb-2\">\r\n                                        <CardTitle className=\"text-base flex items-center gap-2\">\r\n                                            <Info className=\"h-4 w-4 text-primary\" />\r\n                                            Optimization Report\r\n                                        </CardTitle>\r\n                                    </CardHeader>\r\n                                    <CardContent>\r\n                                        <ul className=\"space-y-2 text-sm\">\r\n                                            {justification.map((note, i) => (\r\n                                                <li key={i} className=\"flex items-start gap-2\">\r\n                                                    <CheckCircle2 className=\"h-4 w-4 text-green-500 mt-0.5 shrink-0\" />\r\n                                                    <span>{note}</span>\r\n                                                </li>\r\n                                            ))}\r\n                                        </ul>\r\n                                    </CardContent>\r\n                                </Card>\r\n\r\n                                <SubjectFacultyMapping mapping={subjectFacultyMapping} />\r\n                            </TabsContent>\r\n                        </Tabs>\r\n                    ) : (\r\n                        <div className=\"h-full flex items-center justify-center p-12 border-2 border-dashed rounded-lg bg-muted/10\">\r\n                            <div className=\"text-center space-y-3\">\r\n                                <div className=\"bg-primary/10 p-4 rounded-full w-fit mx-auto\">\r\n                                    <Sparkles className=\"h-8 w-8 text-primary\" />\r\n                                </div>\r\n                                <h3 className=\"font-semibold text-lg\">Ready to Generate</h3>\r\n                                <p className=\"text-muted-foreground max-w-sm mx-auto\">\r\n                                    Select subjects from the left panel and click \"Generate Timetable\" to create an optimized schedule automatically.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Dialogs */}\r\n            <AddSlotDialog\r\n                open={isAddDialogOpen}\r\n                onOpenChange={setIsAddDialogOpen}\r\n                onAdd={handleAddSlot}\r\n                occupiedSlots={occupiedSlotsMap}\r\n                availableClasses={availableClassOptions}\r\n                defaultDay={addDialogDefaultDay}\r\n                defaultSlotIndex={addDialogDefaultSlot}\r\n            />\r\n\r\n            <EditSlotDialog\r\n                open={!!editingSlot}\r\n                onOpenChange={(open) => !open && setEditingSlot(null)}\r\n                slot={editingSlot}\r\n                onSave={handleUpdateSlot}\r\n                occupiedSlots={occupiedSlotsMap}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\n// ---------------- Helper Components ----------------\r\n\r\nfunction FacultyWorkloadView({ workloads }: { workloads: FacultyWorkload[] }) {\r\n    const handleExportSingle = (workload: FacultyWorkload) => {\r\n        generateFacultyTimetablePdf({ workload, departmentName: 'CSE', academicYear: '2025-26', semester: 'Sem 3-2' }); // hardcoded for demo\r\n    };\r\n\r\n    const handleExportAll = () => {\r\n        generateAllFacultyTimetablesPdf({ workloads, departmentName: 'CSE', academicYear: '2025-26', semester: 'Sem 3-2' });\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {workloads.length === 0 ? (\r\n                <div className=\"text-center py-8 text-muted-foreground\">\r\n                    <Users className=\"h-12 w-12 mx-auto mb-3 opacity-30\" />\r\n                    <p>No faculty workload data available</p>\r\n                </div>\r\n            ) : (\r\n                <>\r\n                    {/* Export All Button */}\r\n                    <div className=\"flex justify-end\">\r\n                        <Button onClick={handleExportAll} variant=\"outline\" className=\"gap-2\">\r\n                            <FileDown className=\"h-4 w-4\" />\r\n                            Export All Faculty PDFs\r\n                        </Button>\r\n                    </div>\r\n\r\n                    {/* Summary Table */}\r\n                    <div className=\"overflow-x-auto\">\r\n                        <Table>\r\n                            <TableHeader>\r\n                                <TableRow className=\"bg-muted/50\">\r\n                                    <TableHead className=\"font-bold\">Faculty</TableHead>\r\n                                    <TableHead className=\"font-bold text-center\">Total Periods</TableHead>\r\n                                    <TableHead className=\"font-bold text-center\">Morning</TableHead>\r\n                                    <TableHead className=\"font-bold text-center\">Afternoon</TableHead>\r\n                                    {DAYS.map(day => (\r\n                                        <TableHead key={day} className=\"font-bold text-center text-xs\">\r\n                                            {day.substring(0, 3)}\r\n                                        </TableHead>\r\n                                    ))}\r\n                                    <TableHead className=\"font-bold text-center\">Export</TableHead>\r\n                                </TableRow>\r\n                            </TableHeader>\r\n                            <TableBody>\r\n                                {workloads.map((workload, idx) => (\r\n                                    <TableRow key={idx}>\r\n                                        <TableCell className=\"font-medium\">{workload.teacherName}</TableCell>\r\n                                        <TableCell className=\"text-center\">\r\n                                            <Badge variant=\"secondary\">{workload.totalPeriods}</Badge>\r\n                                        </TableCell>\r\n                                        <TableCell className=\"text-center text-sm\">{workload.morningPeriods}</TableCell>\r\n                                        <TableCell className=\"text-center text-sm\">{workload.afternoonPeriods}</TableCell>\r\n                                        {DAYS.map(day => (\r\n                                            <TableCell key={day} className=\"text-center text-sm\">\r\n                                                {workload.periodsPerDay.get(day as DayOfWeek) || 0}\r\n                                            </TableCell>\r\n                                        ))}\r\n                                        <TableCell className=\"text-center\">\r\n                                            <Button\r\n                                                variant=\"ghost\"\r\n                                                size=\"sm\"\r\n                                                onClick={() => handleExportSingle(workload)}\r\n                                                title={`Export ${workload.teacherName}'s timetable`}\r\n                                            >\r\n                                                <FileDown className=\"h-4 w-4\" />\r\n                                            </Button>\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                ))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </div>\r\n\r\n                    {/* Individual Faculty Timetables */}\r\n                    <div className=\"space-y-4\">\r\n                        <h4 className=\"font-semibold\">Individual Faculty Schedules:</h4>\r\n                        {workloads.map((workload, idx) => (\r\n                            <Card key={idx} className=\"shadow-sm\">\r\n                                <CardHeader className=\"pb-2\">\r\n                                    <CardTitle className=\"text-base flex items-center gap-2\">\r\n                                        <Users className=\"h-4 w-4 text-primary\" />\r\n                                        {workload.teacherName}\r\n                                        <div className=\"ml-auto flex items-center gap-2\">\r\n                                            <Badge variant=\"outline\">\r\n                                                {workload.totalPeriods} periods/week\r\n                                            </Badge>\r\n                                            <Button\r\n                                                variant=\"outline\"\r\n                                                size=\"sm\"\r\n                                                onClick={() => handleExportSingle(workload)}\r\n                                                className=\"gap-1\"\r\n                                            >\r\n                                                <FileDown className=\"h-3 w-3\" />\r\n                                                PDF\r\n                                            </Button>\r\n                                        </div>\r\n                                    </CardTitle>\r\n                                </CardHeader>\r\n                                <CardContent>\r\n                                    <div className=\"overflow-x-auto\">\r\n                                        <table className=\"w-full text-sm border-collapse\">\r\n                                            <thead>\r\n                                                <tr className=\"bg-muted/50\">\r\n                                                    <th className=\"p-2 text-left font-medium border\">Day</th>\r\n                                                    <th className=\"p-2 text-left font-medium border\">Schedule</th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody>\r\n                                                {DAYS.map(day => {\r\n                                                    const daySchedule = workload.daySchedule.get(day as DayOfWeek) || [];\r\n                                                    return (\r\n                                                        <tr key={day}>\r\n                                                            <td className=\"p-2 border font-medium w-24\">{day}</td>\r\n                                                            <td className=\"p-2 border\">\r\n                                                                {daySchedule.length > 0 ? (\r\n                                                                    <div className=\"flex flex-wrap gap-2\">\r\n                                                                        {daySchedule.map((slot, i) => (\r\n                                                                            <Badge\r\n                                                                                key={i}\r\n                                                                                variant={slot.isLab ? \"secondary\" : \"outline\"}\r\n                                                                                className={cn(\r\n                                                                                    \"text-xs\",\r\n                                                                                    slot.isLab && \"bg-purple-100 text-purple-800\"\r\n                                                                                )}\r\n                                                                            >\r\n                                                                                {slot.courseCode} ({slot.start_time}-{slot.end_time})\r\n                                                                            </Badge>\r\n                                                                        ))}\r\n                                                                    </div>\r\n                                                                ) : (\r\n                                                                    <span className=\"text-muted-foreground text-xs\">Free</span>\r\n                                                                )}\r\n                                                            </td>\r\n                                                        </tr>\r\n                                                    );\r\n                                                })}\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </div>\r\n                                </CardContent>\r\n                            </Card>\r\n                        ))}\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction SubjectFacultyMapping({\r\n    mapping\r\n}: {\r\n    mapping: Map<string, { name: string; code: string; faculty: string; isLab: boolean }>\r\n}) {\r\n    return (\r\n        <div className=\"overflow-x-auto\">\r\n            <Table>\r\n                <TableHeader>\r\n                    <TableRow className=\"bg-muted/50\">\r\n                        <TableHead className=\"font-bold\">Subject Code</TableHead>\r\n                        <TableHead className=\"font-bold\">Subject Name</TableHead>\r\n                        <TableHead className=\"font-bold\">Type</TableHead>\r\n                        <TableHead className=\"font-bold\">Faculty</TableHead>\r\n                    </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                    {Array.from(mapping.values()).map((subject, idx) => (\r\n                        <TableRow key={idx}>\r\n                            <TableCell>\r\n                                <Badge\r\n                                    variant=\"outline\"\r\n                                    className={cn(\r\n                                        \"font-mono\",\r\n                                        subject.isLab ? \"bg-purple-100 text-purple-800\" : \"bg-blue-100 text-blue-800\"\r\n                                    )}\r\n                                >\r\n                                    {subject.code}\r\n                                </Badge>\r\n                            </TableCell>\r\n                            <TableCell className=\"font-medium\">{subject.name}</TableCell>\r\n                            <TableCell>\r\n                                <Badge variant={subject.isLab ? \"secondary\" : \"outline\"}>\r\n                                    {subject.isLab ? 'Lab' : 'Theory'}\r\n                                </Badge>\r\n                            </TableCell>\r\n                            <TableCell>{subject.faculty}</TableCell>\r\n                        </TableRow>\r\n                    ))}\r\n                </TableBody>\r\n            </Table>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\animated-counter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\aspect-ratio.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\badge.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":29,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":29,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\r\n        secondary: \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive: \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  },\r\n);\r\n\r\nexport interface BadgeProps extends React.HTMLAttributes<HTMLDivElement>, VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return <div className={cn(badgeVariants({ variant }), className)} {...props} />;\r\n}\r\n\r\nexport { Badge, badgeVariants };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\breadcrumb.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\button.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":51,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":51,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:shadow-lg\",\r\n        destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-md\",\r\n        outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n        hero: \"gradient-primary text-primary-foreground font-semibold shadow-lg hover:shadow-glow hover:scale-105 transition-all duration-300\",\r\n        accent: \"bg-accent text-accent-foreground font-semibold shadow-md hover:bg-accent/90 hover:shadow-lg\",\r\n        success: \"bg-success text-success-foreground font-medium shadow-md hover:bg-success/90\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 rounded-md px-3\",\r\n        lg: \"h-11 rounded-lg px-8 text-base\",\r\n        xl: \"h-14 rounded-xl px-10 text-lg\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n);\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean;\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\";\r\n    return <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />;\r\n  }\r\n);\r\nButton.displayName = \"Button\";\r\n\r\nexport { Button, buttonVariants };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\carousel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\chart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\command.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":24,"column":11,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":24,"endColumn":29,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[733,784],"text":"type CommandDialogProps = DialogProps"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { type DialogProps } from \"@radix-ui/react-dialog\";\r\nimport { Command as CommandPrimitive } from \"cmdk\";\r\nimport { Search } from \"lucide-react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\r\n\r\nconst Command = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nCommand.displayName = CommandPrimitive.displayName;\r\n\r\ninterface CommandDialogProps extends DialogProps {}\r\n\r\nconst CommandDialog = ({ children, ...props }: CommandDialogProps) => {\r\n  return (\r\n    <Dialog {...props}>\r\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\r\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\r\n          {children}\r\n        </Command>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nconst CommandInput = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Input>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\r\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\r\n    <CommandPrimitive.Input\r\n      ref={ref}\r\n      className={cn(\r\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  </div>\r\n));\r\n\r\nCommandInput.displayName = CommandPrimitive.Input.displayName;\r\n\r\nconst CommandList = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.List\r\n    ref={ref}\r\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\r\n    {...props}\r\n  />\r\n));\r\n\r\nCommandList.displayName = CommandPrimitive.List.displayName;\r\n\r\nconst CommandEmpty = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Empty>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\r\n>((props, ref) => <CommandPrimitive.Empty ref={ref} className=\"py-6 text-center text-sm\" {...props} />);\r\n\r\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName;\r\n\r\nconst CommandGroup = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Group>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Group\r\n    ref={ref}\r\n    className={cn(\r\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\n\r\nCommandGroup.displayName = CommandPrimitive.Group.displayName;\r\n\r\nconst CommandSeparator = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Separator ref={ref} className={cn(\"-mx-1 h-px bg-border\", className)} {...props} />\r\n));\r\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName;\r\n\r\nconst CommandItem = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\n\r\nCommandItem.displayName = CommandPrimitive.Item.displayName;\r\n\r\nconst CommandShortcut = ({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return <span className={cn(\"ml-auto text-xs tracking-widest text-muted-foreground\", className)} {...props} />;\r\n};\r\nCommandShortcut.displayName = \"CommandShortcut\";\r\n\r\nexport {\r\n  Command,\r\n  CommandDialog,\r\n  CommandInput,\r\n  CommandList,\r\n  CommandEmpty,\r\n  CommandGroup,\r\n  CommandItem,\r\n  CommandShortcut,\r\n  CommandSeparator,\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\context-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\form.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":129,"column":10,"nodeType":"Identifier","messageId":"namedExport","endLine":129,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { Controller, ControllerProps, FieldPath, FieldValues, FormProvider, useFormContext } from \"react-hook-form\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Label } from \"@/components/ui/label\";\r\n\r\nconst Form = FormProvider;\r\n\r\ntype FormFieldContextValue<\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\r\n> = {\r\n  name: TName;\r\n};\r\n\r\nconst FormFieldContext = React.createContext<FormFieldContextValue>({} as FormFieldContextValue);\r\n\r\nconst FormField = <\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\r\n>({\r\n  ...props\r\n}: ControllerProps<TFieldValues, TName>) => {\r\n  return (\r\n    <FormFieldContext.Provider value={{ name: props.name }}>\r\n      <Controller {...props} />\r\n    </FormFieldContext.Provider>\r\n  );\r\n};\r\n\r\nconst useFormField = () => {\r\n  const fieldContext = React.useContext(FormFieldContext);\r\n  const itemContext = React.useContext(FormItemContext);\r\n  const { getFieldState, formState } = useFormContext();\r\n\r\n  const fieldState = getFieldState(fieldContext.name, formState);\r\n\r\n  if (!fieldContext) {\r\n    throw new Error(\"useFormField should be used within <FormField>\");\r\n  }\r\n\r\n  const { id } = itemContext;\r\n\r\n  return {\r\n    id,\r\n    name: fieldContext.name,\r\n    formItemId: `${id}-form-item`,\r\n    formDescriptionId: `${id}-form-item-description`,\r\n    formMessageId: `${id}-form-item-message`,\r\n    ...fieldState,\r\n  };\r\n};\r\n\r\ntype FormItemContextValue = {\r\n  id: string;\r\n};\r\n\r\nconst FormItemContext = React.createContext<FormItemContextValue>({} as FormItemContextValue);\r\n\r\nconst FormItem = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\r\n  ({ className, ...props }, ref) => {\r\n    const id = React.useId();\r\n\r\n    return (\r\n      <FormItemContext.Provider value={{ id }}>\r\n        <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\r\n      </FormItemContext.Provider>\r\n    );\r\n  },\r\n);\r\nFormItem.displayName = \"FormItem\";\r\n\r\nconst FormLabel = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  const { error, formItemId } = useFormField();\r\n\r\n  return <Label ref={ref} className={cn(error && \"text-destructive\", className)} htmlFor={formItemId} {...props} />;\r\n});\r\nFormLabel.displayName = \"FormLabel\";\r\n\r\nconst FormControl = React.forwardRef<React.ElementRef<typeof Slot>, React.ComponentPropsWithoutRef<typeof Slot>>(\r\n  ({ ...props }, ref) => {\r\n    const { error, formItemId, formDescriptionId, formMessageId } = useFormField();\r\n\r\n    return (\r\n      <Slot\r\n        ref={ref}\r\n        id={formItemId}\r\n        aria-describedby={!error ? `${formDescriptionId}` : `${formDescriptionId} ${formMessageId}`}\r\n        aria-invalid={!!error}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nFormControl.displayName = \"FormControl\";\r\n\r\nconst FormDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\r\n  ({ className, ...props }, ref) => {\r\n    const { formDescriptionId } = useFormField();\r\n\r\n    return <p ref={ref} id={formDescriptionId} className={cn(\"text-sm text-muted-foreground\", className)} {...props} />;\r\n  },\r\n);\r\nFormDescription.displayName = \"FormDescription\";\r\n\r\nconst FormMessage = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\r\n  ({ className, children, ...props }, ref) => {\r\n    const { error, formMessageId } = useFormField();\r\n    const body = error ? String(error?.message) : children;\r\n\r\n    if (!body) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <p ref={ref} id={formMessageId} className={cn(\"text-sm font-medium text-destructive\", className)} {...props}>\r\n        {body}\r\n      </p>\r\n    );\r\n  },\r\n);\r\nFormMessage.displayName = \"FormMessage\";\r\n\r\nexport { useFormField, Form, FormItem, FormLabel, FormControl, FormDescription, FormMessage, FormField };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\hover-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\input-otp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\loading-skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\menubar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\navigation-menu.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":111,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":111,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\";\r\nimport { cva } from \"class-variance-authority\";\r\nimport { ChevronDown } from \"lucide-react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst NavigationMenu = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\r\n>(({ className, children, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\"relative z-10 flex max-w-max flex-1 items-center justify-center\", className)}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <NavigationMenuViewport />\r\n  </NavigationMenuPrimitive.Root>\r\n));\r\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName;\r\n\r\nconst NavigationMenuList = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.List\r\n    ref={ref}\r\n    className={cn(\"group flex flex-1 list-none items-center justify-center space-x-1\", className)}\r\n    {...props}\r\n  />\r\n));\r\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName;\r\n\r\nconst NavigationMenuItem = NavigationMenuPrimitive.Item;\r\n\r\nconst navigationMenuTriggerStyle = cva(\r\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50\",\r\n);\r\n\r\nconst NavigationMenuTrigger = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\r\n    {...props}\r\n  >\r\n    {children}{\" \"}\r\n    <ChevronDown\r\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\r\n      aria-hidden=\"true\"\r\n    />\r\n  </NavigationMenuPrimitive.Trigger>\r\n));\r\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName;\r\n\r\nconst NavigationMenuContent = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName;\r\n\r\nconst NavigationMenuLink = NavigationMenuPrimitive.Link;\r\n\r\nconst NavigationMenuViewport = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\r\n>(({ className, ...props }, ref) => (\r\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\r\n    <NavigationMenuPrimitive.Viewport\r\n      className={cn(\r\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\r\n        className,\r\n      )}\r\n      ref={ref}\r\n      {...props}\r\n    />\r\n  </div>\r\n));\r\nNavigationMenuViewport.displayName = NavigationMenuPrimitive.Viewport.displayName;\r\n\r\nconst NavigationMenuIndicator = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\r\n>(({ className, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Indicator\r\n    ref={ref}\r\n    className={cn(\r\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  >\r\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\r\n  </NavigationMenuPrimitive.Indicator>\r\n));\r\nNavigationMenuIndicator.displayName = NavigationMenuPrimitive.Indicator.displayName;\r\n\r\nexport {\r\n  navigationMenuTriggerStyle,\r\n  NavigationMenu,\r\n  NavigationMenuList,\r\n  NavigationMenuItem,\r\n  NavigationMenuContent,\r\n  NavigationMenuTrigger,\r\n  NavigationMenuLink,\r\n  NavigationMenuIndicator,\r\n  NavigationMenuViewport,\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\page-transition.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\resizable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\sidebar.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":636,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":636,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { VariantProps, cva } from \"class-variance-authority\";\r\nimport { PanelLeft } from \"lucide-react\";\r\n\r\nimport { useIsMobile } from \"@/hooks/use-mobile\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { Sheet, SheetContent } from \"@/components/ui/sheet\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\r\n\r\nconst SIDEBAR_COOKIE_NAME = \"sidebar:state\";\r\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7;\r\nconst SIDEBAR_WIDTH = \"16rem\";\r\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\";\r\nconst SIDEBAR_WIDTH_ICON = \"3rem\";\r\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\";\r\n\r\ntype SidebarContext = {\r\n  state: \"expanded\" | \"collapsed\";\r\n  open: boolean;\r\n  setOpen: (open: boolean) => void;\r\n  openMobile: boolean;\r\n  setOpenMobile: (open: boolean) => void;\r\n  isMobile: boolean;\r\n  toggleSidebar: () => void;\r\n};\r\n\r\nconst SidebarContext = React.createContext<SidebarContext | null>(null);\r\n\r\nfunction useSidebar() {\r\n  const context = React.useContext(SidebarContext);\r\n  if (!context) {\r\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\");\r\n  }\r\n\r\n  return context;\r\n}\r\n\r\nconst SidebarProvider = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & {\r\n    defaultOpen?: boolean;\r\n    open?: boolean;\r\n    onOpenChange?: (open: boolean) => void;\r\n  }\r\n>(({ defaultOpen = true, open: openProp, onOpenChange: setOpenProp, className, style, children, ...props }, ref) => {\r\n  const isMobile = useIsMobile();\r\n  const [openMobile, setOpenMobile] = React.useState(false);\r\n\r\n  // This is the internal state of the sidebar.\r\n  // We use openProp and setOpenProp for control from outside the component.\r\n  const [_open, _setOpen] = React.useState(defaultOpen);\r\n  const open = openProp ?? _open;\r\n  const setOpen = React.useCallback(\r\n    (value: boolean | ((value: boolean) => boolean)) => {\r\n      const openState = typeof value === \"function\" ? value(open) : value;\r\n      if (setOpenProp) {\r\n        setOpenProp(openState);\r\n      } else {\r\n        _setOpen(openState);\r\n      }\r\n\r\n      // This sets the cookie to keep the sidebar state.\r\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`;\r\n    },\r\n    [setOpenProp, open],\r\n  );\r\n\r\n  // Helper to toggle the sidebar.\r\n  const toggleSidebar = React.useCallback(() => {\r\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open);\r\n  }, [isMobile, setOpen, setOpenMobile]);\r\n\r\n  // Adds a keyboard shortcut to toggle the sidebar.\r\n  React.useEffect(() => {\r\n    const handleKeyDown = (event: KeyboardEvent) => {\r\n      if (event.key === SIDEBAR_KEYBOARD_SHORTCUT && (event.metaKey || event.ctrlKey)) {\r\n        event.preventDefault();\r\n        toggleSidebar();\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"keydown\", handleKeyDown);\r\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\r\n  }, [toggleSidebar]);\r\n\r\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\r\n  // This makes it easier to style the sidebar with Tailwind classes.\r\n  const state = open ? \"expanded\" : \"collapsed\";\r\n\r\n  const contextValue = React.useMemo<SidebarContext>(\r\n    () => ({\r\n      state,\r\n      open,\r\n      setOpen,\r\n      isMobile,\r\n      openMobile,\r\n      setOpenMobile,\r\n      toggleSidebar,\r\n    }),\r\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar],\r\n  );\r\n\r\n  return (\r\n    <SidebarContext.Provider value={contextValue}>\r\n      <TooltipProvider delayDuration={0}>\r\n        <div\r\n          style={\r\n            {\r\n              \"--sidebar-width\": SIDEBAR_WIDTH,\r\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\r\n              ...style,\r\n            } as React.CSSProperties\r\n          }\r\n          className={cn(\"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\", className)}\r\n          ref={ref}\r\n          {...props}\r\n        >\r\n          {children}\r\n        </div>\r\n      </TooltipProvider>\r\n    </SidebarContext.Provider>\r\n  );\r\n});\r\nSidebarProvider.displayName = \"SidebarProvider\";\r\n\r\nconst Sidebar = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & {\r\n    side?: \"left\" | \"right\";\r\n    variant?: \"sidebar\" | \"floating\" | \"inset\";\r\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\";\r\n  }\r\n>(({ side = \"left\", variant = \"sidebar\", collapsible = \"offcanvas\", className, children, ...props }, ref) => {\r\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar();\r\n\r\n  if (collapsible === \"none\") {\r\n    return (\r\n      <div\r\n        className={cn(\"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\", className)}\r\n        ref={ref}\r\n        {...props}\r\n      >\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isMobile) {\r\n    return (\r\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\r\n        <SheetContent\r\n          data-sidebar=\"sidebar\"\r\n          data-mobile=\"true\"\r\n          className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\r\n          style={\r\n            {\r\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\r\n            } as React.CSSProperties\r\n          }\r\n          side={side}\r\n        >\r\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\r\n        </SheetContent>\r\n      </Sheet>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      className=\"group peer hidden text-sidebar-foreground md:block\"\r\n      data-state={state}\r\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\r\n      data-variant={variant}\r\n      data-side={side}\r\n    >\r\n      {/* This is what handles the sidebar gap on desktop */}\r\n      <div\r\n        className={cn(\r\n          \"relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\r\n          \"group-data-[collapsible=offcanvas]:w-0\",\r\n          \"group-data-[side=right]:rotate-180\",\r\n          variant === \"floating\" || variant === \"inset\"\r\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\r\n            : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\",\r\n        )}\r\n      />\r\n      <div\r\n        className={cn(\r\n          \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\r\n          side === \"left\"\r\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\r\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\r\n          // Adjust the padding for floating and inset variants.\r\n          variant === \"floating\" || variant === \"inset\"\r\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\r\n            : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\r\n          className,\r\n        )}\r\n        {...props}\r\n      >\r\n        <div\r\n          data-sidebar=\"sidebar\"\r\n          className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\r\n        >\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\nSidebar.displayName = \"Sidebar\";\r\n\r\nconst SidebarTrigger = React.forwardRef<React.ElementRef<typeof Button>, React.ComponentProps<typeof Button>>(\r\n  ({ className, onClick, ...props }, ref) => {\r\n    const { toggleSidebar } = useSidebar();\r\n\r\n    return (\r\n      <Button\r\n        ref={ref}\r\n        data-sidebar=\"trigger\"\r\n        variant=\"ghost\"\r\n        size=\"icon\"\r\n        className={cn(\"h-7 w-7\", className)}\r\n        onClick={(event) => {\r\n          onClick?.(event);\r\n          toggleSidebar();\r\n        }}\r\n        {...props}\r\n      >\r\n        <PanelLeft />\r\n        <span className=\"sr-only\">Toggle Sidebar</span>\r\n      </Button>\r\n    );\r\n  },\r\n);\r\nSidebarTrigger.displayName = \"SidebarTrigger\";\r\n\r\nconst SidebarRail = React.forwardRef<HTMLButtonElement, React.ComponentProps<\"button\">>(\r\n  ({ className, ...props }, ref) => {\r\n    const { toggleSidebar } = useSidebar();\r\n\r\n    return (\r\n      <button\r\n        ref={ref}\r\n        data-sidebar=\"rail\"\r\n        aria-label=\"Toggle Sidebar\"\r\n        tabIndex={-1}\r\n        onClick={toggleSidebar}\r\n        title=\"Toggle Sidebar\"\r\n        className={cn(\r\n          \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex\",\r\n          \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\r\n          \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\r\n          \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\r\n          \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\r\n          \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\r\n          className,\r\n        )}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nSidebarRail.displayName = \"SidebarRail\";\r\n\r\nconst SidebarInset = React.forwardRef<HTMLDivElement, React.ComponentProps<\"main\">>(({ className, ...props }, ref) => {\r\n  return (\r\n    <main\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative flex min-h-svh flex-1 flex-col bg-background\",\r\n        \"peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nSidebarInset.displayName = \"SidebarInset\";\r\n\r\nconst SidebarInput = React.forwardRef<React.ElementRef<typeof Input>, React.ComponentProps<typeof Input>>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <Input\r\n        ref={ref}\r\n        data-sidebar=\"input\"\r\n        className={cn(\r\n          \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\r\n          className,\r\n        )}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nSidebarInput.displayName = \"SidebarInput\";\r\n\r\nconst SidebarHeader = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\r\n  return <div ref={ref} data-sidebar=\"header\" className={cn(\"flex flex-col gap-2 p-2\", className)} {...props} />;\r\n});\r\nSidebarHeader.displayName = \"SidebarHeader\";\r\n\r\nconst SidebarFooter = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\r\n  return <div ref={ref} data-sidebar=\"footer\" className={cn(\"flex flex-col gap-2 p-2\", className)} {...props} />;\r\n});\r\nSidebarFooter.displayName = \"SidebarFooter\";\r\n\r\nconst SidebarSeparator = React.forwardRef<React.ElementRef<typeof Separator>, React.ComponentProps<typeof Separator>>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <Separator\r\n        ref={ref}\r\n        data-sidebar=\"separator\"\r\n        className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nSidebarSeparator.displayName = \"SidebarSeparator\";\r\n\r\nconst SidebarContent = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"content\"\r\n      className={cn(\r\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nSidebarContent.displayName = \"SidebarContent\";\r\n\r\nconst SidebarGroup = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"group\"\r\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nSidebarGroup.displayName = \"SidebarGroup\";\r\n\r\nconst SidebarGroupLabel = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\"> & { asChild?: boolean }>(\r\n  ({ className, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"div\";\r\n\r\n    return (\r\n      <Comp\r\n        ref={ref}\r\n        data-sidebar=\"group-label\"\r\n        className={cn(\r\n          \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n          \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\r\n          className,\r\n        )}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\";\r\n\r\nconst SidebarGroupAction = React.forwardRef<HTMLButtonElement, React.ComponentProps<\"button\"> & { asChild?: boolean }>(\r\n  ({ className, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\";\r\n\r\n    return (\r\n      <Comp\r\n        ref={ref}\r\n        data-sidebar=\"group-action\"\r\n        className={cn(\r\n          \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n          // Increases the hit area of the button on mobile.\r\n          \"after:absolute after:-inset-2 after:md:hidden\",\r\n          \"group-data-[collapsible=icon]:hidden\",\r\n          className,\r\n        )}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nSidebarGroupAction.displayName = \"SidebarGroupAction\";\r\n\r\nconst SidebarGroupContent = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(\r\n  ({ className, ...props }, ref) => (\r\n    <div ref={ref} data-sidebar=\"group-content\" className={cn(\"w-full text-sm\", className)} {...props} />\r\n  ),\r\n);\r\nSidebarGroupContent.displayName = \"SidebarGroupContent\";\r\n\r\nconst SidebarMenu = React.forwardRef<HTMLUListElement, React.ComponentProps<\"ul\">>(({ className, ...props }, ref) => (\r\n  <ul ref={ref} data-sidebar=\"menu\" className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)} {...props} />\r\n));\r\nSidebarMenu.displayName = \"SidebarMenu\";\r\n\r\nconst SidebarMenuItem = React.forwardRef<HTMLLIElement, React.ComponentProps<\"li\">>(({ className, ...props }, ref) => (\r\n  <li ref={ref} data-sidebar=\"menu-item\" className={cn(\"group/menu-item relative\", className)} {...props} />\r\n));\r\nSidebarMenuItem.displayName = \"SidebarMenuItem\";\r\n\r\nconst sidebarMenuButtonVariants = cva(\r\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\r\n        outline:\r\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\r\n      },\r\n      size: {\r\n        default: \"h-8 text-sm\",\r\n        sm: \"h-7 text-xs\",\r\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  },\r\n);\r\n\r\nconst SidebarMenuButton = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<\"button\"> & {\r\n    asChild?: boolean;\r\n    isActive?: boolean;\r\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>;\r\n  } & VariantProps<typeof sidebarMenuButtonVariants>\r\n>(({ asChild = false, isActive = false, variant = \"default\", size = \"default\", tooltip, className, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"button\";\r\n  const { isMobile, state } = useSidebar();\r\n\r\n  const button = (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"menu-button\"\r\n      data-size={size}\r\n      data-active={isActive}\r\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\r\n      {...props}\r\n    />\r\n  );\r\n\r\n  if (!tooltip) {\r\n    return button;\r\n  }\r\n\r\n  if (typeof tooltip === \"string\") {\r\n    tooltip = {\r\n      children: tooltip,\r\n    };\r\n  }\r\n\r\n  return (\r\n    <Tooltip>\r\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\r\n      <TooltipContent side=\"right\" align=\"center\" hidden={state !== \"collapsed\" || isMobile} {...tooltip} />\r\n    </Tooltip>\r\n  );\r\n});\r\nSidebarMenuButton.displayName = \"SidebarMenuButton\";\r\n\r\nconst SidebarMenuAction = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<\"button\"> & {\r\n    asChild?: boolean;\r\n    showOnHover?: boolean;\r\n  }\r\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"button\";\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"menu-action\"\r\n      className={cn(\r\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n        // Increases the hit area of the button on mobile.\r\n        \"after:absolute after:-inset-2 after:md:hidden\",\r\n        \"peer-data-[size=sm]/menu-button:top-1\",\r\n        \"peer-data-[size=default]/menu-button:top-1.5\",\r\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        showOnHover &&\r\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nSidebarMenuAction.displayName = \"SidebarMenuAction\";\r\n\r\nconst SidebarMenuBadge = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(\r\n  ({ className, ...props }, ref) => (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"menu-badge\"\r\n      className={cn(\r\n        \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\r\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\r\n        \"peer-data-[size=sm]/menu-button:top-1\",\r\n        \"peer-data-[size=default]/menu-button:top-1.5\",\r\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  ),\r\n);\r\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\";\r\n\r\nconst SidebarMenuSkeleton = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & {\r\n    showIcon?: boolean;\r\n  }\r\n>(({ className, showIcon = false, ...props }, ref) => {\r\n  // Random width between 50 to 90%.\r\n  const width = React.useMemo(() => {\r\n    return `${Math.floor(Math.random() * 40) + 50}%`;\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"menu-skeleton\"\r\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\r\n      {...props}\r\n    >\r\n      {showIcon && <Skeleton className=\"size-4 rounded-md\" data-sidebar=\"menu-skeleton-icon\" />}\r\n      <Skeleton\r\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\r\n        data-sidebar=\"menu-skeleton-text\"\r\n        style={\r\n          {\r\n            \"--skeleton-width\": width,\r\n          } as React.CSSProperties\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n});\r\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\";\r\n\r\nconst SidebarMenuSub = React.forwardRef<HTMLUListElement, React.ComponentProps<\"ul\">>(\r\n  ({ className, ...props }, ref) => (\r\n    <ul\r\n      ref={ref}\r\n      data-sidebar=\"menu-sub\"\r\n      className={cn(\r\n        \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  ),\r\n);\r\nSidebarMenuSub.displayName = \"SidebarMenuSub\";\r\n\r\nconst SidebarMenuSubItem = React.forwardRef<HTMLLIElement, React.ComponentProps<\"li\">>(({ ...props }, ref) => (\r\n  <li ref={ref} {...props} />\r\n));\r\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\";\r\n\r\nconst SidebarMenuSubButton = React.forwardRef<\r\n  HTMLAnchorElement,\r\n  React.ComponentProps<\"a\"> & {\r\n    asChild?: boolean;\r\n    size?: \"sm\" | \"md\";\r\n    isActive?: boolean;\r\n  }\r\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"a\";\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"menu-sub-button\"\r\n      data-size={size}\r\n      data-active={isActive}\r\n      className={cn(\r\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\r\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\r\n        size === \"sm\" && \"text-xs\",\r\n        size === \"md\" && \"text-sm\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\";\r\n\r\nexport {\r\n  Sidebar,\r\n  SidebarContent,\r\n  SidebarFooter,\r\n  SidebarGroup,\r\n  SidebarGroupAction,\r\n  SidebarGroupContent,\r\n  SidebarGroupLabel,\r\n  SidebarHeader,\r\n  SidebarInput,\r\n  SidebarInset,\r\n  SidebarMenu,\r\n  SidebarMenuAction,\r\n  SidebarMenuBadge,\r\n  SidebarMenuButton,\r\n  SidebarMenuItem,\r\n  SidebarMenuSkeleton,\r\n  SidebarMenuSub,\r\n  SidebarMenuSubButton,\r\n  SidebarMenuSubItem,\r\n  SidebarProvider,\r\n  SidebarRail,\r\n  SidebarSeparator,\r\n  SidebarTrigger,\r\n  useSidebar,\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\sonner.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":27,"column":19,"nodeType":"Identifier","messageId":"namedExport","endLine":27,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useTheme } from \"next-themes\";\r\nimport { Toaster as Sonner, toast } from \"sonner\";\r\n\r\ntype ToasterProps = React.ComponentProps<typeof Sonner>;\r\n\r\nconst Toaster = ({ ...props }: ToasterProps) => {\r\n  const { theme = \"system\" } = useTheme();\r\n\r\n  return (\r\n    <Sonner\r\n      theme={theme as ToasterProps[\"theme\"]}\r\n      className=\"toaster group\"\r\n      toastOptions={{\r\n        classNames: {\r\n          toast:\r\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\r\n          description: \"group-[.toast]:text-muted-foreground\",\r\n          actionButton: \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\r\n          cancelButton: \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\r\n        },\r\n      }}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nexport { Toaster, toast };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\textarea.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":5,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":5,"endColumn":31,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[79,163],"text":"type TextareaProps = React.TextareaHTMLAttributes<HTMLTextAreaElement>"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface TextareaProps extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(({ className, ...props }, ref) => {\r\n  return (\r\n    <textarea\r\n      className={cn(\r\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className,\r\n      )}\r\n      ref={ref}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nTextarea.displayName = \"Textarea\";\r\n\r\nexport { Textarea };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\toaster.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\toggle-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\toggle.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":37,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":37,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst toggleVariants = cva(\r\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-transparent\",\r\n        outline: \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-3\",\r\n        sm: \"h-9 px-2.5\",\r\n        lg: \"h-11 px-5\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  },\r\n);\r\n\r\nconst Toggle = React.forwardRef<\r\n  React.ElementRef<typeof TogglePrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> & VariantProps<typeof toggleVariants>\r\n>(({ className, variant, size, ...props }, ref) => (\r\n  <TogglePrimitive.Root ref={ref} className={cn(toggleVariants({ variant, size, className }))} {...props} />\r\n));\r\n\r\nToggle.displayName = TogglePrimitive.Root.displayName;\r\n\r\nexport { Toggle, toggleVariants };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\ui\\use-toast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\users\\AddUserDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":89,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2994,2997],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2994,2997],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport * as z from 'zod';\r\nimport { useCreateUser } from '@/hooks/useLMS';\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { UserPlus, Loader2 } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\n\r\nconst DEPARTMENTS = [\r\n  { value: 'CSE', label: 'CSE' },\r\n  { value: 'AI&DS', label: 'AI&DS' },\r\n  { value: 'EEE', label: 'EEE' },\r\n  { value: 'ECE', label: 'ECE' },\r\n  { value: 'MECH', label: 'MECH' },\r\n];\r\n\r\nconst SEMESTERS = [\r\n  { value: '1-1', label: '1-1' },\r\n  { value: '1-2', label: '1-2' },\r\n  { value: '2-1', label: '2-1' },\r\n  { value: '2-2', label: '2-2' },\r\n  { value: '3-1', label: '3-1' },\r\n  { value: '3-2', label: '3-2' },\r\n  { value: '4-1', label: '4-1' },\r\n  { value: '4-2', label: '4-2' },\r\n];\r\n\r\nconst REGULATIONS = [\r\n  { value: 'R20', label: 'R20' },\r\n  { value: 'R23', label: 'R23' },\r\n];\r\n\r\nconst userSchema = z.object({\r\n  full_name: z.string().min(1, 'Name is required'),\r\n  email: z.string().email('Valid email is required'),\r\n  password: z.string().min(6, 'Password must be at least 6 characters'),\r\n  role: z.enum(['student', 'teacher', 'admin']),\r\n  department: z.string().optional(),\r\n  semester: z.string().optional(),\r\n  regulation: z.string().optional(),\r\n  subject: z.string().optional(),\r\n  phone: z.string().optional(),\r\n});\r\n\r\ntype UserFormValues = z.infer<typeof userSchema>;\r\n\r\nexport default function AddUserDialog() {\r\n  const [open, setOpen] = useState(false);\r\n  const createUser = useCreateUser();\r\n\r\n  const form = useForm<UserFormValues>({\r\n    resolver: zodResolver(userSchema),\r\n    defaultValues: {\r\n      full_name: '',\r\n      email: '',\r\n      password: '',\r\n      role: 'student',\r\n      department: '',\r\n      semester: '',\r\n      regulation: '',\r\n      subject: '',\r\n      phone: '',\r\n    },\r\n  });\r\n\r\n  const watchRole = form.watch('role');\r\n\r\n  const onSubmit = async (values: UserFormValues) => {\r\n    try {\r\n      await createUser.mutateAsync({\r\n        full_name: values.full_name,\r\n        email: values.email,\r\n        password: values.password,\r\n        role: values.role,\r\n        department: values.department,\r\n        semester: values.role === 'student' ? values.semester : undefined,\r\n        regulation: values.role === 'student' ? values.regulation : undefined,\r\n        subject: values.role === 'teacher' ? values.subject : undefined,\r\n        phone: values.phone,\r\n      });\r\n      toast.success('User created successfully');\r\n      form.reset();\r\n      setOpen(false);\r\n    } catch (error: any) {\r\n      toast.error(error.message || 'Failed to create user');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={setOpen}>\r\n      <DialogTrigger asChild>\r\n        <Button variant=\"hero\">\r\n          <UserPlus className=\"h-4 w-4\" />\r\n          Add New User\r\n        </Button>\r\n      </DialogTrigger>\r\n      <DialogContent className=\"sm:max-w-md max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle>Add New User</DialogTitle>\r\n          <DialogDescription>Create a new user profile in the system</DialogDescription>\r\n        </DialogHeader>\r\n        <Form {...form}>\r\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"full_name\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Full Name</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"Enter full name\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n            <FormField\r\n              control={form.control}\r\n              name=\"email\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Email</FormLabel>\r\n                  <FormControl>\r\n                    <Input type=\"email\" placeholder=\"email@example.com\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n            <FormField\r\n              control={form.control}\r\n              name=\"password\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Password</FormLabel>\r\n                  <FormControl>\r\n                    <Input type=\"password\" placeholder=\"Enter initial password\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n            <FormField\r\n              control={form.control}\r\n              name=\"role\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Role</FormLabel>\r\n                  <Select onValueChange={field.onChange} value={field.value}>\r\n                    <FormControl>\r\n                      <SelectTrigger>\r\n                        <SelectValue placeholder=\"Select role\" />\r\n                      </SelectTrigger>\r\n                    </FormControl>\r\n                    <SelectContent className=\"bg-background border z-50\">\r\n                      <SelectItem value=\"student\">Student</SelectItem>\r\n                      <SelectItem value=\"teacher\">Faculty</SelectItem>\r\n                      <SelectItem value=\"admin\">Admin</SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n            <FormField\r\n              control={form.control}\r\n              name=\"department\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Department</FormLabel>\r\n                  <Select onValueChange={field.onChange} value={field.value}>\r\n                    <FormControl>\r\n                      <SelectTrigger>\r\n                        <SelectValue placeholder=\"Select department\" />\r\n                      </SelectTrigger>\r\n                    </FormControl>\r\n                    <SelectContent className=\"bg-background border z-50\">\r\n                      {DEPARTMENTS.map((dept) => (\r\n                        <SelectItem key={dept.value} value={dept.value}>\r\n                          {dept.label}\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n            {watchRole === 'teacher' && (\r\n              <FormField\r\n                control={form.control}\r\n                name=\"subject\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Subject</FormLabel>\r\n                    <FormControl>\r\n                      <Input placeholder=\"Enter subject\" {...field} />\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n            )}\r\n            {watchRole === 'student' && (\r\n              <>\r\n                <FormField\r\n                  control={form.control}\r\n                  name=\"semester\"\r\n                  render={({ field }) => (\r\n                    <FormItem>\r\n                      <FormLabel>Semester</FormLabel>\r\n                      <Select onValueChange={field.onChange} value={field.value}>\r\n                        <FormControl>\r\n                          <SelectTrigger>\r\n                            <SelectValue placeholder=\"Select semester\" />\r\n                          </SelectTrigger>\r\n                        </FormControl>\r\n                        <SelectContent className=\"bg-background border z-50\">\r\n                          {SEMESTERS.map((sem) => (\r\n                            <SelectItem key={sem.value} value={sem.value}>\r\n                              {sem.label}\r\n                            </SelectItem>\r\n                          ))}\r\n                        </SelectContent>\r\n                      </Select>\r\n                      <FormMessage />\r\n                    </FormItem>\r\n                  )}\r\n                />\r\n                <FormField\r\n                  control={form.control}\r\n                  name=\"regulation\"\r\n                  render={({ field }) => (\r\n                    <FormItem>\r\n                      <FormLabel>Regulation</FormLabel>\r\n                      <Select onValueChange={field.onChange} value={field.value}>\r\n                        <FormControl>\r\n                          <SelectTrigger>\r\n                            <SelectValue placeholder=\"Select regulation\" />\r\n                          </SelectTrigger>\r\n                        </FormControl>\r\n                        <SelectContent className=\"bg-background border z-50\">\r\n                          {REGULATIONS.map((reg) => (\r\n                            <SelectItem key={reg.value} value={reg.value}>\r\n                              {reg.label}\r\n                            </SelectItem>\r\n                          ))}\r\n                        </SelectContent>\r\n                      </Select>\r\n                      <FormMessage />\r\n                    </FormItem>\r\n                  )}\r\n                />\r\n              </>\r\n            )}\r\n            <FormField\r\n              control={form.control}\r\n              name=\"phone\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Phone (Optional)</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"Enter phone number\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n            <div className=\"flex justify-end gap-2 pt-4\">\r\n              <Button type=\"button\" variant=\"outline\" onClick={() => setOpen(false)}>\r\n                Cancel\r\n              </Button>\r\n              <Button type=\"submit\" disabled={createUser.isPending}>\r\n                {createUser.isPending && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\r\n                Create User\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </Form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\components\\users\\DeleteUserDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[868,871],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[868,871],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { useDeleteUser } from '@/hooks/useLMS';\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from '@/components/ui/alert-dialog';\r\nimport { Loader2 } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\n\r\ninterface DeleteUserDialogProps {\r\n  userId: string;\r\n  userName: string;\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nexport default function DeleteUserDialog({ userId, userName, open, onOpenChange }: DeleteUserDialogProps) {\r\n  const deleteUser = useDeleteUser();\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      await deleteUser.mutateAsync(userId);\r\n      toast.success('User deleted successfully');\r\n      onOpenChange(false);\r\n    } catch (error: any) {\r\n      toast.error(error.message || 'Failed to delete user');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AlertDialog open={open} onOpenChange={onOpenChange}>\r\n      <AlertDialogContent>\r\n        <AlertDialogHeader>\r\n          <AlertDialogTitle>Delete User</AlertDialogTitle>\r\n          <AlertDialogDescription>\r\n            Are you sure you want to delete <span className=\"font-semibold\">{userName}</span>? \r\n            This action cannot be undone and will remove all associated data.\r\n          </AlertDialogDescription>\r\n        </AlertDialogHeader>\r\n        <AlertDialogFooter>\r\n          <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n          <AlertDialogAction \r\n            onClick={handleDelete}\r\n            className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n            disabled={deleteUser.isPending}\r\n          >\r\n            {deleteUser.isPending && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\r\n            Delete\r\n          </AlertDialogAction>\r\n        </AlertDialogFooter>\r\n      </AlertDialogContent>\r\n    </AlertDialog>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\hooks\\use-mobile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\hooks\\use-toast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\hooks\\useAuth.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":117,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":117,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, createContext, useContext, ReactNode } from 'react';\r\nimport { User, Session } from '@supabase/supabase-js';\r\nimport { supabase } from '@/integrations/supabase/client';\r\n\r\ntype UserRole = 'admin' | 'teacher' | 'student' | null;\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  session: Session | null;\r\n  userRole: UserRole;\r\n  loading: boolean;\r\n  signUp: (email: string, password: string, role: UserRole) => Promise<{ error: Error | null }>;\r\n  signIn: (email: string, password: string) => Promise<{ error: Error | null }>;\r\n  signOut: () => Promise<void>;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [session, setSession] = useState<Session | null>(null);\r\n  const [userRole, setUserRole] = useState<UserRole>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // Set up auth state listener FIRST\r\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\r\n      (event, session) => {\r\n        setSession(session);\r\n        setUser(session?.user ?? null);\r\n        \r\n        // Defer role fetch with setTimeout\r\n        if (session?.user) {\r\n          setTimeout(() => {\r\n            fetchUserRole(session.user.id);\r\n          }, 0);\r\n        } else {\r\n          setUserRole(null);\r\n        }\r\n        setLoading(false);\r\n      }\r\n    );\r\n\r\n    // THEN check for existing session\r\n    supabase.auth.getSession().then(({ data: { session } }) => {\r\n      setSession(session);\r\n      setUser(session?.user ?? null);\r\n      if (session?.user) {\r\n        fetchUserRole(session.user.id);\r\n      }\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => subscription.unsubscribe();\r\n  }, []);\r\n\r\n  const fetchUserRole = async (userId: string) => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('profiles')\r\n        .select('role')\r\n        .eq('id', userId)\r\n        .maybeSingle();\r\n      \r\n      if (error) {\r\n        console.error('Error fetching user role:', error);\r\n        return;\r\n      }\r\n      \r\n      if (data) {\r\n        setUserRole(data.role as UserRole);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching user role:', error);\r\n    }\r\n  };\r\n\r\n  const signUp = async (email: string, password: string, role: UserRole) => {\r\n    const redirectUrl = `${window.location.origin}/`;\r\n    \r\n    const { error } = await supabase.auth.signUp({\r\n      email,\r\n      password,\r\n      options: {\r\n        emailRedirectTo: redirectUrl,\r\n        data: {\r\n          role: role\r\n        }\r\n      }\r\n    });\r\n    \r\n    return { error };\r\n  };\r\n\r\n  const signIn = async (email: string, password: string) => {\r\n    const { error } = await supabase.auth.signInWithPassword({\r\n      email,\r\n      password,\r\n    });\r\n    return { error };\r\n  };\r\n\r\n  const signOut = async () => {\r\n    await supabase.auth.signOut();\r\n    setUser(null);\r\n    setSession(null);\r\n    setUserRole(null);\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, session, userRole, loading, signUp, signIn, signOut }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\hooks\\useChatbot.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\hooks\\useDatabaseSeed.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\hooks\\useEnhancedLMS.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\hooks\\useFileUpload.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\hooks\\useLMS.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\hooks\\useRealtimeNotifications.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\integrations\\supabase\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\integrations\\supabase\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\lib\\generateFacultyTimetablePdf.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\lib\\generateFeeReceipt.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\lib\\generateTimetablePdf.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\lib\\timetableScheduler.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":327,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":327,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10866,10869],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10866,10869],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":436,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":436,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14323,14326],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14323,14326],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Timetable Scheduling Engine with Faculty-Friendly Constraints\r\n// Implements academic rules for B.Tech class timetable generation\r\n\r\nexport const DAYS = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'] as const;\r\nexport type DayOfWeek = typeof DAYS[number];\r\n\r\nexport interface TimeSlot {\r\n  start: string;\r\n  end: string;\r\n  label: string;\r\n  index: number;\r\n  period: number;\r\n  session: 'morning' | 'afternoon' | 'lunch';\r\n  isLunch?: boolean;\r\n}\r\n\r\n// Time slots matching official college schedule\r\nexport const TIME_SLOTS: TimeSlot[] = [\r\n  { start: '09:15', end: '10:05', label: '9:15 - 10:05', index: 0, period: 1, session: 'morning' },\r\n  { start: '10:05', end: '10:55', label: '10:05 - 10:55', index: 1, period: 2, session: 'morning' },\r\n  { start: '11:05', end: '11:55', label: '11:05 - 11:55', index: 2, period: 3, session: 'morning' },\r\n  { start: '11:55', end: '12:45', label: '11:55 - 12:45', index: 3, period: 4, session: 'morning' },\r\n  { start: '12:45', end: '13:25', label: '12:45 - 1:25', index: 4, isLunch: true, period: 0, session: 'lunch' },\r\n  { start: '13:25', end: '14:15', label: '1:25 - 2:15', index: 5, period: 5, session: 'afternoon' },\r\n  { start: '14:15', end: '15:05', label: '2:15 - 3:05', index: 6, period: 6, session: 'afternoon' },\r\n  { start: '15:05', end: '15:55', label: '3:05 - 3:55', index: 7, period: 7, session: 'afternoon' },\r\n];\r\n\r\nexport const CLASS_SLOTS = TIME_SLOTS.filter(s => !s.isLunch);\r\nexport const MORNING_SLOTS = TIME_SLOTS.filter(s => s.session === 'morning');\r\nexport const AFTERNOON_SLOTS = TIME_SLOTS.filter(s => s.session === 'afternoon');\r\n\r\nexport const ROOMS = ['Room 101', 'Room 102', 'Room 103', 'Room 201', 'Room 202', 'Room 203'];\r\nexport const LABS = ['Lab 1', 'Lab 2', 'Lab 3', 'Lab 4'];\r\n\r\n// Light days for seminars, soft skills, mini projects\r\nexport const LIGHT_DAYS: DayOfWeek[] = ['Friday', 'Saturday'];\r\n\r\n// Core/heavy subjects should be scheduled in morning\r\nexport const CORE_SUBJECT_KEYWORDS = ['Data Structures', 'Algorithms', 'Database', 'Operating Systems', 'Computer Networks', 'Machine Learning', 'Artificial Intelligence'];\r\n\r\nexport interface ClassData {\r\n  id: string;\r\n  teacher_id: string;\r\n  section: string;\r\n  courses?: {\r\n    name?: string;\r\n    code?: string;\r\n    credits?: number;\r\n    department?: string;\r\n  };\r\n  profiles?: {\r\n    full_name?: string;\r\n  };\r\n}\r\n\r\nexport interface SelectedClass {\r\n  id: string;\r\n  isLab: boolean;\r\n  classesPerWeek: number;\r\n  classData: ClassData;\r\n}\r\n\r\nexport interface GeneratedSlot {\r\n  class_id: string;\r\n  teacher_id: string;\r\n  day_of_week: DayOfWeek;\r\n  start_time: string;\r\n  end_time: string;\r\n  room: string;\r\n  courseName: string;\r\n  courseCode: string;\r\n  section: string;\r\n  facultyName: string;\r\n  isLab: boolean;\r\n  slotIndices: number[];\r\n}\r\n\r\nexport interface FacultyWorkload {\r\n  teacherId: string;\r\n  teacherName: string;\r\n  periodsPerDay: Map<DayOfWeek, number>;\r\n  totalPeriods: number;\r\n  morningPeriods: number;\r\n  afternoonPeriods: number;\r\n  daySchedule: Map<DayOfWeek, GeneratedSlot[]>;\r\n}\r\n\r\nexport interface ScheduleConstraints {\r\n  maxTheoryPerFacultyPerDay: number;\r\n  maxContinuousTheory: number;\r\n  minFreePeriodPerFacultyPerDay: number;\r\n  maxPeriodsPerSubjectPerDay: number; // New: limit same subject per day\r\n  preferLabsInAfternoon: boolean;\r\n  avoidTheoryAroundLabs: boolean;\r\n  distributeWorkloadEvenly: boolean;\r\n  coreSubjectsInMorning: boolean;\r\n  lightSubjectsOnLightDays: boolean;\r\n}\r\n\r\nexport const DEFAULT_CONSTRAINTS: ScheduleConstraints = {\r\n  maxTheoryPerFacultyPerDay: 3,\r\n  maxContinuousTheory: 2,\r\n  minFreePeriodPerFacultyPerDay: 1,\r\n  maxPeriodsPerSubjectPerDay: 2, // Max 2 periods of same subject per day\r\n  preferLabsInAfternoon: true,\r\n  avoidTheoryAroundLabs: true,\r\n  distributeWorkloadEvenly: true,\r\n  coreSubjectsInMorning: true,\r\n  lightSubjectsOnLightDays: true,\r\n};\r\n\r\n// Track faculty schedules\r\nclass FacultyScheduleTracker {\r\n  private schedules: Map<string, Map<DayOfWeek, Set<number>>> = new Map();\r\n  private theoryCountPerDay: Map<string, Map<DayOfWeek, number>> = new Map();\r\n  private continuousTheoryCount: Map<string, Map<DayOfWeek, number[]>> = new Map();\r\n\r\n  constructor() {\r\n    // Initialize for each day\r\n  }\r\n\r\n  canAssign(\r\n    teacherId: string, \r\n    day: DayOfWeek, \r\n    slotIndices: number[], \r\n    isLab: boolean,\r\n    constraints: ScheduleConstraints\r\n  ): boolean {\r\n    // Check if slots are free for this faculty\r\n    const daySchedule = this.getDaySchedule(teacherId, day);\r\n    for (const idx of slotIndices) {\r\n      if (daySchedule.has(idx)) return false;\r\n    }\r\n\r\n    // For theory classes, check constraints\r\n    if (!isLab) {\r\n      const currentTheoryCount = this.getTheoryCount(teacherId, day);\r\n      if (currentTheoryCount >= constraints.maxTheoryPerFacultyPerDay) {\r\n        return false;\r\n      }\r\n\r\n      // Check continuous theory constraint\r\n      if (!this.canAddWithoutExceedingContinuous(teacherId, day, slotIndices[0], constraints.maxContinuousTheory)) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  private getDaySchedule(teacherId: string, day: DayOfWeek): Set<number> {\r\n    if (!this.schedules.has(teacherId)) {\r\n      this.schedules.set(teacherId, new Map());\r\n    }\r\n    const teacherSchedule = this.schedules.get(teacherId)!;\r\n    if (!teacherSchedule.has(day)) {\r\n      teacherSchedule.set(day, new Set());\r\n    }\r\n    return teacherSchedule.get(day)!;\r\n  }\r\n\r\n  private getTheoryCount(teacherId: string, day: DayOfWeek): number {\r\n    if (!this.theoryCountPerDay.has(teacherId)) {\r\n      this.theoryCountPerDay.set(teacherId, new Map());\r\n    }\r\n    return this.theoryCountPerDay.get(teacherId)!.get(day) || 0;\r\n  }\r\n\r\n  private canAddWithoutExceedingContinuous(\r\n    teacherId: string, \r\n    day: DayOfWeek, \r\n    slotIndex: number, \r\n    maxContinuous: number\r\n  ): boolean {\r\n    const daySchedule = this.getDaySchedule(teacherId, day);\r\n    \r\n    // Count continuous slots including this one\r\n    let count = 1;\r\n    \r\n    // Check before\r\n    let checkIdx = slotIndex - 1;\r\n    while (checkIdx >= 0 && daySchedule.has(checkIdx) && checkIdx !== 4) { // 4 is lunch\r\n      count++;\r\n      checkIdx--;\r\n    }\r\n    \r\n    // Check after\r\n    checkIdx = slotIndex + 1;\r\n    while (checkIdx < TIME_SLOTS.length && daySchedule.has(checkIdx) && checkIdx !== 4) {\r\n      count++;\r\n      checkIdx++;\r\n    }\r\n    \r\n    return count <= maxContinuous;\r\n  }\r\n\r\n  assignSlot(teacherId: string, day: DayOfWeek, slotIndices: number[], isLab: boolean): void {\r\n    const daySchedule = this.getDaySchedule(teacherId, day);\r\n    slotIndices.forEach(idx => daySchedule.add(idx));\r\n    \r\n    if (!isLab) {\r\n      if (!this.theoryCountPerDay.has(teacherId)) {\r\n        this.theoryCountPerDay.set(teacherId, new Map());\r\n      }\r\n      const current = this.theoryCountPerDay.get(teacherId)!.get(day) || 0;\r\n      this.theoryCountPerDay.get(teacherId)!.set(day, current + 1);\r\n    }\r\n  }\r\n\r\n  getFacultyPeriodsPerDay(teacherId: string, day: DayOfWeek): number {\r\n    return this.getDaySchedule(teacherId, day).size;\r\n  }\r\n\r\n  getFreePeriods(teacherId: string, day: DayOfWeek): number {\r\n    return CLASS_SLOTS.length - this.getFacultyPeriodsPerDay(teacherId, day);\r\n  }\r\n\r\n  getTotalPeriods(teacherId: string): number {\r\n    let total = 0;\r\n    if (this.schedules.has(teacherId)) {\r\n      this.schedules.get(teacherId)!.forEach((slots) => {\r\n        total += slots.size;\r\n      });\r\n    }\r\n    return total;\r\n  }\r\n\r\n  getDayWithLeastLoad(teacherId: string, excludeDays: DayOfWeek[] = []): DayOfWeek {\r\n    let minLoad = Infinity;\r\n    let bestDay: DayOfWeek = 'Monday';\r\n    \r\n    for (const day of DAYS) {\r\n      if (excludeDays.includes(day)) continue;\r\n      const load = this.getFacultyPeriodsPerDay(teacherId, day);\r\n      if (load < minLoad) {\r\n        minLoad = load;\r\n        bestDay = day;\r\n      }\r\n    }\r\n    \r\n    return bestDay;\r\n  }\r\n\r\n  hasMorningClass(teacherId: string, day: DayOfWeek): boolean {\r\n    const daySchedule = this.getDaySchedule(teacherId, day);\r\n    return MORNING_SLOTS.some(slot => daySchedule.has(slot.index));\r\n  }\r\n\r\n  hasAfternoonClass(teacherId: string, day: DayOfWeek): boolean {\r\n    const daySchedule = this.getDaySchedule(teacherId, day);\r\n    return AFTERNOON_SLOTS.some(slot => daySchedule.has(slot.index));\r\n  }\r\n}\r\n\r\n// Track room/lab usage\r\nclass RoomScheduleTracker {\r\n  private schedules: Map<string, Map<DayOfWeek, Set<number>>> = new Map();\r\n\r\n  isAvailable(room: string, day: DayOfWeek, slotIndices: number[]): boolean {\r\n    if (!this.schedules.has(room)) return true;\r\n    const roomSchedule = this.schedules.get(room)!;\r\n    if (!roomSchedule.has(day)) return true;\r\n    \r\n    const daySchedule = roomSchedule.get(day)!;\r\n    return !slotIndices.some(idx => daySchedule.has(idx));\r\n  }\r\n\r\n  assignSlot(room: string, day: DayOfWeek, slotIndices: number[]): void {\r\n    if (!this.schedules.has(room)) {\r\n      this.schedules.set(room, new Map());\r\n    }\r\n    const roomSchedule = this.schedules.get(room)!;\r\n    if (!roomSchedule.has(day)) {\r\n      roomSchedule.set(day, new Set());\r\n    }\r\n    slotIndices.forEach(idx => roomSchedule.get(day)!.add(idx));\r\n  }\r\n\r\n  getAvailableRoom(rooms: string[], day: DayOfWeek, slotIndices: number[]): string | null {\r\n    for (const room of rooms) {\r\n      if (this.isAvailable(room, day, slotIndices)) {\r\n        return room;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n}\r\n\r\n// Track subject (class) schedules per day - to enforce max periods per subject per day\r\nclass SubjectScheduleTracker {\r\n  private subjectPeriodsPerDay: Map<string, Map<DayOfWeek, number>> = new Map();\r\n\r\n  getPeriodsForSubject(classId: string, day: DayOfWeek): number {\r\n    if (!this.subjectPeriodsPerDay.has(classId)) return 0;\r\n    return this.subjectPeriodsPerDay.get(classId)!.get(day) || 0;\r\n  }\r\n\r\n  canAssign(classId: string, day: DayOfWeek, periodsToAdd: number, maxPerDay: number): boolean {\r\n    const current = this.getPeriodsForSubject(classId, day);\r\n    return (current + periodsToAdd) <= maxPerDay;\r\n  }\r\n\r\n  assignPeriods(classId: string, day: DayOfWeek, periods: number): void {\r\n    if (!this.subjectPeriodsPerDay.has(classId)) {\r\n      this.subjectPeriodsPerDay.set(classId, new Map());\r\n    }\r\n    const current = this.subjectPeriodsPerDay.get(classId)!.get(day) || 0;\r\n    this.subjectPeriodsPerDay.get(classId)!.set(day, current + periods);\r\n  }\r\n}\r\n\r\n// Main class slot tracker\r\nclass SlotTracker {\r\n  private usedSlots: Map<DayOfWeek, Set<number>> = new Map();\r\n\r\n  constructor() {\r\n    DAYS.forEach(day => {\r\n      const slots = new Set<number>();\r\n      // Mark lunch as always used\r\n      const lunchSlot = TIME_SLOTS.find(s => s.isLunch);\r\n      if (lunchSlot) slots.add(lunchSlot.index);\r\n      this.usedSlots.set(day, slots);\r\n    });\r\n  }\r\n\r\n  markExistingSchedule(existingTimetable: any[]): void {\r\n    existingTimetable?.forEach(entry => {\r\n      const day = entry.day_of_week as DayOfWeek;\r\n      const slots = this.usedSlots.get(day);\r\n      if (slots) {\r\n        const slotIndex = TIME_SLOTS.findIndex(s => s.start === entry.start_time.substring(0, 5));\r\n        if (slotIndex !== -1) {\r\n          slots.add(slotIndex);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  isAvailable(day: DayOfWeek, slotIndex: number): boolean {\r\n    return !this.usedSlots.get(day)?.has(slotIndex);\r\n  }\r\n\r\n  areAvailable(day: DayOfWeek, slotIndices: number[]): boolean {\r\n    return slotIndices.every(idx => this.isAvailable(day, idx));\r\n  }\r\n\r\n  markUsed(day: DayOfWeek, slotIndices: number[]): void {\r\n    slotIndices.forEach(idx => this.usedSlots.get(day)?.add(idx));\r\n  }\r\n\r\n  getAvailableSlots(day: DayOfWeek, session?: 'morning' | 'afternoon'): number[] {\r\n    const available: number[] = [];\r\n    const slots = session \r\n      ? TIME_SLOTS.filter(s => s.session === session)\r\n      : CLASS_SLOTS;\r\n    \r\n    for (const slot of slots) {\r\n      if (this.isAvailable(day, slot.index)) {\r\n        available.push(slot.index);\r\n      }\r\n    }\r\n    return available;\r\n  }\r\n\r\n  // Find consecutive available slots for labs\r\n  getConsecutiveSlots(day: DayOfWeek, count: number, preferAfternoon: boolean = true): number[][] {\r\n    const pairs: number[][] = [];\r\n    \r\n    // Afternoon pairs (preferred for labs)\r\n    if (preferAfternoon) {\r\n      const afternoonPairs = [[5, 6], [6, 7]];\r\n      for (const pair of afternoonPairs) {\r\n        if (this.areAvailable(day, pair)) {\r\n          pairs.push(pair);\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Morning pairs (not crossing lunch)\r\n    const morningPairs = [[0, 1], [1, 2], [2, 3]];\r\n    for (const pair of morningPairs) {\r\n      if (this.areAvailable(day, pair)) {\r\n        pairs.push(pair);\r\n      }\r\n    }\r\n    \r\n    // If afternoon not preferred, add them at the end\r\n    if (!preferAfternoon) {\r\n      const afternoonPairs = [[5, 6], [6, 7]];\r\n      for (const pair of afternoonPairs) {\r\n        if (this.areAvailable(day, pair) && !pairs.some(p => p[0] === pair[0])) {\r\n          pairs.push(pair);\r\n        }\r\n      }\r\n    }\r\n    \r\n    return pairs;\r\n  }\r\n}\r\n\r\n// Utility functions\r\nexport function getAbbreviation(name?: string): string {\r\n  if (!name) return '---';\r\n  const words = name.split(' ').filter(w => w.length > 2 && !['and', 'the', 'for', 'with'].includes(w.toLowerCase()));\r\n  if (words.length === 1) return words[0].substring(0, 3).toUpperCase();\r\n  return words.map(w => w[0]).join('').toUpperCase().substring(0, 4);\r\n}\r\n\r\nexport function isCoreSubject(courseName: string): boolean {\r\n  return CORE_SUBJECT_KEYWORDS.some(keyword => \r\n    courseName.toLowerCase().includes(keyword.toLowerCase())\r\n  );\r\n}\r\n\r\nexport function isLightSubject(courseName: string): boolean {\r\n  const lightKeywords = ['seminar', 'soft skills', 'mini project', 'project work', 'internship'];\r\n  return lightKeywords.some(keyword => \r\n    courseName.toLowerCase().includes(keyword.toLowerCase())\r\n  );\r\n}\r\n\r\n// Fisher-Yates shuffle\r\nfunction shuffle<T>(array: T[]): T[] {\r\n  const result = [...array];\r\n  for (let i = result.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1));\r\n    [result[i], result[j]] = [result[j], result[i]];\r\n  }\r\n  return result;\r\n}\r\n\r\n// Main scheduling function\r\nexport function generateOptimizedTimetable(\r\n  selectedClasses: SelectedClass[],\r\n  existingTimetable: any[] = [],\r\n  constraints: ScheduleConstraints = DEFAULT_CONSTRAINTS\r\n): { schedule: GeneratedSlot[]; facultyWorkloads: FacultyWorkload[]; justification: string[] } {\r\n  const schedule: GeneratedSlot[] = [];\r\n  const justification: string[] = [];\r\n  \r\n  const slotTracker = new SlotTracker();\r\n  const facultyTracker = new FacultyScheduleTracker();\r\n  const roomTracker = new RoomScheduleTracker();\r\n  const subjectTracker = new SubjectScheduleTracker(); // Track subject periods per day\r\n  \r\n  // Mark existing slots\r\n  slotTracker.markExistingSchedule(existingTimetable);\r\n  \r\n  // Separate labs and theory classes\r\n  const labs = selectedClasses.filter(c => c.isLab);\r\n  const theory = selectedClasses.filter(c => !c.isLab);\r\n  \r\n  // Further categorize theory\r\n  const coreTheory = theory.filter(c => isCoreSubject(c.classData.courses?.name || ''));\r\n  const lightTheory = theory.filter(c => isLightSubject(c.classData.courses?.name || ''));\r\n  const regularTheory = theory.filter(c => \r\n    !isCoreSubject(c.classData.courses?.name || '') && \r\n    !isLightSubject(c.classData.courses?.name || '')\r\n  );\r\n\r\n  justification.push(` Identified ${coreTheory.length} core subjects for morning priority`);\r\n  justification.push(` Identified ${lightTheory.length} light subjects for Friday/Saturday preference`);\r\n  justification.push(` Scheduling ${labs.length} lab sessions in afternoon slots`);\r\n\r\n  // 1. Schedule labs first (they need consecutive slots)\r\n  for (const lab of labs) {\r\n    const teacherId = lab.classData.teacher_id;\r\n    const courseName = `${lab.classData.courses?.name || 'Unknown'} LAB`;\r\n    const courseCode = `${lab.classData.courses?.code || '---'}-LAB`;\r\n    const facultyName = lab.classData.profiles?.full_name || 'TBA';\r\n    let assignedCount = 0;\r\n    \r\n    // Shuffle days for fair distribution\r\n    const shuffledDays = shuffle([...DAYS]);\r\n    \r\n    for (const day of shuffledDays) {\r\n      if (assignedCount >= lab.classesPerWeek) break;\r\n      \r\n      // Get consecutive slots (prefer afternoon)\r\n      const consecutivePairs = slotTracker.getConsecutiveSlots(day, 2, constraints.preferLabsInAfternoon);\r\n      \r\n      for (const pair of consecutivePairs) {\r\n        if (assignedCount >= lab.classesPerWeek) break;\r\n        \r\n        // Check faculty availability\r\n        if (!facultyTracker.canAssign(teacherId, day, pair, true, constraints)) continue;\r\n        \r\n        // Check subject-per-day constraint (labs count as 2 periods)\r\n        if (!subjectTracker.canAssign(lab.id, day, 2, constraints.maxPeriodsPerSubjectPerDay)) continue;\r\n        \r\n        // Find available lab room\r\n        const room = roomTracker.getAvailableRoom(LABS, day, pair);\r\n        if (!room) continue;\r\n        \r\n        // Assign the lab\r\n        slotTracker.markUsed(day, pair);\r\n        facultyTracker.assignSlot(teacherId, day, pair, true);\r\n        roomTracker.assignSlot(room, day, pair);\r\n        subjectTracker.assignPeriods(lab.id, day, 2); // Track lab periods\r\n        \r\n        schedule.push({\r\n          class_id: lab.id,\r\n          teacher_id: teacherId,\r\n          day_of_week: day,\r\n          start_time: TIME_SLOTS[pair[0]].start,\r\n          end_time: TIME_SLOTS[pair[1]].end,\r\n          room,\r\n          courseName,\r\n          courseCode,\r\n          section: lab.classData.section,\r\n          facultyName,\r\n          isLab: true,\r\n          slotIndices: pair,\r\n        });\r\n        \r\n        assignedCount++;\r\n        break;\r\n      }\r\n    }\r\n    \r\n    if (assignedCount < lab.classesPerWeek) {\r\n      justification.push(` Could only assign ${assignedCount}/${lab.classesPerWeek} sessions for ${courseName}`);\r\n    }\r\n  }\r\n\r\n  justification.push(` Labs scheduled in ${constraints.preferLabsInAfternoon ? 'afternoon' : 'available'} slots with 2 consecutive periods`);\r\n\r\n  // Helper to schedule a theory class\r\n  const scheduleTheoryClass = (\r\n    classItem: SelectedClass, \r\n    preferredDays: DayOfWeek[], \r\n    preferMorning: boolean\r\n  ) => {\r\n    const teacherId = classItem.classData.teacher_id;\r\n    const courseName = classItem.classData.courses?.name || 'Unknown';\r\n    const courseCode = classItem.classData.courses?.code || '---';\r\n    const facultyName = classItem.classData.profiles?.full_name || 'TBA';\r\n    let assignedCount = 0;\r\n    \r\n    // Days ordered by preference, then shuffled within preference groups\r\n    const orderedDays = preferredDays.length > 0 \r\n      ? [...preferredDays, ...DAYS.filter(d => !preferredDays.includes(d))]\r\n      : shuffle([...DAYS]);\r\n    \r\n    // For even distribution, sort by faculty's current load\r\n    const daysByLoad = orderedDays.sort((a, b) => {\r\n      if (constraints.distributeWorkloadEvenly) {\r\n        return facultyTracker.getFacultyPeriodsPerDay(teacherId, a) - \r\n               facultyTracker.getFacultyPeriodsPerDay(teacherId, b);\r\n      }\r\n      return 0;\r\n    });\r\n    \r\n    for (const day of daysByLoad) {\r\n      if (assignedCount >= classItem.classesPerWeek) break;\r\n      \r\n      // Check faculty constraints\r\n      if (facultyTracker.getFreePeriods(teacherId, day) < constraints.minFreePeriodPerFacultyPerDay + 1) {\r\n        continue; // Need at least one free period after this assignment\r\n      }\r\n      \r\n      // Check subject-per-day constraint before trying this day\r\n      if (!subjectTracker.canAssign(classItem.id, day, 1, constraints.maxPeriodsPerSubjectPerDay)) {\r\n        continue; // Already at max periods for this subject today\r\n      }\r\n      \r\n      // Get available slots (prefer morning for core subjects)\r\n      let availableSlots: number[];\r\n      if (preferMorning && constraints.coreSubjectsInMorning) {\r\n        availableSlots = [\r\n          ...slotTracker.getAvailableSlots(day, 'morning'),\r\n          ...slotTracker.getAvailableSlots(day, 'afternoon'),\r\n        ];\r\n      } else {\r\n        availableSlots = slotTracker.getAvailableSlots(day);\r\n      }\r\n      \r\n      // Avoid slots adjacent to labs if constraint is set\r\n      if (constraints.avoidTheoryAroundLabs) {\r\n        const labSlots = schedule\r\n          .filter(s => s.isLab && s.day_of_week === day && s.teacher_id === teacherId)\r\n          .flatMap(s => s.slotIndices);\r\n        \r\n        availableSlots = availableSlots.filter(idx => {\r\n          const isAdjacentToLab = labSlots.some(labIdx => \r\n            Math.abs(idx - labIdx) === 1 || idx === labIdx\r\n          );\r\n          return !isAdjacentToLab;\r\n        });\r\n      }\r\n      \r\n      for (const slotIdx of availableSlots) {\r\n        if (assignedCount >= classItem.classesPerWeek) break;\r\n        \r\n        // Re-check subject constraint (in case we already assigned one this day in this loop)\r\n        if (!subjectTracker.canAssign(classItem.id, day, 1, constraints.maxPeriodsPerSubjectPerDay)) break;\r\n        \r\n        // Check faculty can take this slot\r\n        if (!facultyTracker.canAssign(teacherId, day, [slotIdx], false, constraints)) continue;\r\n        \r\n        // Find available room\r\n        const room = roomTracker.getAvailableRoom(ROOMS, day, [slotIdx]);\r\n        if (!room) continue;\r\n        \r\n        // Assign\r\n        slotTracker.markUsed(day, [slotIdx]);\r\n        facultyTracker.assignSlot(teacherId, day, [slotIdx], false);\r\n        roomTracker.assignSlot(room, day, [slotIdx]);\r\n        subjectTracker.assignPeriods(classItem.id, day, 1); // Track subject period\r\n        \r\n        schedule.push({\r\n          class_id: classItem.id,\r\n          teacher_id: teacherId,\r\n          day_of_week: day,\r\n          start_time: TIME_SLOTS[slotIdx].start,\r\n          end_time: TIME_SLOTS[slotIdx].end,\r\n          room,\r\n          courseName,\r\n          courseCode,\r\n          section: classItem.classData.section,\r\n          facultyName,\r\n          isLab: false,\r\n          slotIndices: [slotIdx],\r\n        });\r\n        \r\n        assignedCount++;\r\n      }\r\n    }\r\n    \r\n    return assignedCount >= classItem.classesPerWeek;\r\n  };\r\n\r\n  // 2. Schedule core subjects (prefer morning)\r\n  for (const classItem of coreTheory) {\r\n    const success = scheduleTheoryClass(classItem, [], true);\r\n    if (!success) {\r\n      justification.push(` Could not fully schedule ${classItem.classData.courses?.name}`);\r\n    }\r\n  }\r\n  justification.push(` Core subjects prioritized for morning sessions`);\r\n\r\n  // 3. Schedule light subjects (prefer Friday/Saturday)\r\n  for (const classItem of lightTheory) {\r\n    const success = scheduleTheoryClass(classItem, constraints.lightSubjectsOnLightDays ? LIGHT_DAYS : [], false);\r\n    if (!success) {\r\n      justification.push(` Could not fully schedule ${classItem.classData.courses?.name}`);\r\n    }\r\n  }\r\n  if (lightTheory.length > 0) {\r\n    justification.push(` Light subjects (seminar, soft skills) placed on Friday/Saturday`);\r\n  }\r\n\r\n  // 4. Schedule regular theory\r\n  for (const classItem of regularTheory) {\r\n    scheduleTheoryClass(classItem, [], false);\r\n  }\r\n\r\n  // Build faculty workloads\r\n  const facultyMap = new Map<string, FacultyWorkload>();\r\n  \r\n  for (const slot of schedule) {\r\n    if (!facultyMap.has(slot.teacher_id)) {\r\n      facultyMap.set(slot.teacher_id, {\r\n        teacherId: slot.teacher_id,\r\n        teacherName: slot.facultyName,\r\n        periodsPerDay: new Map(),\r\n        totalPeriods: 0,\r\n        morningPeriods: 0,\r\n        afternoonPeriods: 0,\r\n        daySchedule: new Map(),\r\n      });\r\n    }\r\n    \r\n    const workload = facultyMap.get(slot.teacher_id)!;\r\n    const periodCount = slot.slotIndices.length;\r\n    \r\n    // Update periods per day\r\n    const currentDayPeriods = workload.periodsPerDay.get(slot.day_of_week) || 0;\r\n    workload.periodsPerDay.set(slot.day_of_week, currentDayPeriods + periodCount);\r\n    \r\n    // Update totals\r\n    workload.totalPeriods += periodCount;\r\n    \r\n    // Morning vs afternoon\r\n    const isMorning = slot.slotIndices.some(idx => idx <= 3);\r\n    if (isMorning) {\r\n      workload.morningPeriods += periodCount;\r\n    } else {\r\n      workload.afternoonPeriods += periodCount;\r\n    }\r\n    \r\n    // Add to day schedule\r\n    if (!workload.daySchedule.has(slot.day_of_week)) {\r\n      workload.daySchedule.set(slot.day_of_week, []);\r\n    }\r\n    workload.daySchedule.get(slot.day_of_week)!.push(slot);\r\n  }\r\n\r\n  // Add workload justification\r\n  facultyMap.forEach((workload, _) => {\r\n    const maxPeriodsAnyDay = Math.max(...Array.from(workload.periodsPerDay.values()), 0);\r\n    if (maxPeriodsAnyDay <= constraints.maxTheoryPerFacultyPerDay + 2) { // +2 for labs\r\n      justification.push(` ${workload.teacherName}: Max ${maxPeriodsAnyDay} periods/day, balanced across week`);\r\n    }\r\n  });\r\n\r\n  justification.push(` Faculty constraints: Max ${constraints.maxTheoryPerFacultyPerDay} theory/day, ${constraints.maxContinuousTheory} continuous`);\r\n  justification.push(` Subject constraint: Max ${constraints.maxPeriodsPerSubjectPerDay} periods of same subject per day`);\r\n  justification.push(` Generated ${schedule.length} total time slots`);\r\n\r\n  return {\r\n    schedule,\r\n    facultyWorkloads: Array.from(facultyMap.values()),\r\n    justification,\r\n  };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\AcademicCalendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\Announcements.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":210,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":210,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9721,9724],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9721,9724],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport DashboardLayout from '@/components/layout/DashboardLayout';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { useAnnouncements, useCreateAnnouncement } from '@/hooks/useEnhancedLMS';\r\nimport { useAuth } from '@/hooks/useAuth';\r\nimport { Megaphone, Plus, Pin, Clock, User } from 'lucide-react';\r\nimport { format, formatDistanceToNow } from 'date-fns';\r\n\r\nconst PRIORITIES = [\r\n  { value: 'low', label: 'Low', color: 'secondary' },\r\n  { value: 'normal', label: 'Normal', color: 'default' },\r\n  { value: 'high', label: 'High', color: 'warning' },\r\n  { value: 'urgent', label: 'Urgent', color: 'destructive' },\r\n];\r\n\r\nconst TARGET_AUDIENCES = [\r\n  { value: 'all', label: 'Everyone' },\r\n  { value: 'students', label: 'Students Only' },\r\n  { value: 'teachers', label: 'Faculty Only' },\r\n  { value: 'department', label: 'Specific Department' },\r\n];\r\n\r\nexport default function Announcements() {\r\n  const { user, userRole } = useAuth();\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  \r\n  const { data: announcements, isLoading } = useAnnouncements();\r\n  const createAnnouncement = useCreateAnnouncement();\r\n\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    content: '',\r\n    priority: 'normal',\r\n    target_audience: 'all',\r\n    target_department: '',\r\n    target_semester: '',\r\n    is_pinned: false,\r\n    expires_at: '',\r\n  });\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    await createAnnouncement.mutateAsync({\r\n      ...formData,\r\n      created_by: user?.id || '',\r\n      attachment_url: null,\r\n      target_department: formData.target_department || null,\r\n      target_semester: formData.target_semester || null,\r\n      expires_at: formData.expires_at || null,\r\n    });\r\n    setDialogOpen(false);\r\n    setFormData({\r\n      title: '',\r\n      content: '',\r\n      priority: 'normal',\r\n      target_audience: 'all',\r\n      target_department: '',\r\n      target_semester: '',\r\n      is_pinned: false,\r\n      expires_at: '',\r\n    });\r\n  };\r\n\r\n  const getPriorityConfig = (priority: string) => PRIORITIES.find(p => p.value === priority);\r\n\r\n  const canCreateAnnouncement = userRole === 'admin' || userRole === 'teacher';\r\n\r\n  return (\r\n    <DashboardLayout>\r\n      <div className=\"space-y-6\">\r\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold tracking-tight\">Announcements</h1>\r\n            <p className=\"text-muted-foreground\">Important updates and notices</p>\r\n          </div>\r\n          \r\n          {canCreateAnnouncement && (\r\n            <Dialog open={dialogOpen} onOpenChange={setDialogOpen}>\r\n              <DialogTrigger asChild>\r\n                <Button>\r\n                  <Plus className=\"mr-2 h-4 w-4\" /> New Announcement\r\n                </Button>\r\n              </DialogTrigger>\r\n              <DialogContent className=\"sm:max-w-[600px]\">\r\n                <DialogHeader>\r\n                  <DialogTitle>Create Announcement</DialogTitle>\r\n                  <DialogDescription>Publish a new announcement to users</DialogDescription>\r\n                </DialogHeader>\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label>Title</Label>\r\n                    <Input \r\n                      value={formData.title} \r\n                      onChange={(e) => setFormData({ ...formData, title: e.target.value })} \r\n                      placeholder=\"Enter announcement title\"\r\n                      required \r\n                    />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label>Content</Label>\r\n                    <Textarea \r\n                      value={formData.content} \r\n                      onChange={(e) => setFormData({ ...formData, content: e.target.value })}\r\n                      placeholder=\"Write your announcement...\"\r\n                      rows={5}\r\n                      required\r\n                    />\r\n                  </div>\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div className=\"space-y-2\">\r\n                      <Label>Priority</Label>\r\n                      <Select value={formData.priority} onValueChange={(v) => setFormData({ ...formData, priority: v })}>\r\n                        <SelectTrigger><SelectValue /></SelectTrigger>\r\n                        <SelectContent>\r\n                          {PRIORITIES.map(p => (\r\n                            <SelectItem key={p.value} value={p.value}>{p.label}</SelectItem>\r\n                          ))}\r\n                        </SelectContent>\r\n                      </Select>\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>Target Audience</Label>\r\n                      <Select value={formData.target_audience} onValueChange={(v) => setFormData({ ...formData, target_audience: v })}>\r\n                        <SelectTrigger><SelectValue /></SelectTrigger>\r\n                        <SelectContent>\r\n                          {TARGET_AUDIENCES.map(a => (\r\n                            <SelectItem key={a.value} value={a.value}>{a.label}</SelectItem>\r\n                          ))}\r\n                        </SelectContent>\r\n                      </Select>\r\n                    </div>\r\n                    {formData.target_audience === 'department' && (\r\n                      <div className=\"space-y-2\">\r\n                        <Label>Department</Label>\r\n                        <Input \r\n                          value={formData.target_department} \r\n                          onChange={(e) => setFormData({ ...formData, target_department: e.target.value })}\r\n                          placeholder=\"e.g., CSE\"\r\n                        />\r\n                      </div>\r\n                    )}\r\n                    <div className=\"space-y-2\">\r\n                      <Label>Expires At (optional)</Label>\r\n                      <Input \r\n                        type=\"datetime-local\" \r\n                        value={formData.expires_at} \r\n                        onChange={(e) => setFormData({ ...formData, expires_at: e.target.value })}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Switch \r\n                      checked={formData.is_pinned} \r\n                      onCheckedChange={(v) => setFormData({ ...formData, is_pinned: v })} \r\n                    />\r\n                    <Label>Pin this announcement</Label>\r\n                  </div>\r\n                  <div className=\"flex justify-end gap-2\">\r\n                    <Button type=\"button\" variant=\"outline\" onClick={() => setDialogOpen(false)}>Cancel</Button>\r\n                    <Button type=\"submit\" disabled={createAnnouncement.isPending}>\r\n                      {createAnnouncement.isPending ? 'Publishing...' : 'Publish Announcement'}\r\n                    </Button>\r\n                  </div>\r\n                </form>\r\n              </DialogContent>\r\n            </Dialog>\r\n          )}\r\n        </div>\r\n\r\n        {isLoading ? (\r\n          <div className=\"flex justify-center py-12\">\r\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\" />\r\n          </div>\r\n        ) : announcements && announcements.length > 0 ? (\r\n          <div className=\"space-y-4\">\r\n            {announcements.map(announcement => {\r\n              const priorityConfig = getPriorityConfig(announcement.priority);\r\n              return (\r\n                <Card key={announcement.id} className={`${announcement.is_pinned ? 'border-primary/50 bg-primary/5' : ''}`}>\r\n                  <CardHeader>\r\n                    <div className=\"flex items-start justify-between gap-4\">\r\n                      <div className=\"flex items-start gap-3\">\r\n                        {announcement.is_pinned && (\r\n                          <Pin className=\"h-5 w-5 text-primary mt-1\" />\r\n                        )}\r\n                        <div>\r\n                          <CardTitle className=\"text-xl\">{announcement.title}</CardTitle>\r\n                          <CardDescription className=\"flex flex-wrap items-center gap-2 mt-1\">\r\n                            <span className=\"flex items-center gap-1\">\r\n                              <User className=\"h-3 w-3\" />\r\n                              {announcement.profiles?.full_name || 'Admin'}\r\n                            </span>\r\n                            <span></span>\r\n                            <span className=\"flex items-center gap-1\">\r\n                              <Clock className=\"h-3 w-3\" />\r\n                              {formatDistanceToNow(new Date(announcement.created_at), { addSuffix: true })}\r\n                            </span>\r\n                          </CardDescription>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex gap-2\">\r\n                        <Badge variant={priorityConfig?.color as any || 'secondary'}>\r\n                          {priorityConfig?.label || announcement.priority}\r\n                        </Badge>\r\n                        <Badge variant=\"outline\">\r\n                          {TARGET_AUDIENCES.find(a => a.value === announcement.target_audience)?.label || announcement.target_audience}\r\n                        </Badge>\r\n                      </div>\r\n                    </div>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <p className=\"whitespace-pre-wrap text-muted-foreground\">{announcement.content}</p>\r\n                    {announcement.expires_at && (\r\n                      <p className=\"text-sm text-muted-foreground mt-4\">\r\n                        Expires: {format(new Date(announcement.expires_at), 'PPP p')}\r\n                      </p>\r\n                    )}\r\n                  </CardContent>\r\n                </Card>\r\n              );\r\n            })}\r\n          </div>\r\n        ) : (\r\n          <Card>\r\n            <CardContent className=\"flex flex-col items-center justify-center py-12\">\r\n              <Megaphone className=\"h-12 w-12 text-muted-foreground mb-4\" />\r\n              <h3 className=\"text-lg font-semibold\">No announcements</h3>\r\n              <p className=\"text-muted-foreground\">Check back later for updates</p>\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\Assignments.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\Attendance.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\Auth.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\CGPACalculator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\Dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":81,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3552,3555],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3552,3555],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":105,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":105,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4335,4338],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4335,4338],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":116,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4720,4723],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4720,4723],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":117,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4783,4786],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4783,4786],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useAuth } from '@/hooks/useAuth';\r\nimport { useAttendance, useAssignments, useSubmissions, useNotifications, useFees, useTimetable, useMaterials, useCourses, useProfiles } from '@/hooks/useLMS';\r\nimport DashboardLayout from '@/components/layout/DashboardLayout';\r\nimport WelcomeCard from '@/components/dashboard/WelcomeCard';\r\nimport StatsGrid from '@/components/dashboard/StatsGrid';\r\nimport AttendanceChart from '@/components/dashboard/AttendanceChart';\r\nimport GradesChart from '@/components/dashboard/GradesChart';\r\nimport UpcomingSchedule from '@/components/dashboard/UpcomingSchedule';\r\nimport QuickActions from '@/components/dashboard/QuickActions';\r\nimport AssignmentsList from '@/components/dashboard/AssignmentsList';\r\nimport DatabaseSeeder from '@/components/dashboard/DatabaseSeeder';\r\nimport LoadingSkeleton from '@/components/ui/loading-skeleton';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport {\r\n  Users,\r\n  BookOpen,\r\n  ClipboardList,\r\n  CheckSquare,\r\n  BarChart3,\r\n  Calendar,\r\n  Bell,\r\n  FileText,\r\n  Clock,\r\n  TrendingUp,\r\n  GraduationCap,\r\n  Upload,\r\n  Loader2,\r\n  MessageSquare,\r\n  DollarSign,\r\n  Activity,\r\n} from 'lucide-react';\r\nimport { Link } from 'react-router-dom';\r\nimport CreatePeriodDialog from '@/components/classes/CreatePeriodDialog';\r\nimport { useState } from 'react';\r\n\r\n\r\nfunction StudentDashboard() {\r\n  const { user } = useAuth();\r\n  const { data: profiles } = useProfiles();\r\n  const { data: attendance, isLoading: attendanceLoading } = useAttendance(user?.id);\r\n  const { data: assignments, isLoading: assignmentsLoading } = useAssignments();\r\n  const { data: submissions } = useSubmissions(user?.id);\r\n  const { data: notifications } = useNotifications(user?.id);\r\n  const { data: fees } = useFees(user?.id);\r\n  const { data: timetable } = useTimetable(user?.id);\r\n\r\n  // Get current user profile\r\n  const currentProfile = profiles?.find(p => p.id === user?.id);\r\n\r\n  // Calculate attendance stats\r\n  const totalClasses = attendance?.length || 0;\r\n  const presentClasses = attendance?.filter(a => a.status === 'present').length || 0;\r\n  const absentClasses = attendance?.filter(a => a.status === 'absent').length || 0;\r\n  const lateClasses = attendance?.filter(a => a.status === 'late').length || 0;\r\n  const attendancePercentage = totalClasses > 0 ? Math.round((presentClasses / totalClasses) * 100) : 0;\r\n\r\n  // Get pending assignments\r\n  const pendingAssignments = assignments?.filter(a => {\r\n    const submission = submissions?.find(s => s.assignment_id === a.id);\r\n    return !submission && new Date(a.due_date) > new Date();\r\n  }) || [];\r\n\r\n  // Get unread notifications\r\n  const unreadNotifications = notifications?.filter(n => !n.read).length || 0;\r\n\r\n  // Calculate fee status\r\n  const totalFees = fees?.reduce((sum, f) => sum + Number(f.amount), 0) || 0;\r\n  const paidFees = fees?.filter(f => f.status === 'paid').reduce((sum, f) => sum + Number(f.amount), 0) || 0;\r\n  const pendingFees = totalFees - paidFees;\r\n\r\n  // Get today's schedule\r\n  const today = new Date().toLocaleDateString('en-US', { weekday: 'long' });\r\n  const todaySchedule = timetable?.filter(t => t.day_of_week === today) || [];\r\n\r\n  // Calculate grades data from submissions\r\n  const gradesData = submissions?.filter(s => s.marks !== null).map(s => {\r\n    const assignment = assignments?.find(a => a.id === s.assignment_id);\r\n    return {\r\n      subject: (assignment?.classes as any)?.courses?.name?.substring(0, 15) || 'Subject',\r\n      marks: s.marks || 0,\r\n      maxMarks: assignment?.max_marks || 100,\r\n    };\r\n  }).slice(0, 5) || [];\r\n\r\n  if (attendanceLoading || assignmentsLoading) {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <LoadingSkeleton variant=\"card\" count={1} />\r\n        <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-4\">\r\n          <LoadingSkeleton variant=\"card\" count={4} />\r\n        </div>\r\n        <div className=\"grid gap-6 lg:grid-cols-2\">\r\n          <LoadingSkeleton variant=\"card\" count={2} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Format assignments for the list component\r\n  const formattedAssignments = pendingAssignments.map(a => ({\r\n    id: a.id,\r\n    title: a.title,\r\n    course: (a.classes as any)?.courses?.name || 'Course',\r\n    dueDate: a.due_date,\r\n    maxMarks: a.max_marks,\r\n    status: 'pending' as const,\r\n  }));\r\n\r\n  // Format schedule for the component\r\n  const scheduleItems = todaySchedule.map((item, index) => ({\r\n    id: String(index),\r\n    time: item.start_time?.substring(0, 5) || '',\r\n    endTime: item.end_time?.substring(0, 5),\r\n    subject: (item.classes as any)?.courses?.name || 'Class',\r\n    teacher: (item.classes as any)?.profiles?.full_name,\r\n    room: item.room || 'TBA',\r\n    status: 'upcoming' as const,\r\n  }));\r\n\r\n  return (\r\n    <div className=\"space-y-6 stagger-fade-in\">\r\n      {/* Welcome Card */}\r\n      <WelcomeCard\r\n        userName={currentProfile?.full_name || user?.email?.split('@')[0] || 'Student'}\r\n        role=\"student\"\r\n        rollNumber={currentProfile?.roll_number || undefined}\r\n        department={currentProfile?.department || undefined}\r\n        avatarUrl={currentProfile?.avatar_url}\r\n      />\r\n\r\n      {/* Stats Grid */}\r\n      <StatsGrid stats={[\r\n        {\r\n          title: 'Attendance',\r\n          value: `${attendancePercentage}%`,\r\n          icon: <CheckSquare className=\"h-6 w-6\" />,\r\n          variant: attendancePercentage >= 75 ? 'success' : 'warning',\r\n          description: `${presentClasses}/${totalClasses} classes`,\r\n        },\r\n        {\r\n          title: 'Assignments Due',\r\n          value: pendingAssignments.length,\r\n          icon: <ClipboardList className=\"h-6 w-6\" />,\r\n          variant: pendingAssignments.length > 0 ? 'warning' : 'success',\r\n          description: pendingAssignments.length > 0 ? 'Pending submission' : 'All submitted',\r\n        },\r\n        {\r\n          title: 'Notifications',\r\n          value: unreadNotifications,\r\n          icon: <Bell className=\"h-6 w-6\" />,\r\n          variant: 'info',\r\n          description: 'Unread messages',\r\n        },\r\n        {\r\n          title: 'Fee Pending',\r\n          value: pendingFees > 0 ? `${pendingFees.toLocaleString()}` : '0',\r\n          icon: <DollarSign className=\"h-6 w-6\" />,\r\n          variant: pendingFees > 0 ? 'destructive' : 'success',\r\n          description: pendingFees > 0 ? 'Due soon' : 'All paid',\r\n        },\r\n      ]} />\r\n\r\n      {/* Charts Row */}\r\n      <div className=\"grid gap-6 lg:grid-cols-2\">\r\n        <AttendanceChart\r\n          present={presentClasses}\r\n          absent={absentClasses}\r\n          late={lateClasses}\r\n        />\r\n        <GradesChart data={gradesData} />\r\n      </div>\r\n\r\n      {/* Schedule and Assignments */}\r\n      <div className=\"grid gap-6 lg:grid-cols-3\">\r\n        <div className=\"lg:col-span-2\">\r\n          <UpcomingSchedule\r\n            title=\"Today's Schedule\"\r\n            date={today}\r\n            items={scheduleItems}\r\n          />\r\n        </div>\r\n        <QuickActions\r\n          columns={2}\r\n          actions={[\r\n            { label: 'Assignments', icon: ClipboardList, href: '/assignments', variant: 'default' },\r\n            { label: 'Attendance', icon: CheckSquare, href: '/attendance', variant: 'default' },\r\n            { label: 'Study Materials', icon: FileText, href: '/notes', variant: 'default' },\r\n            { label: 'AI Assistant', icon: GraduationCap, href: '/query-bot', variant: 'accent' },\r\n          ]}\r\n        />\r\n      </div>\r\n\r\n      {/* Pending Assignments */}\r\n      <AssignmentsList assignments={formattedAssignments} />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction TeacherDashboard() {\r\n  const { user } = useAuth();\r\n  const { data: assignments, isLoading } = useAssignments();\r\n  const { data: materials } = useMaterials();\r\n  const { data: timetable } = useTimetable();\r\n  const [createClassOpen, setCreateClassOpen] = useState(false);\r\n\r\n\r\n  // Get today's classes count\r\n  const today = new Date().toLocaleDateString('en-US', { weekday: 'long' });\r\n  const todayClasses = timetable?.filter(t => t.day_of_week === today).length || 0;\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[60vh]\">\r\n        <div className=\"text-center space-y-4\">\r\n          <Loader2 className=\"h-12 w-12 animate-spin text-primary mx-auto\" />\r\n          <p className=\"text-muted-foreground\">Loading your dashboard...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6 stagger-fade-in\">\r\n      {/* Welcome Card */}\r\n      <WelcomeCard\r\n        userName={user?.user_metadata?.full_name || user?.email?.split('@')[0] || 'Faculty'}\r\n        role=\"teacher\"\r\n      />\r\n\r\n\r\n\r\n\r\n\r\n      {/* Stats Grid */}\r\n      <StatsGrid stats={[\r\n        {\r\n          title: 'Active Assignments',\r\n          value: assignments?.length || 0,\r\n          icon: <ClipboardList className=\"h-6 w-6\" />,\r\n          variant: 'primary',\r\n        },\r\n        {\r\n          title: 'Materials Uploaded',\r\n          value: materials?.length || 0,\r\n          icon: <FileText className=\"h-6 w-6\" />,\r\n          variant: 'info',\r\n        },\r\n        {\r\n          title: 'Classes Today',\r\n          value: todayClasses,\r\n          icon: <Calendar className=\"h-6 w-6\" />,\r\n          variant: 'success',\r\n        },\r\n        {\r\n          title: 'Pending Grading',\r\n          value: 0,\r\n          icon: <BarChart3 className=\"h-6 w-6\" />,\r\n          variant: 'warning',\r\n        },\r\n      ]} />\r\n\r\n      {/* Quick Actions and Recent Assignments */}\r\n      <div className=\"grid gap-6 lg:grid-cols-2\">\r\n        <QuickActions\r\n          columns={2}\r\n          actions={[\r\n            { label: 'Take Attendance', icon: CheckSquare, href: '/attendance', variant: 'primary' },\r\n            { label: 'Upload Notes', icon: Upload, href: '/upload', variant: 'default' },\r\n            { label: 'Assignments', icon: ClipboardList, href: '/assignments', variant: 'default' },\r\n            { label: 'Grade Work', icon: BarChart3, href: '/grades', variant: 'default' },\r\n            { label: 'View Timetable', icon: Calendar, href: '/timetable', variant: 'default' },\r\n            { label: 'AI Assistant', icon: GraduationCap, href: '/query-bot', variant: 'accent' },\r\n          ]}\r\n        />\r\n\r\n        <Card className=\"shadow-lg border-0 bg-gradient-to-br from-card to-muted/30\">\r\n          <CardHeader className=\"pb-3\">\r\n            <CardTitle className=\"font-display text-lg flex items-center gap-2\">\r\n              <div className=\"p-2 rounded-lg bg-primary/10\">\r\n                <ClipboardList className=\"h-5 w-5 text-primary\" />\r\n              </div>\r\n              Recent Assignments\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {assignments?.length === 0 ? (\r\n              <div className=\"py-8 text-center text-muted-foreground\">\r\n                <ClipboardList className=\"h-12 w-12 mx-auto mb-3 opacity-30\" />\r\n                <p>No assignments created yet</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-3\">\r\n                {assignments?.slice(0, 4).map((assignment) => (\r\n                  <div key={assignment.id} className=\"p-4 rounded-xl border hover:shadow-md transition-all\">\r\n                    <div className=\"flex items-start justify-between\">\r\n                      <div>\r\n                        <h4 className=\"font-semibold text-sm\">{assignment.title}</h4>\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                          Due: {new Date(assignment.due_date).toLocaleDateString()}\r\n                        </p>\r\n                      </div>\r\n                      <Badge variant=\"secondary\">{assignment.max_marks} marks</Badge>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction AdminDashboard() {\r\n  const { user } = useAuth();\r\n  const { data: notifications } = useNotifications();\r\n  const { data: profiles } = useProfiles();\r\n  const { data: courses } = useCourses();\r\n  const { data: fees } = useFees();\r\n\r\n  // Calculate user counts\r\n  const totalUsers = profiles?.length || 0;\r\n  const studentCount = profiles?.filter(p => p.role === 'student').length || 0;\r\n  const teacherCount = profiles?.filter(p => p.role === 'teacher').length || 0;\r\n\r\n  // Calculate fee collection\r\n  const totalCollected = fees?.filter(f => f.status === 'paid').reduce((sum, f) => sum + Number(f.amount), 0) || 0;\r\n\r\n  return (\r\n    <div className=\"space-y-6 stagger-fade-in\">\r\n      {/* Welcome Card */}\r\n      <WelcomeCard\r\n        userName={user?.user_metadata?.full_name || user?.email?.split('@')[0] || 'Admin'}\r\n        role=\"admin\"\r\n      />\r\n\r\n      {/* Stats Grid */}\r\n      <StatsGrid stats={[\r\n        {\r\n          title: 'Total Users',\r\n          value: totalUsers,\r\n          icon: <Users className=\"h-6 w-6\" />,\r\n          variant: 'primary',\r\n        },\r\n        {\r\n          title: 'Active Courses',\r\n          value: courses?.length || 0,\r\n          icon: <BookOpen className=\"h-6 w-6\" />,\r\n          variant: 'success',\r\n        },\r\n        {\r\n          title: 'Notifications Sent',\r\n          value: notifications?.length || 0,\r\n          icon: <Bell className=\"h-6 w-6\" />,\r\n          variant: 'info',\r\n        },\r\n        {\r\n          title: 'Fee Collection',\r\n          value: totalCollected > 0 ? `${(totalCollected / 100000).toFixed(1)}L` : '0',\r\n          icon: <TrendingUp className=\"h-6 w-6\" />,\r\n          variant: 'warning',\r\n        },\r\n      ]} />\r\n\r\n      {/* Quick Actions and Activity */}\r\n      <div className=\"grid gap-6 lg:grid-cols-3\">\r\n        <QuickActions\r\n          columns={2}\r\n          actions={[\r\n            { label: 'Manage Users', icon: Users, href: '/users', variant: 'primary' },\r\n            { label: 'Notifications', icon: Bell, href: '/notifications', variant: 'default' },\r\n            { label: 'Fee Management', icon: DollarSign, href: '/fees', variant: 'default' },\r\n            { label: 'AI Assistant', icon: GraduationCap, href: '/query-bot', variant: 'accent' },\r\n          ]}\r\n        />\r\n\r\n        <Card className=\"lg:col-span-2 shadow-lg border-0 bg-gradient-to-br from-card to-muted/30\">\r\n          <CardHeader className=\"pb-3\">\r\n            <CardTitle className=\"font-display text-lg flex items-center gap-2\">\r\n              <div className=\"p-2 rounded-lg bg-info/10\">\r\n                <Activity className=\"h-5 w-5 text-info\" />\r\n              </div>\r\n              System Overview\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"grid gap-4 md:grid-cols-3\">\r\n              <div className=\"p-4 rounded-xl bg-primary/5 border border-primary/10\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"p-2 rounded-lg bg-primary/10\">\r\n                    <GraduationCap className=\"h-5 w-5 text-primary\" />\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-2xl font-bold\">{studentCount}</p>\r\n                    <p className=\"text-xs text-muted-foreground\">Students</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"p-4 rounded-xl bg-success/5 border border-success/10\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"p-2 rounded-lg bg-success/10\">\r\n                    <BookOpen className=\"h-5 w-5 text-success\" />\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-2xl font-bold\">{teacherCount}</p>\r\n                    <p className=\"text-xs text-muted-foreground\">Faculty</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"p-4 rounded-xl bg-info/5 border border-info/10\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"p-2 rounded-lg bg-info/10\">\r\n                    <BookOpen className=\"h-5 w-5 text-info\" />\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-2xl font-bold\">{courses?.length || 0}</p>\r\n                    <p className=\"text-xs text-muted-foreground\">Courses</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* System Status */}\r\n      <div className=\"grid gap-6 lg:grid-cols-3\">\r\n        <Card className=\"shadow-lg border-0 bg-gradient-to-br from-primary/5 to-primary/10\">\r\n          <CardContent className=\"p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">System Status</p>\r\n                <p className=\"text-2xl font-bold font-display mt-1\">Healthy</p>\r\n                <p className=\"text-xs text-success mt-2 flex items-center gap-1\">\r\n                  <span className=\"h-2 w-2 rounded-full bg-success inline-block\"></span>\r\n                  All services operational\r\n                </p>\r\n              </div>\r\n              <div className=\"p-4 rounded-xl bg-success/10\">\r\n                <Activity className=\"h-8 w-8 text-success\" />\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className=\"shadow-lg border-0 bg-gradient-to-br from-info/5 to-info/10\">\r\n          <CardContent className=\"p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">AI Chatbot</p>\r\n                <p className=\"text-2xl font-bold font-display mt-1\">Active</p>\r\n                <p className=\"text-xs text-muted-foreground mt-2\">\r\n                  Ready to assist\r\n                </p>\r\n              </div>\r\n              <div className=\"p-4 rounded-xl bg-info/10\">\r\n                <MessageSquare className=\"h-8 w-8 text-info\" />\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className=\"shadow-lg border-0 bg-gradient-to-br from-warning/5 to-warning/10\">\r\n          <CardContent className=\"p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Database</p>\r\n                <p className=\"text-2xl font-bold font-display mt-1\">Connected</p>\r\n                <p className=\"text-xs text-muted-foreground mt-2\">\r\n                  Last sync: Just now\r\n                </p>\r\n              </div>\r\n              <div className=\"p-4 rounded-xl bg-warning/10\">\r\n                <BookOpen className=\"h-8 w-8 text-warning\" />\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Database Seeder */}\r\n      <div className=\"grid gap-6 lg:grid-cols-2\">\r\n        <DatabaseSeeder />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function Dashboard() {\r\n  const { userRole, user, loading } = useAuth();\r\n\r\n  if (loading) {\r\n    return (\r\n      <DashboardLayout>\r\n        <div className=\"flex items-center justify-center min-h-[60vh]\">\r\n          <div className=\"text-center space-y-4\">\r\n            <Loader2 className=\"h-12 w-12 animate-spin text-primary mx-auto\" />\r\n            <p className=\"text-muted-foreground\">Loading dashboard...</p>\r\n          </div>\r\n        </div>\r\n      </DashboardLayout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <DashboardLayout>\r\n      {userRole === 'student' && <StudentDashboard />}\r\n      {userRole === 'teacher' && <TeacherDashboard />}\r\n      {userRole === 'admin' && <AdminDashboard />}\r\n      {!userRole && (\r\n        <div className=\"flex flex-col items-center justify-center min-h-[60vh] text-center animate-fade-in\">\r\n          <div className=\"p-6 rounded-full bg-primary/10 mb-6\">\r\n            <GraduationCap className=\"h-16 w-16 text-primary\" />\r\n          </div>\r\n          <h2 className=\"text-2xl font-display font-bold mb-2\">Welcome to Miracle LMS</h2>\r\n          <p className=\"text-muted-foreground mb-6 max-w-md\">\r\n            Your role has not been assigned yet. Please contact the administrator for access.\r\n          </p>\r\n          <Button asChild>\r\n            <Link to=\"/query-bot\">Talk to AI Assistant</Link>\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </DashboardLayout>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\DiscussionForums.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\Events.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\ExamSchedule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\FacultyFeedback.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\Fees.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\Grades.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\Index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\Library.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1469,1472],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1469,1472],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { useLibraryBooks, useAddLibraryBook, useMyBorrowings, useBorrowBook } from '@/hooks/useEnhancedLMS';\r\nimport { useAuth } from '@/hooks/useAuth';\r\nimport { Book, Search, Plus, BookOpen, Clock, AlertCircle } from 'lucide-react';\r\nimport { format, addDays, isPast } from 'date-fns';\r\nimport { cn } from '@/lib/utils';\r\n\r\nconst CATEGORIES = ['Fiction', 'Non-Fiction', 'Science', 'Technology', 'Engineering', 'Mathematics', 'Reference', 'Magazines'];\r\n\r\nexport default function Library() {\r\n  const { user, userRole } = useAuth();\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [category, setCategory] = useState<string>('');\r\n  const [addDialogOpen, setAddDialogOpen] = useState(false);\r\n  const [borrowDialogOpen, setBorrowDialogOpen] = useState(false);\r\n  const [selectedBook, setSelectedBook] = useState<any>(null);\r\n\r\n  const { data: books, isLoading } = useLibraryBooks((category && category !== 'all') ? category : undefined, searchQuery || undefined);\r\n  const { data: myBorrowings } = useMyBorrowings(user?.id || '');\r\n  const addBook = useAddLibraryBook();\r\n  const borrowBook = useBorrowBook();\r\n\r\n  const [newBook, setNewBook] = useState({\r\n    title: '',\r\n    author: '',\r\n    isbn: '',\r\n    category: '',\r\n    department: '',\r\n    total_copies: 1,\r\n    available_copies: 1,\r\n    shelf_location: '',\r\n  });\r\n\r\n  const handleAddBook = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    await addBook.mutateAsync({\r\n      ...newBook,\r\n      cover_url: null,\r\n    });\r\n    setAddDialogOpen(false);\r\n    setNewBook({\r\n      title: '',\r\n      author: '',\r\n      isbn: '',\r\n      category: '',\r\n      department: '',\r\n      total_copies: 1,\r\n      available_copies: 1,\r\n      shelf_location: '',\r\n    });\r\n  };\r\n\r\n  const handleBorrowBook = async () => {\r\n    if (!selectedBook || !user) return;\r\n    const dueDate = format(addDays(new Date(), 14), 'yyyy-MM-dd');\r\n    await borrowBook.mutateAsync({\r\n      book_id: selectedBook.id,\r\n      student_id: user.id,\r\n      due_date: dueDate,\r\n    });\r\n    setBorrowDialogOpen(false);\r\n    setSelectedBook(null);\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex justify-center py-12\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Ensure data is always an array to prevent crash\r\n  const safeBooks = Array.isArray(books) ? books : [];\r\n  const safeBorrowings = Array.isArray(myBorrowings) ? myBorrowings : [];\r\n\r\n  return (\r\n    <div className=\"space-y-8 animate-fade-in max-w-full overflow-hidden\">\r\n      <div className=\"flex flex-col gap-2 md:flex-row md:justify-between md:items-center\">\r\n        <div className=\"space-y-1\">\r\n          <h1 className=\"text-4xl font-bold tracking-tight bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent\">\r\n            Library\r\n          </h1>\r\n          <p className=\"text-muted-foreground text-lg\">\r\n            Discover your next great read\r\n          </p>\r\n        </div>\r\n\r\n        {userRole === 'admin' && (\r\n          <Dialog open={addDialogOpen} onOpenChange={setAddDialogOpen}>\r\n            <DialogTrigger asChild>\r\n              <Button size=\"lg\" className=\"shadow-lg hover:shadow-primary/25 transition-all w-full md:w-auto\">\r\n                <Plus className=\"mr-2 h-5 w-5\" /> Add Book\r\n              </Button>\r\n            </DialogTrigger>\r\n            <DialogContent>\r\n              {/* ... existing dialog content ... */}\r\n              <DialogHeader>\r\n                <DialogTitle>Add New Book</DialogTitle>\r\n                <DialogDescription>Add a book to the library catalog</DialogDescription>\r\n              </DialogHeader>\r\n              <form onSubmit={handleAddBook} className=\"space-y-4\">\r\n                <div className=\"space-y-2\">\r\n                  <Label>Title</Label>\r\n                  <Input value={newBook.title} onChange={(e) => setNewBook({ ...newBook, title: e.target.value })} required />\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label>Author</Label>\r\n                  <Input value={newBook.author} onChange={(e) => setNewBook({ ...newBook, author: e.target.value })} required />\r\n                </div>\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label>ISBN</Label>\r\n                    <Input value={newBook.isbn} onChange={(e) => setNewBook({ ...newBook, isbn: e.target.value })} />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label>Category</Label>\r\n                    <Select value={newBook.category} onValueChange={(v) => setNewBook({ ...newBook, category: v })}>\r\n                      <SelectTrigger><SelectValue placeholder=\"Select\" /></SelectTrigger>\r\n                      <SelectContent>\r\n                        {CATEGORIES.map(c => <SelectItem key={c} value={c}>{c}</SelectItem>)}\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label>Copies</Label>\r\n                    <Input\r\n                      type=\"number\"\r\n                      value={newBook.total_copies}\r\n                      onChange={(e) => setNewBook({\r\n                        ...newBook,\r\n                        total_copies: parseInt(e.target.value),\r\n                        available_copies: parseInt(e.target.value)\r\n                      })}\r\n                      min={1}\r\n                    />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label>Shelf Location</Label>\r\n                    <Input value={newBook.shelf_location} onChange={(e) => setNewBook({ ...newBook, shelf_location: e.target.value })} placeholder=\"e.g., A-12\" />\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex justify-end gap-2\">\r\n                  <Button type=\"button\" variant=\"outline\" onClick={() => setAddDialogOpen(false)}>Cancel</Button>\r\n                  <Button type=\"submit\" disabled={addBook.isPending}>\r\n                    {addBook.isPending ? 'Adding...' : 'Add Book'}\r\n                  </Button>\r\n                </div>\r\n              </form>\r\n            </DialogContent>\r\n          </Dialog>\r\n        )}\r\n      </div>\r\n\r\n      <Tabs defaultValue=\"catalog\" className=\"w-full\">\r\n        <TabsList className=\"w-full justify-start overflow-x-auto no-scrollbar p-1 bg-muted/50 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\r\n          <TabsTrigger value=\"catalog\" className=\"flex-1 min-w-[120px]\">Book Catalog</TabsTrigger>\r\n          {(userRole === 'student' || userRole === 'teacher') &&\r\n            <TabsTrigger value=\"my-books\" className=\"flex-1 min-w-[120px]\">My Borrowings</TabsTrigger>\r\n          }\r\n        </TabsList>\r\n\r\n        <TabsContent value=\"catalog\" className=\"space-y-6 mt-6\">\r\n          {/* Search & Filter */}\r\n          <div className=\"glass-card rounded-xl p-4 md:p-6 animate-slide-up\">\r\n            <div className=\"flex flex-col md:flex-row gap-4\">\r\n              <div className=\"relative flex-1\">\r\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                <Input\r\n                  placeholder=\"Search by title, author, or ISBN...\"\r\n                  value={searchQuery}\r\n                  onChange={(e) => setSearchQuery(e.target.value)}\r\n                  className=\"pl-10 h-11 bg-background/50\"\r\n                />\r\n              </div>\r\n              <Select value={category} onValueChange={setCategory}>\r\n                <SelectTrigger className=\"w-full md:w-[200px] h-11 bg-background/50\">\r\n                  <SelectValue placeholder=\"All Categories\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"all\">All Categories</SelectItem>\r\n                  {CATEGORIES.map(c => <SelectItem key={c} value={c}>{c}</SelectItem>)}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Book Grid */}\r\n          {safeBooks.length > 0 ? (\r\n            <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\r\n              {safeBooks.map((book, index) => (\r\n                <div\r\n                  key={book.id}\r\n                  className=\"group relative flex flex-col glass-card hover-lift rounded-xl overflow-hidden h-full\"\r\n                  style={{ animation: `slideUp 0.5s ease-out ${index * 0.05}s backwards` }}\r\n                >\r\n                  <div className=\"relative h-40 bg-gradient-to-br from-primary/5 to-primary/10 p-6 flex items-center justify-center overflow-hidden group-hover:from-primary/10 group-hover:to-primary/20 transition-colors\">\r\n                    <div className=\"absolute inset-0 opacity-10 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-primary via-transparent to-transparent\" />\r\n                    <Book className=\"h-16 w-16 text-primary/40 group-hover:scale-110 transition-transform duration-500\" />\r\n                    <Badge\r\n                      className=\"absolute top-3 right-3 shadow-sm\"\r\n                      variant={book.available_copies > 0 ? 'secondary' : 'destructive'}\r\n                    >\r\n                      {book.available_copies > 0 ? `${book.available_copies} Available` : 'Out of Stock'}\r\n                    </Badge>\r\n                  </div>\r\n\r\n                  <div className=\"p-5 flex flex-col flex-1\">\r\n                    <div className=\"mb-2\">\r\n                      {book.category && (\r\n                        <span className=\"text-xs font-medium text-primary/80 bg-primary/5 px-2 py-0.5 rounded-full\">\r\n                          {book.category}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                    <h3 className=\"font-bold text-lg leading-tight mb-1 line-clamp-2 group-hover:text-primary transition-colors\">\r\n                      {book.title}\r\n                    </h3>\r\n                    <p className=\"text-sm text-muted-foreground mb-4\">{book.author}</p>\r\n\r\n                    <div className=\"mt-auto space-y-3 pt-3 border-t border-border/50\">\r\n                      <div className=\"flex justify-between text-xs text-muted-foreground\">\r\n                        <span>{book.shelf_location || 'General Shelf'}</span>\r\n                        <span>{book.isbn || 'No ISBN'}</span>\r\n                      </div>\r\n\r\n                      {(userRole === 'student' || userRole === 'teacher') && book.available_copies > 0 && (\r\n                        <Button\r\n                          className=\"w-full shadow-sm hover:shadow-md transition-all active:scale-95\"\r\n                          onClick={() => {\r\n                            setSelectedBook(book);\r\n                            setBorrowDialogOpen(true);\r\n                          }}\r\n                        >\r\n                          <BookOpen className=\"mr-2 h-4 w-4\" /> Borrow Now\r\n                        </Button>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex flex-col items-center justify-center py-16 text-center animate-fade-in\">\r\n              <div className=\"h-20 w-20 rounded-full bg-muted/50 flex items-center justify-center mb-4\">\r\n                <Search className=\"h-10 w-10 text-muted-foreground/50\" />\r\n              </div>\r\n              <h3 className=\"text-xl font-semibold mb-2\">No books found</h3>\r\n              <p className=\"text-muted-foreground max-w-sm mx-auto\">\r\n                We couldn't find any books matching your search. Try adjusting your filters.\r\n              </p>\r\n            </div>\r\n          )}\r\n        </TabsContent>\r\n\r\n        {(userRole === 'student' || userRole === 'teacher') && (\r\n          <TabsContent value=\"my-books\" className=\"space-y-6 mt-6\">\r\n            {safeBorrowings.length > 0 ? (\r\n              <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n                {safeBorrowings.map((borrowing, index) => {\r\n                  const isOverdue = !borrowing.returned_at && isPast(new Date(borrowing.due_date));\r\n                  return (\r\n                    <div\r\n                      key={borrowing.id}\r\n                      className={cn(\r\n                        \"glass-card hover-lift rounded-xl p-5 border-l-4 animate-slide-up\",\r\n                        isOverdue ? \"border-l-destructive\" : \"border-l-primary\"\r\n                      )}\r\n                      style={{ animationDelay: `${index * 0.1}s` }}\r\n                    >\r\n                      <div className=\"flex justify-between items-start mb-3\">\r\n                        <div>\r\n                          <h3 className=\"font-semibold line-clamp-1\">{borrowing.library_books?.title}</h3>\r\n                          <p className=\"text-sm text-muted-foreground\">{borrowing.library_books?.author}</p>\r\n                        </div>\r\n                        <Badge variant={borrowing.returned_at ? 'secondary' : isOverdue ? 'destructive' : 'outline'}>\r\n                          {borrowing.returned_at ? 'Returned' : isOverdue ? 'Overdue' : 'Active'}\r\n                        </Badge>\r\n                      </div>\r\n\r\n                      <div className=\"space-y-2 text-sm bg-muted/30 p-3 rounded-lg\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <Clock className=\"h-4 w-4 text-primary\" />\r\n                          <span className=\"font-medium\">Due: {format(new Date(borrowing.due_date), 'PPP')}</span>\r\n                        </div>\r\n                        {isOverdue && borrowing.fine_amount > 0 && (\r\n                          <div className=\"flex items-center gap-2 text-destructive font-medium\">\r\n                            <AlertCircle className=\"h-4 w-4\" />\r\n                            <span>Fine: {borrowing.fine_amount}</span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            ) : (\r\n              <div className=\"flex flex-col items-center justify-center py-16 text-center animate-fade-in\">\r\n                <div className=\"h-20 w-20 rounded-full bg-primary/5 flex items-center justify-center mb-4\">\r\n                  <BookOpen className=\"h-10 w-10 text-primary/40\" />\r\n                </div>\r\n                <h3 className=\"text-xl font-semibold mb-2\">No borrowed books</h3>\r\n                <p className=\"text-muted-foreground\">\r\n                  You haven't borrowed any books yet. Check the catalog to get started!\r\n                </p>\r\n              </div>\r\n            )}\r\n          </TabsContent>\r\n        )}\r\n      </Tabs>\r\n\r\n      {/* Borrow Dialog */}\r\n      <Dialog open={borrowDialogOpen} onOpenChange={setBorrowDialogOpen}>\r\n        <DialogContent className=\"glass-heavy\">\r\n          <DialogHeader>\r\n            <DialogTitle>Confirm Borrowing</DialogTitle>\r\n            <DialogDescription>\r\n              You are about to borrow <span className=\"font-semibold text-foreground\">\"{selectedBook?.title}\"</span>\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <div className=\"space-y-6 py-2\">\r\n            <div className=\"p-4 rounded-xl bg-primary/5 border border-primary/10 space-y-2\">\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span className=\"text-muted-foreground\">Library Policy</span>\r\n                <span className=\"font-medium\">Standard Loan</span>\r\n              </div>\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span className=\"text-muted-foreground\">Return By</span>\r\n                <span className=\"font-semibold text-primary\">{format(addDays(new Date(), 14), 'PPP')}</span>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex justify-end gap-3\">\r\n              <Button variant=\"outline\" onClick={() => setBorrowDialogOpen(false)}>Cancel</Button>\r\n              <Button onClick={handleBorrowBook} disabled={borrowBook.isPending} className=\"px-8\">\r\n                {borrowBook.isPending ? 'Processing...' : 'Confirm'}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\LostAndFound.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":187,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":187,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8034,8037],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8034,8037],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport DashboardLayout from '@/components/layout/DashboardLayout';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { useLostFoundItems, useReportLostFound } from '@/hooks/useEnhancedLMS';\r\nimport { useAuth } from '@/hooks/useAuth';\r\nimport { Search, Plus, MapPin, Calendar, User, Package } from 'lucide-react';\r\nimport { format } from 'date-fns';\r\n\r\nconst CATEGORIES = [\r\n  { value: 'electronics', label: 'Electronics' },\r\n  { value: 'documents', label: 'Documents' },\r\n  { value: 'accessories', label: 'Accessories' },\r\n  { value: 'books', label: 'Books' },\r\n  { value: 'other', label: 'Other' },\r\n];\r\n\r\nexport default function LostAndFound() {\r\n  const { user } = useAuth();\r\n  const [type, setType] = useState<string>('');\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  \r\n  const { data: items, isLoading } = useLostFoundItems(type || undefined);\r\n  const reportItem = useReportLostFound();\r\n\r\n  const [formData, setFormData] = useState({\r\n    item_name: '',\r\n    description: '',\r\n    category: '',\r\n    type: 'lost',\r\n    location: '',\r\n    date_reported: format(new Date(), 'yyyy-MM-dd'),\r\n    contact_info: '',\r\n  });\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    await reportItem.mutateAsync({\r\n      ...formData,\r\n      reported_by: user?.id || '',\r\n      image_url: null,\r\n    });\r\n    setDialogOpen(false);\r\n    setFormData({\r\n      item_name: '',\r\n      description: '',\r\n      category: '',\r\n      type: 'lost',\r\n      location: '',\r\n      date_reported: format(new Date(), 'yyyy-MM-dd'),\r\n      contact_info: '',\r\n    });\r\n  };\r\n\r\n  const getCategoryLabel = (value: string) => CATEGORIES.find(c => c.value === value)?.label || value;\r\n\r\n  return (\r\n    <DashboardLayout>\r\n      <div className=\"space-y-6\">\r\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold tracking-tight\">Lost & Found</h1>\r\n            <p className=\"text-muted-foreground\">Report and find lost items on campus</p>\r\n          </div>\r\n          \r\n          <Dialog open={dialogOpen} onOpenChange={setDialogOpen}>\r\n            <DialogTrigger asChild>\r\n              <Button>\r\n                <Plus className=\"mr-2 h-4 w-4\" /> Report Item\r\n              </Button>\r\n            </DialogTrigger>\r\n            <DialogContent>\r\n              <DialogHeader>\r\n                <DialogTitle>Report Item</DialogTitle>\r\n                <DialogDescription>Report a lost or found item</DialogDescription>\r\n              </DialogHeader>\r\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                <div className=\"space-y-2\">\r\n                  <Label>Report Type</Label>\r\n                  <Select value={formData.type} onValueChange={(v) => setFormData({ ...formData, type: v })}>\r\n                    <SelectTrigger>\r\n                      <SelectValue />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"lost\">I lost something</SelectItem>\r\n                      <SelectItem value=\"found\">I found something</SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label>Item Name</Label>\r\n                  <Input \r\n                    value={formData.item_name} \r\n                    onChange={(e) => setFormData({ ...formData, item_name: e.target.value })}\r\n                    placeholder=\"e.g., Black Laptop Bag\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label>Description</Label>\r\n                  <Textarea \r\n                    value={formData.description} \r\n                    onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                    placeholder=\"Describe the item in detail...\"\r\n                    rows={3}\r\n                  />\r\n                </div>\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label>Category</Label>\r\n                    <Select value={formData.category} onValueChange={(v) => setFormData({ ...formData, category: v })}>\r\n                      <SelectTrigger><SelectValue placeholder=\"Select\" /></SelectTrigger>\r\n                      <SelectContent>\r\n                        {CATEGORIES.map(c => (\r\n                          <SelectItem key={c.value} value={c.value}>{c.label}</SelectItem>\r\n                        ))}\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label>Date</Label>\r\n                    <Input \r\n                      type=\"date\" \r\n                      value={formData.date_reported} \r\n                      onChange={(e) => setFormData({ ...formData, date_reported: e.target.value })}\r\n                      required\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label>Location</Label>\r\n                  <Input \r\n                    value={formData.location} \r\n                    onChange={(e) => setFormData({ ...formData, location: e.target.value })}\r\n                    placeholder=\"e.g., Library, Block A, Canteen\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label>Contact Info (optional)</Label>\r\n                  <Input \r\n                    value={formData.contact_info} \r\n                    onChange={(e) => setFormData({ ...formData, contact_info: e.target.value })}\r\n                    placeholder=\"Phone number or email\"\r\n                  />\r\n                </div>\r\n                <div className=\"flex justify-end gap-2\">\r\n                  <Button type=\"button\" variant=\"outline\" onClick={() => setDialogOpen(false)}>Cancel</Button>\r\n                  <Button type=\"submit\" disabled={reportItem.isPending}>\r\n                    {reportItem.isPending ? 'Submitting...' : 'Submit Report'}\r\n                  </Button>\r\n                </div>\r\n              </form>\r\n            </DialogContent>\r\n          </Dialog>\r\n        </div>\r\n\r\n        <Tabs defaultValue=\"all\" onValueChange={(v) => setType(v === 'all' ? '' : v)}>\r\n          <TabsList>\r\n            <TabsTrigger value=\"all\">All Items</TabsTrigger>\r\n            <TabsTrigger value=\"lost\">Lost Items</TabsTrigger>\r\n            <TabsTrigger value=\"found\">Found Items</TabsTrigger>\r\n          </TabsList>\r\n\r\n          <TabsContent value=\"all\" className=\"mt-4\">\r\n            <ItemGrid items={items} isLoading={isLoading} getCategoryLabel={getCategoryLabel} />\r\n          </TabsContent>\r\n          <TabsContent value=\"lost\" className=\"mt-4\">\r\n            <ItemGrid items={items} isLoading={isLoading} getCategoryLabel={getCategoryLabel} />\r\n          </TabsContent>\r\n          <TabsContent value=\"found\" className=\"mt-4\">\r\n            <ItemGrid items={items} isLoading={isLoading} getCategoryLabel={getCategoryLabel} />\r\n          </TabsContent>\r\n        </Tabs>\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n}\r\n\r\nfunction ItemGrid({ items, isLoading, getCategoryLabel }: { items: any[] | undefined; isLoading: boolean; getCategoryLabel: (v: string) => string }) {\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex justify-center py-12\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!items || items.length === 0) {\r\n    return (\r\n      <Card>\r\n        <CardContent className=\"flex flex-col items-center justify-center py-12\">\r\n          <Search className=\"h-12 w-12 text-muted-foreground mb-4\" />\r\n          <h3 className=\"text-lg font-semibold\">No items reported</h3>\r\n          <p className=\"text-muted-foreground\">Be the first to report a lost or found item</p>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n      {items.map(item => (\r\n        <Card key={item.id} className=\"hover:shadow-lg transition-shadow\">\r\n          <CardHeader className=\"pb-3\">\r\n            <div className=\"flex justify-between items-start\">\r\n              <Badge variant={item.type === 'lost' ? 'destructive' : 'default'}>\r\n                {item.type === 'lost' ? 'Lost' : 'Found'}\r\n              </Badge>\r\n              <Badge variant=\"outline\">{getCategoryLabel(item.category)}</Badge>\r\n            </div>\r\n            <CardTitle className=\"text-lg mt-2\">{item.item_name}</CardTitle>\r\n            {item.description && (\r\n              <CardDescription className=\"line-clamp-2\">{item.description}</CardDescription>\r\n            )}\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-2 text-sm\">\r\n            <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n              <MapPin className=\"h-4 w-4\" />\r\n              <span>{item.location}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n              <Calendar className=\"h-4 w-4\" />\r\n              <span>{format(new Date(item.date_reported), 'MMM d, yyyy')}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n              <User className=\"h-4 w-4\" />\r\n              <span>Reported by {item.profiles?.full_name || 'Unknown'}</span>\r\n            </div>\r\n            {item.contact_info && (\r\n              <p className=\"text-primary text-sm mt-2\">Contact: {item.contact_info}</p>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\NotFound.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\Notes.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\Notifications.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\PreviousPapers.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\QueryBot.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\Settings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":133,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":133,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4769,4772],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4769,4772],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":160,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":160,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5511,5514],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5511,5514],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef, useEffect } from 'react';\r\nimport { useAuth } from '@/hooks/useAuth';\r\nimport { useProfiles, useCourses } from '@/hooks/useLMS';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport DashboardLayout from '@/components/layout/DashboardLayout';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport {\r\n  User, Bell, Shield, Palette, Save, Loader2, BookOpen,\r\n  Mail, Phone, Building, Calendar, Camera, GraduationCap, Hash, UserCircle\r\n} from 'lucide-react';\r\nimport { toast } from 'sonner';\r\n\r\nconst DEPARTMENTS = [\r\n  { value: 'CSE', label: 'CSE' },\r\n  { value: 'AI&DS', label: 'AI&DS' },\r\n  { value: 'EEE', label: 'EEE' },\r\n  { value: 'ECE', label: 'ECE' },\r\n  { value: 'MECH', label: 'MECH' },\r\n];\r\n\r\nconst SEMESTERS = [\r\n  { value: '1-1', label: '1-1' },\r\n  { value: '1-2', label: '1-2' },\r\n  { value: '2-1', label: '2-1' },\r\n  { value: '2-2', label: '2-2' },\r\n  { value: '3-1', label: '3-1' },\r\n  { value: '3-2', label: '3-2' },\r\n  { value: '4-1', label: '4-1' },\r\n  { value: '4-2', label: '4-2' },\r\n];\r\n\r\nconst REGULATIONS = [\r\n  { value: 'R23', label: 'R23' },\r\n  { value: 'R22', label: 'R22' },\r\n  { value: 'R21', label: 'R21' },\r\n  { value: 'R20', label: 'R20' },\r\n];\r\n\r\nexport default function Settings() {\r\n  const { user, userRole } = useAuth();\r\n  const { data: profiles } = useProfiles();\r\n  const { data: courses } = useCourses();\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const [saving, setSaving] = useState(false);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [emailNotifications, setEmailNotifications] = useState(true);\r\n  const [pushNotifications, setPushNotifications] = useState(true);\r\n\r\n  // Form state\r\n  const [fullName, setFullName] = useState('');\r\n  const [phone, setPhone] = useState('');\r\n  const [department, setDepartment] = useState('');\r\n  const [subject, setSubject] = useState('');\r\n  const [semester, setSemester] = useState('');\r\n  const [regulation, setRegulation] = useState('');\r\n  const [rollNumber, setRollNumber] = useState('');\r\n  const [avatarUrl, setAvatarUrl] = useState<string | null>(null);\r\n\r\n  // Load current user profile\r\n  const currentProfile = profiles?.find(p => p.id === user?.id);\r\n\r\n  useEffect(() => {\r\n    if (currentProfile) {\r\n      setFullName(currentProfile.full_name || '');\r\n      setPhone(currentProfile.phone || '');\r\n      setDepartment(currentProfile.department || '');\r\n      setSubject(currentProfile.subject || '');\r\n      setSemester(currentProfile.semester || '');\r\n      setRegulation(currentProfile.regulation || '');\r\n      setRollNumber(currentProfile.roll_number || '');\r\n      setAvatarUrl(currentProfile.avatar_url);\r\n    }\r\n  }, [currentProfile]);\r\n\r\n  const userInitials = fullName\r\n    ? fullName.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2)\r\n    : user?.email?.substring(0, 2).toUpperCase() || 'U';\r\n\r\n  const handleAvatarClick = () => {\r\n    fileInputRef.current?.click();\r\n  };\r\n\r\n  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file || !user?.id) return;\r\n\r\n    // Validate file\r\n    if (!file.type.startsWith('image/')) {\r\n      toast.error('Please select an image file');\r\n      return;\r\n    }\r\n\r\n    if (file.size > 2 * 1024 * 1024) {\r\n      toast.error('Image must be less than 2MB');\r\n      return;\r\n    }\r\n\r\n    setUploading(true);\r\n    try {\r\n      const fileExt = file.name.split('.').pop();\r\n      const fileName = `${user.id}/avatar.${fileExt}`;\r\n\r\n      // Upload to storage\r\n      const { error: uploadError } = await supabase.storage\r\n        .from('avatars')\r\n        .upload(fileName, file, { upsert: true });\r\n\r\n      if (uploadError) throw uploadError;\r\n\r\n      // Get public URL\r\n      const { data: { publicUrl } } = supabase.storage\r\n        .from('avatars')\r\n        .getPublicUrl(fileName);\r\n\r\n      // Update profile with avatar URL\r\n      const { error: updateError } = await supabase\r\n        .from('profiles')\r\n        .update({ avatar_url: publicUrl })\r\n        .eq('id', user.id);\r\n\r\n      if (updateError) throw updateError;\r\n\r\n      setAvatarUrl(publicUrl + '?t=' + Date.now()); // Add timestamp to bust cache\r\n      toast.success('Profile picture updated');\r\n    } catch (error: any) {\r\n      toast.error(error.message || 'Failed to upload image');\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!user?.id) return;\r\n\r\n    setSaving(true);\r\n    try {\r\n      const { error } = await supabase\r\n        .from('profiles')\r\n        .update({\r\n          full_name: fullName || null,\r\n          phone: phone || null,\r\n          department: department || null,\r\n          subject: subject || null,\r\n          semester: semester || null,\r\n          regulation: regulation || null,\r\n          roll_number: rollNumber || null,\r\n        })\r\n        .eq('id', user.id);\r\n\r\n      if (error) throw error;\r\n      toast.success('Settings saved successfully');\r\n    } catch (error: any) {\r\n      toast.error(error.message || 'Failed to save settings');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <DashboardLayout>\r\n      <div className=\"space-y-6 max-w-4xl\">\r\n        {/* Header */}\r\n        <div>\r\n          <h1 className=\"text-2xl font-display font-bold\">Settings</h1>\r\n          <p className=\"text-muted-foreground\">Manage your account and preferences</p>\r\n        </div>\r\n\r\n        {/* Profile Section */}\r\n        <Card className=\"shadow-card\">\r\n          <CardHeader>\r\n            <div className=\"flex items-center gap-2\">\r\n              <User className=\"h-5 w-5 text-primary\" />\r\n              <CardTitle className=\"font-display\">Profile</CardTitle>\r\n            </div>\r\n            <CardDescription>Your personal information</CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6\">\r\n            <div className=\"flex items-center gap-6\">\r\n              <div className=\"relative\">\r\n                <Avatar className=\"h-20 w-20 cursor-pointer\" onClick={handleAvatarClick}>\r\n                  {avatarUrl ? (\r\n                    <AvatarImage src={avatarUrl} alt=\"Profile\" />\r\n                  ) : null}\r\n                  <AvatarFallback className=\"bg-primary text-primary-foreground text-2xl\">\r\n                    {userInitials}\r\n                  </AvatarFallback>\r\n                </Avatar>\r\n                <button\r\n                  onClick={handleAvatarClick}\r\n                  disabled={uploading}\r\n                  className=\"absolute bottom-0 right-0 p-1.5 rounded-full bg-primary text-primary-foreground hover:bg-primary/90 transition-colors\"\r\n                >\r\n                  {uploading ? (\r\n                    <Loader2 className=\"h-3.5 w-3.5 animate-spin\" />\r\n                  ) : (\r\n                    <Camera className=\"h-3.5 w-3.5\" />\r\n                  )}\r\n                </button>\r\n                <input\r\n                  ref={fileInputRef}\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  onChange={handleFileChange}\r\n                  className=\"hidden\"\r\n                />\r\n              </div>\r\n              <div>\r\n                {rollNumber && (\r\n                  <h3 className=\"font-bold text-xl text-primary\">{rollNumber}</h3>\r\n                )}\r\n                <h3 className=\"font-semibold text-lg\">{fullName || user?.email}</h3>\r\n                {department && (\r\n                  <p className=\"text-sm text-muted-foreground\">{department}</p>\r\n                )}\r\n                <p className=\"text-muted-foreground capitalize\">{userRole}</p>\r\n                <p className=\"text-xs text-muted-foreground mt-1\">Click the camera icon to change photo</p>\r\n              </div>\r\n            </div>\r\n\r\n            <Separator />\r\n\r\n            <div className=\"grid gap-4 sm:grid-cols-2\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"fullName\" className=\"flex items-center gap-2\">\r\n                  <UserCircle className=\"h-4 w-4\" />\r\n                  Full Name\r\n                </Label>\r\n                <Input\r\n                  id=\"fullName\"\r\n                  value={fullName}\r\n                  onChange={(e) => setFullName(e.target.value)}\r\n                  placeholder=\"Enter your full name\"\r\n                />\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"email\" className=\"flex items-center gap-2\">\r\n                  <Mail className=\"h-4 w-4\" />\r\n                  Email\r\n                </Label>\r\n                <Input id=\"email\" value={user?.email || ''} disabled className=\"bg-muted\" />\r\n              </div>\r\n              {userRole === 'student' && (\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"rollNumber\" className=\"flex items-center gap-2\">\r\n                    <Hash className=\"h-4 w-4\" />\r\n                    Roll Number\r\n                  </Label>\r\n                  <Input\r\n                    id=\"rollNumber\"\r\n                    value={rollNumber}\r\n                    onChange={(e) => setRollNumber(e.target.value.toUpperCase())}\r\n                    placeholder=\"e.g., 22A91A6101\"\r\n                  />\r\n                </div>\r\n              )}\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"phone\" className=\"flex items-center gap-2\">\r\n                  <Phone className=\"h-4 w-4\" />\r\n                  Phone\r\n                </Label>\r\n                <Input\r\n                  id=\"phone\"\r\n                  value={phone}\r\n                  onChange={(e) => setPhone(e.target.value)}\r\n                  placeholder=\"Enter phone number\"\r\n                />\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"department\" className=\"flex items-center gap-2\">\r\n                  <Building className=\"h-4 w-4\" />\r\n                  Department\r\n                </Label>\r\n                <Select value={department} onValueChange={setDepartment}>\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Select department\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent className=\"bg-background border z-50\">\r\n                    {DEPARTMENTS.map((dept) => (\r\n                      <SelectItem key={dept.value} value={dept.value}>\r\n                        {dept.label}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              {userRole === 'teacher' && (\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"subject\" className=\"flex items-center gap-2\">\r\n                    <BookOpen className=\"h-4 w-4\" />\r\n                    Subject Specialization\r\n                  </Label>\r\n                  <Select value={subject} onValueChange={setSubject}>\r\n                    <SelectTrigger>\r\n                      <SelectValue placeholder=\"Select primary subject\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent className=\"bg-background border z-50 h-[200px]\">\r\n                      {courses?.map((course) => (\r\n                        <SelectItem key={course.id} value={course.name}>\r\n                          {course.name} ({course.code})\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                  <p className=\"text-xs text-muted-foreground mt-1\">This sets your primary subject profile</p>\r\n                </div>\r\n              )}\r\n              {userRole === 'student' && (\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"semester\" className=\"flex items-center gap-2\">\r\n                    <GraduationCap className=\"h-4 w-4\" />\r\n                    Semester\r\n                  </Label>\r\n                  <Select value={semester} onValueChange={setSemester}>\r\n                    <SelectTrigger>\r\n                      <SelectValue placeholder=\"Select semester\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent className=\"bg-background border z-50\">\r\n                      {SEMESTERS.map((sem) => (\r\n                        <SelectItem key={sem.value} value={sem.value}>\r\n                          {sem.label}\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n              )}\r\n              {userRole === 'student' && (\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"regulation\" className=\"flex items-center gap-2\">\r\n                    <Hash className=\"h-4 w-4\" />\r\n                    Regulation\r\n                  </Label>\r\n                  <Select value={regulation} onValueChange={setRegulation}>\r\n                    <SelectTrigger>\r\n                      <SelectValue placeholder=\"Select regulation\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent className=\"bg-background border z-50\">\r\n                      {REGULATIONS.map((reg) => (\r\n                        <SelectItem key={reg.value} value={reg.value}>\r\n                          {reg.label}\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n              )}\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"joined\" className=\"flex items-center gap-2\">\r\n                  <Calendar className=\"h-4 w-4\" />\r\n                  Member Since\r\n                </Label>\r\n                <Input\r\n                  id=\"joined\"\r\n                  value={user?.created_at ? new Date(user.created_at).toLocaleDateString() : 'N/A'}\r\n                  disabled\r\n                  className=\"bg-muted\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Notifications Section */}\r\n        <Card className=\"shadow-card\">\r\n          <CardHeader>\r\n            <div className=\"flex items-center gap-2\">\r\n              <Bell className=\"h-5 w-5 text-primary\" />\r\n              <CardTitle className=\"font-display\">Notifications</CardTitle>\r\n            </div>\r\n            <CardDescription>Configure how you receive notifications</CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"space-y-0.5\">\r\n                <Label>Email Notifications</Label>\r\n                <p className=\"text-sm text-muted-foreground\">Receive notifications via email</p>\r\n              </div>\r\n              <Switch\r\n                checked={emailNotifications}\r\n                onCheckedChange={setEmailNotifications}\r\n              />\r\n            </div>\r\n            <Separator />\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"space-y-0.5\">\r\n                <Label>Push Notifications</Label>\r\n                <p className=\"text-sm text-muted-foreground\">Receive push notifications in browser</p>\r\n              </div>\r\n              <Switch\r\n                checked={pushNotifications}\r\n                onCheckedChange={setPushNotifications}\r\n              />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Security Section */}\r\n        <Card className=\"shadow-card\">\r\n          <CardHeader>\r\n            <div className=\"flex items-center gap-2\">\r\n              <Shield className=\"h-5 w-5 text-primary\" />\r\n              <CardTitle className=\"font-display\">Security</CardTitle>\r\n            </div>\r\n            <CardDescription>Manage your password and security settings</CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            <div className=\"grid gap-4 sm:grid-cols-2\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"current-password\">Current Password</Label>\r\n                <Input id=\"current-password\" type=\"password\" placeholder=\"Enter current password\" />\r\n              </div>\r\n              <div></div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"new-password\">New Password</Label>\r\n                <Input id=\"new-password\" type=\"password\" placeholder=\"Enter new password\" />\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"confirm-password\">Confirm New Password</Label>\r\n                <Input id=\"confirm-password\" type=\"password\" placeholder=\"Confirm new password\" />\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Appearance Section */}\r\n        <Card className=\"shadow-card\">\r\n          <CardHeader>\r\n            <div className=\"flex items-center gap-2\">\r\n              <Palette className=\"h-5 w-5 text-primary\" />\r\n              <CardTitle className=\"font-display\">Appearance</CardTitle>\r\n            </div>\r\n            <CardDescription>Customize the look and feel</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <p className=\"text-muted-foreground\">Theme settings coming soon...</p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Save Button */}\r\n        <div className=\"flex justify-end\">\r\n          <Button variant=\"hero\" onClick={handleSave} disabled={saving}>\r\n            {saving && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\r\n            <Save className=\"h-4 w-4 mr-2\" />\r\n            Save Changes\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\Syllabus.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":18,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":18,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":518,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":518,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[50112,50115],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[50112,50115],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":519,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":519,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[50165,50168],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[50165,50168],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":723,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":723,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[59686,59689],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[59686,59689],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":725,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":725,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[59802,59805],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[59802,59805],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":725,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":725,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[59824,59827],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[59824,59827],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo } from 'react';\r\nimport { useAuth } from '@/hooks/useAuth';\r\nimport { useClasses, useCourses, useAssignments, useSubmissions } from '@/hooks/useLMS';\r\nimport { useSeedDatabase } from '@/hooks/useDatabaseSeed';\r\nimport { toast } from 'sonner';\r\nimport DashboardLayout from '@/components/layout/DashboardLayout';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Progress } from '@/components/ui/progress';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { BookOpen, Plus, ChevronDown, ChevronRight, CheckCircle, Circle, Loader2, Filter, Database } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport AddSubjectDialog from '@/components/courses/AddSubjectDialog';\r\n\r\n// JNTU-GV Comprehensive Syllabus Data (R20, R21, R22, R23) - Frontend Fallback\r\nexport const JNTUGV_DATA = [\r\n  // R23 REGULATION - CSE\r\n  {\r\n    id: '1',\r\n    code: 'R231101',\r\n    name: 'Linear Algebra and Calculus',\r\n    semester: 1,\r\n    credits: 3,\r\n    department: 'Basic Science',\r\n    description: 'Matrix algebra, eigen values/vectors, calculus of multivariable functions',\r\n    units: [\r\n      { title: 'Unit I: Matrices', content: 'Rank of a matrix by echelon form, normal form. Cauchy-Binet formulae (without proof). Inverse of non-singular matrix by Gauss-Jordan method. System of linear equations: solving system of homogeneous and non-homogeneous linear equations - Gauss elimination method, Gauss Seidel Iteration Method.' },\r\n      { title: 'Unit II: Linear Transformation and Orthogonal Transformation', content: 'Eigenvalues, Eigenvectors and their properties (without proof). Diagonalization of a matrix, Cayley-Hamilton Theorem (without proof), finding inverse and power of a matrix using Cayley-Hamilton Theorem. Quadratic forms and their nature, reduction of quadratic form to canonical forms by orthogonal transformation.' },\r\n      { title: 'Unit III: Calculus', content: 'Mean Value Theorems: Rolles Theorem, Lagranges mean value theorem with their geometrical interpretation, Cauchys mean value theorem, Taylors and Maclaurins theorems with remainders (without proof). Problems and applications.' },\r\n      { title: 'Unit IV: Partial Differentiation and Applications', content: 'Partial derivatives, total derivatives, chain rule, change of variables, Taylors and Maclaurins series expansion of functions of two variables. Jacobians, maxima and minima of functions of two variables, method of Lagrange multipliers.' },\r\n      { title: 'Unit V: Multiple Integrals', content: 'Double and triple integrals, change of order of integration, change of variables to polar, cylindrical, and spherical coordinates. Finding areas using double integrals and volumes using double and triple integrals.' }\r\n    ]\r\n  },\r\n  {\r\n    id: '2',\r\n    code: 'R231102',\r\n    name: 'Engineering Physics',\r\n    semester: 1,\r\n    credits: 3,\r\n    department: 'Basic Science',\r\n    description: 'Optics, Lasers, Quantum Mechanics, Semiconductors',\r\n    units: [\r\n      { title: 'Unit I: Wave Optics', content: 'Principle of Superposition, Interference of light, Newtons rings. Diffraction: Fraunhofer diffraction at single slit, double slit, N-slits. Polarization: Polarization by reflection, refraction, and double refraction. Quarter and Half wave plates.' },\r\n      { title: 'Unit II: Lasers and Fiber Optics', content: 'Lasers: Absorption, spontaneous and stimulated emission, population inversion. Ruby laser, He-Ne laser. Fiber Optics: Principle of optical fiber, acceptance angle, numerical aperture, types of optical fibers, losses in optical fibers.' },\r\n      { title: 'Unit III: Quantum Mechanics', content: 'Introduction, matter waves, De Broglies hypothesis, Heisenbergs Uncertainty Principle. Time-independent Schrodinger wave equation, Physical significance of wave function. Particle in a one-dimensional potential box.' },\r\n      { title: 'Unit IV: Band Theory of Solids & Semiconductors', content: 'Free electron theory, Blochs theorem, Kronig-Penney model (qualitative). Classification of solids. Intrinsic and extrinsic semiconductors, Carrier concentration, Hall Effect.' },\r\n      { title: 'Unit V: Crystallography and Superconductivity', content: 'Crystal systems, Bravais lattices, Miller indices. Braggs law. Superconductivity: Meissner effect, Type I and Type II superconductors, BCS theory. Applications.' }\r\n    ]\r\n  },\r\n  {\r\n    id: '3',\r\n    code: 'R231103',\r\n    name: 'Communicative English',\r\n    semester: 1,\r\n    credits: 2,\r\n    department: 'Humanities',\r\n    description: 'Listening, Speaking, Reading, Writing skills',\r\n    units: [\r\n      { title: 'Unit I: Introduction to Communication', content: 'The importance of communication, Types of communication, Barriers to communication. Grammar: Articles, Prepositions, Tenses.' },\r\n      { title: 'Unit II: Listening Skills', content: 'Types of listening, Listening for general content, Listening for specific information. Note-taking and Note-making. Common errors in listening.' },\r\n      { title: 'Unit III: Speaking Skills', content: 'Jam session, Group Discussions, Debate, Interview skills. Pronunciation: Sounds of English, Stress, Intonation.' },\r\n      { title: 'Unit IV: Reading Skills', content: 'Skimming, Scanning, Intensive and Extensive reading. Reading comprehension. Vocabulary building: Synonyms, Antonyms, One-word substitutes.' },\r\n      { title: 'Unit V: Writing Skills', content: 'Paragraph writing, Letter writing (Formal & Informal), Email etiquette, Report writing, Resume preparation.' }\r\n    ]\r\n  },\r\n  {\r\n    id: '4',\r\n    code: 'R231104',\r\n    name: 'Basic Civil & Mechanical Engineering',\r\n    semester: 1,\r\n    credits: 3,\r\n    department: 'Engineering Science',\r\n    description: 'Basic concepts of Civil and Mechanical Engineering',\r\n    units: [\r\n      { title: 'Unit I (Civil): Building Materials', content: 'Stones, Bricks, Cement, Aggregates, Concrete. Properties and uses. Substructure and Superstructure. foundation types. Brick masonry.' },\r\n      { title: 'Unit II (Civil): Surveying & Transportation', content: 'Surveying: Objectives, Types, Linear measurements. Basics of leveling. Transportation: Types of roads, Highway cross-section. Dams and Water storages.' },\r\n      { title: 'Unit III (Mech): Thermodynamics', content: 'Basic concepts, System, Surroundings, Laws of thermodynamics. Zeroth law, First law, Second law. Heat engines, Refrigerators, Heat pumps. IC Engines: 2-stroke and 4-stroke engines.' },\r\n      { title: 'Unit IV (Mech): Manufacturing Processes', content: 'Casting: Patterns, Moulding. Welding: Arc welding, Gas welding. Machining: Lathe operations, Drilling. Additive manufacturing overview.' },\r\n      { title: 'Unit V (Mech): Power Transmission & Robotics', content: 'Power Transmission: Belts, Ropes, Chains, Gears. Drives. Introduction to Robotics: Components, Classifications, Applications.' }\r\n    ]\r\n  },\r\n  {\r\n    id: '5',\r\n    code: 'R231105',\r\n    name: 'Introduction to Programming',\r\n    semester: 1,\r\n    credits: 3,\r\n    department: 'CSE',\r\n    description: 'Problem solving using C, Arrays, Pointers, Structures',\r\n    units: [\r\n      { title: 'Unit I: Basics of Computers & C Language', content: 'Computer systems, creating and running programs. Algorithm, Flowchart. C Basics: Structure of C program, Data types, Variables, Constants, I/O statements.' },\r\n      { title: 'Unit II: Operators & Control Statements', content: 'Operators: Arithmetic, Relational, Logical, Bitwise. Expressions. Control Statements: Selection (if, switch), Iteration (while, do-while, for), Jump statements (break, continue, goto).' },\r\n      { title: 'Unit III: Arrays & Strings', content: 'Arrays: One-dimensional and Multi-dimensional arrays. Strings: Declaration, Initialization, String handling functions. Bubble sort, Selection sort, Linear and Binary search.' },\r\n      { title: 'Unit IV: Functions & Pointers', content: 'Functions: Definition, Declaration, Parameter passing, Recursion, Storage classes. Pointers: Declaration, Pointer arithmetic, Pointers to pointers, Arrays of pointers.' },\r\n      { title: 'Unit V: Structures, Unions & Files', content: 'Structures: Definition, Nested structures, Arrays of structures. Unions. Dynamic Memory Allocation (malloc, calloc, realloc). File Handling: Opening, Closing, Reading, Writing files.' }\r\n    ]\r\n  },\r\n  { id: '6', code: 'R231106', name: 'Engineering Workshop', semester: 1, credits: 2, department: 'Engineering Science', description: 'Hands-on training in various engineering trades' },\r\n  {\r\n    id: '7',\r\n    code: 'R231201',\r\n    name: 'Differential Equations & Vector Calculus',\r\n    semester: 2,\r\n    credits: 3,\r\n    department: 'Basic Science',\r\n    description: 'ODEs, PDEs, Vector Differentiation and Integration',\r\n    units: [\r\n      { title: 'Unit I: Differential Equations of First Order', content: 'Exact, Linear and Bernoulli equations. Newtons Law of Cooling, Law of Natural Growth and Decay. Orthogonal trajectories.' },\r\n      { title: 'Unit II: Higher Order Differential Equations', content: 'Linear differential equations of second and higher order with constant coefficients. Non-homogeneous term of the type e^ax, sin(ax), cos(ax), polynomials. Method of variation of parameters.' },\r\n      { title: 'Unit III: Partial Differential Equations', content: 'Formation of PDEs, Solutions of first order linear (Lagrange) equation. Solutions of linear PDEs with constant coefficients. Homogeneous and Non-homogeneous.' },\r\n      { title: 'Unit IV: Vector Differentiation', content: 'Scalar and vector point functions. Gradient, Divergence, Curl and their physical interpretations. Vector identities. Directional derivatives.' },\r\n      { title: 'Unit V: Vector Integration', content: 'Line integral, Work done, Surface integral, Volume integral. Greens Theorem, Stokes Theorem, Gauss Divergence Theorem (without proofs) and applications.' }\r\n    ]\r\n  },\r\n  {\r\n    id: '8',\r\n    code: 'R231202',\r\n    name: 'Engineering Chemistry',\r\n    semester: 2,\r\n    credits: 3,\r\n    department: 'Basic Science',\r\n    description: 'Structure, Bonding, Electrochemistry, Polymers',\r\n    units: [\r\n      { title: 'Unit I: Structure & Bonding Models', content: 'Molecular orbital theory: Bonding in homo and hetero diatomic molecules. Energy level diagrams of N2, O2, F2. Crystal field theory: Splitting of d-orbitals in octahedral and tetrahedral complexes.' },\r\n      { title: 'Unit II: Modern Engineering Materials', content: 'Polymers: Mechanism of polymerization. Plastics: Thermoplastics and Thermosets. Preparation of PVC, Bakelite. Nanomaterials: Introduction, Sol-Gel method, Carbon Nanotubes (CNTs), Applications.' },\r\n      { title: 'Unit III: Electrochemistry and Applications', content: 'Electrochemical cells, Nernst equation. Batteries: Primary (Lithium cell) and Secondary (Lead-acid, Li-ion). Fuel cells: H2-O2 fuel cell. Corrosion: Types, Factors, Prevention methods.' },\r\n      { title: 'Unit IV: Water Technology', content: 'Hardness of water, Units. Estimation of hardness by EDTA method. Boiler troubles: Scale, Sludge, Priming, Foaming. Water treatment: Zeolite process, Ion-exchange process. Desalination (Reverse Osmosis).' },\r\n      { title: 'Unit V: Spectroscopy & Instrumental Methods', content: 'Electromagnetic spectrum. UV-Visible spectroscopy: Beer-Lamberts law. IR Spectroscopy: Modes of vibration, Fingerprint region. Conductometry and Potentiometry: Titrations.' }\r\n    ]\r\n  },\r\n  { id: '9', code: 'R231203', name: 'Engineering Graphics', semester: 2, credits: 3, department: 'Engineering Science', description: 'CAD, Projections, Isometric Views' },\r\n  { id: '10', code: 'R231204', name: 'Basic Electrical & Electronics Engineering', semester: 2, credits: 3, department: 'Engineering Science', description: 'Circuits, Machines, Semiconductor Devices' },\r\n  { id: '11', code: 'R231205', name: 'Data Structures', semester: 2, credits: 3, department: 'CSE', description: 'Linked Lists, Stacks, Queues, Trees, Graphs, Hashing' },\r\n  { id: '12', code: 'R231206', name: 'Environmental Science', semester: 2, credits: 2, department: 'Basic Science', description: 'Ecosystems, Pollution, Sustainability' },\r\n  {\r\n    id: '13',\r\n    code: 'R232101',\r\n    name: 'Mathematical Foundations of Computer Science',\r\n    semester: 3,\r\n    credits: 3,\r\n    department: 'CSE',\r\n    description: 'Logic, Sets, Relations, Functions, Graph Theory',\r\n    units: [\r\n      { title: 'Unit I: Mathematical Logic', content: 'Statements and notations, Connectives, Well-formed formulas, Truth Tables, Tautology, Equivalence implication, Normal forms, Quantifiers, Universal quantifiers.' },\r\n      { title: 'Unit II: Set Theory & Relations', content: 'Basic concepts of set theory, Operations on sets. Relations: Properties, Equivalence relations, Partial ordering relations, Hasse diagrams, Lattices.' },\r\n      { title: 'Unit III: Functions & Algebraic Structures', content: 'Functions: Types, Composition, Inverse. Algebraic systems: Semigroups, Monoids, Groups, Subgroups. Homomorphism, Isomorphism.' },\r\n      { title: 'Unit IV: Combinatorics', content: 'Basics of counting, Permutations, Combinations, Inclusion-Exclusion principle, Pigeonhole principle. Recurrence relations, Solving recurrence relations.' },\r\n      { title: 'Unit V: Graph Theory', content: 'Basic concepts, Isomorphism and Subgraphs, Trees and their properties, Spanning trees, Planar graphs, Eulers formula, Hamiltonian and Eulerian graphs.' }\r\n    ]\r\n  },\r\n  { id: '14', code: 'R232102', name: 'Universal Human Values', semester: 3, credits: 2, department: 'Humanities', description: 'Understanding Harmony, Ethical Conduct' },\r\n  { id: '15', code: 'R232103', name: 'Digital Logic & Computer Organization', semester: 3, credits: 3, department: 'CSE', description: 'Digital Circuits, CPU Organization, Memory' },\r\n  { id: '16', code: 'R232104', name: 'Software Engineering', semester: 3, credits: 3, department: 'CSE', description: 'SDLC, Agile, Testing, Maintenance' },\r\n  {\r\n    id: '17',\r\n    code: 'R232105',\r\n    name: 'Object Oriented Programming through Java',\r\n    semester: 3,\r\n    credits: 3,\r\n    department: 'CSE',\r\n    description: 'Classes, Objects, Inheritance, Polymorphism, Exception Handling',\r\n    units: [\r\n      { title: 'Unit I: Introduction to OOP & Java', content: 'History of Java, JVM, Data types, Variables, Operators, Control structures. Arrays. Introduction to OOP: Classes, Objects, Methods, Constructors, ' },\r\n      { title: 'Unit II: Inheritance & Polymorphism', content: 'Inheritance types, Super keyword, Method Overloading, Method Overriding, Abstract classes, Final keyword. Polymorphism: Static and Dynamic binding.' },\r\n      { title: 'Unit III: Packages & Interfaces', content: 'Defining, Creating and Accessing a Package. Import statements. Interfaces: Defining, Implementing, Extending interfaces. Multiple inheritance using interfaces.' },\r\n      { title: 'Unit IV: Exception Handling & Multithreading', content: 'Exception types, Try-Catch-Finally, Throw, Throws. User-defined exceptions. Multithreading: Thread life cycle, Creating threads, Synchronization.' },\r\n      { title: 'Unit V: Files & Collections', content: 'File I/O streams, Reading/Writing files. Generic Collections: List, Set, Map interfaces. ArrayList, LinkedList, HashMap classes. Iterators.' }\r\n    ]\r\n  },\r\n  { id: '18', code: 'R232201', name: 'Probability and Statistics', semester: 4, credits: 3, department: 'Basic Science', description: 'Probability distributions, Sampling, Hypothesis Testing' },\r\n  { id: '19', code: 'R232202', name: 'Operating Systems', semester: 4, credits: 3, department: 'CSE', description: 'Process Management, Memory Management, File Systems' },\r\n  { id: '20', code: 'R232203', name: 'Database Management Systems', semester: 4, credits: 3, department: 'CSE', description: 'ER Models, SQL, Normalization, Transactions' },\r\n  { id: '21', code: 'R232204', name: 'Formal Languages and Automata Theory', semester: 4, credits: 3, department: 'CSE', description: 'Finite Automata, Grammars, Turing Machines' },\r\n  { id: '22', code: 'R232205', name: 'Web Technologies', semester: 4, credits: 3, department: 'CSE', description: 'HTML, CSS, JavaScript, React, Node.js' },\r\n  {\r\n    id: '23',\r\n    code: 'R233101',\r\n    name: 'Artificial Intelligence & Machine Learning',\r\n    semester: 5,\r\n    credits: 3,\r\n    department: 'CSE',\r\n    description: 'AI agents, Search algorithms, ML basics, Neural Networks',\r\n    units: [\r\n      { title: 'Unit I: Introduction to AI', content: 'History of AI, Intelligent Agents, Agents and Environments. Problem Solving: State-space search, Uninformed Search (BFS, DFS), Heuristic Search (A*, Best-first). constraint satisfaction.' },\r\n      { title: 'Unit II: Knowledge Representation & Logic', content: 'Propositional Logic, First-Order Logic. Inference in FOL. Game Playing: Minimax algorithm, Alpha-Beta pruning. Knowledge Engineering.' },\r\n      { title: 'Unit III: Introduction to Machine Learning', content: 'Types of learning: Supervised, Unsupervised, Reinforcement. Regression: Linear, Logistic. Classification: K-Nearest Neighbors, Decision Trees, Naive Bayes.' },\r\n      { title: 'Unit IV: Neural Networks', content: 'Biological Neuron, Artificial Neuron, Perceptron, Multilayer Perceptron (MLP). Backpropagation algorithm. Activation functions. Introduction to Deep Learning.' },\r\n      { title: 'Unit V: Clustering & Ensembles', content: 'Clustering: K-Means, Hierarchical clustering. Ensemble Methods: Bagging, Boosting, Random Forest. Evaluation Metrics for ML models.' }\r\n    ]\r\n  },\r\n  {\r\n    id: '24',\r\n    code: 'R233102',\r\n    name: 'Object Oriented Software Engineering',\r\n    semester: 5,\r\n    credits: 3,\r\n    department: 'CSE',\r\n    description: 'Modeling, Design patterns, Architecture',\r\n    units: [\r\n      { title: 'Unit I: Software Engineering & Process Models', content: 'The Nature of Software, Software Process, Process Models: Waterfall, Incremental, Evolutionary, Spiral, Unified Process. Agile Methodology: Scrum, XP.' },\r\n      { title: 'Unit II: Requirements Engineering', content: 'Functional and Non-functional requirements. Use Case Modeling. Analysis Modeling: Class diagrams, Sequence diagrams, Activity diagrams, State charts.' },\r\n      { title: 'Unit III: Design Concepts', content: 'Design process, Design concepts: Abstraction, Architecture, Patterns, Modularity. Architectural Design. User Interface Design.' },\r\n      { title: 'Unit IV: Design Patterns', content: 'Introduction to Design Patterns. Creational Patterns (Singleton, Factory), Structural Patterns (Adapter, Decorator), Behavioral Patterns (Observer, Strategy).' },\r\n      { title: 'Unit V: Testing & Quality', content: 'Software Testing Strategies: Unit, Integration, System, Acceptance testing. Black-box vs White-box testing. Software Quality Assurance and Maintenance.' }\r\n    ]\r\n  },\r\n  {\r\n    id: '25',\r\n    code: 'R233103',\r\n    name: 'Computer Networks',\r\n    semester: 5,\r\n    credits: 3,\r\n    department: 'CSE',\r\n    description: 'OSI Model, TCP/IP, Routing, Wireless Networks',\r\n    units: [\r\n      { title: 'Unit I: Introduction & Physical Layer', content: 'Network Hardware, Network Software, Reference Models: OSI, TCP/IP. Physical Layer: Guided and Unguided Transmission Media, Switching.' },\r\n      { title: 'Unit II: Data Link Layer', content: 'Error Detection and Correction. Elementary Data Link Protocols. Sliding Window Protocols. MAC Sublayer: ALOHA, CSMA/CD, Ethernet.' },\r\n      { title: 'Unit III: Network Layer', content: 'Routing Algorithms: Shortest Path, Flooding, Distance Vector, Link State. Congestion Control. IPv4, IPv6 Addressing.' },\r\n      { title: 'Unit IV: Transport Layer', content: 'Process-to-Process Delivery: UDP, TCP. Connection Management, Flow Control, Error Control. TCP Congestion Control.' },\r\n      { title: 'Unit V: Application Layer', content: 'DNS - Domain Name System. E-mail: SMTP, POP3, IMAP. WWW and HTTP. FTP. Network Security: Cryptography basics.' }\r\n    ]\r\n  },\r\n  {\r\n    id: '26',\r\n    code: 'R233104',\r\n    name: 'Mobile Computing',\r\n    semester: 5,\r\n    credits: 3,\r\n    department: 'CSE',\r\n    description: 'Wireless Communication, Mobile Network Layer',\r\n    units: [\r\n      { title: 'Unit I: Introduction to Mobile Computing', content: 'Mobile Computing Architecture, Novel Applications, Limitations. GSM: Architecture, Protocols, Handover. GPRS.' },\r\n      { title: 'Unit II: MAC Protocols', content: 'Wireless MAC Issues. Hidden and Exposed Terminal Problems. MAC Protocols: SDMA, FDMA, TDMA, CDMA.' },\r\n      { title: 'Unit III: Mobile Network Layer', content: 'Mobile IP: Goals, Entities, IP Packet Delivery, Agent Discovery, Registration, Tunneling and Encapsulation. DHCP.' },\r\n      { title: 'Unit IV: Mobile Transport Layer', content: 'Traditional TCP, Indirect TCP, Snooping TCP, Mobile TCP. Transaction Oriented TCP. WAP Architecture.' },\r\n      { title: 'Unit V: Ad Hoc Networks', content: 'Ad Hoc Networks: Introduction, Routing Protocols (DSDV, DSR, AODV). MANETs. Bluetooth Architecture.' }\r\n    ]\r\n  },\r\n  { id: '27', code: 'R233105', name: 'Microprocessors and Microcontrollers', semester: 5, credits: 3, department: 'CSE', description: '8086, ARM, Embedded Systems' },\r\n  { id: '28', code: 'R233201', name: 'Data Warehousing and Data Mining', semester: 6, credits: 3, department: 'CSE', description: 'Data preprocessing, Mining algorithms, Clustering' },\r\n  { id: '29', code: 'R233202', name: 'Compiler Design', semester: 6, credits: 3, department: 'CSE', description: 'Lexical Analysis, Parsing, Code Generation' },\r\n  { id: '30', code: 'R233203', name: 'Design and Analysis of Algorithms', semester: 6, credits: 3, department: 'CSE', description: 'Divide and Conquer, Dynamic Programming, Greedy Algorithms' },\r\n  { id: '31', code: 'R233204', name: 'DevOps', semester: 6, credits: 3, department: 'CSE', description: 'CI/CD, Containerization, Orchestration' },\r\n  { id: '32', code: 'R233205', name: 'Internet of Things', semester: 6, credits: 3, department: 'CSE', description: 'IoT Architecture, Sensors, Cloud Integration' },\r\n  { id: '33', code: 'R234101', name: 'Cryptography and Network Security', semester: 7, credits: 3, department: 'CSE', description: 'Encryption, Authentication, Security Protocols' },\r\n  { id: '34', code: 'R234102', name: 'Human Resources & Project Management', semester: 7, credits: 3, department: 'Management', description: 'HRM, Project Planning, Risk Management' },\r\n  { id: '35', code: 'R234103', name: 'Deep Learning', semester: 7, credits: 3, department: 'CSE', description: 'CNNs, RNNs, GANs, Transfer Learning' },\r\n  { id: '36', code: 'R234104', name: 'Cloud Computing', semester: 7, credits: 3, department: 'CSE', description: 'Cloud models, Virtualization, Cloud Security' },\r\n  { id: '37', code: 'R234201', name: 'Blockchain Technology', semester: 8, credits: 3, department: 'CSE', description: 'Distributed Ledger, Smart Contracts, Cryptocurrency' },\r\n  { id: '38', code: 'R234202', name: 'Big Data Analytics', semester: 8, credits: 3, department: 'CSE', description: 'Hadoop, Spark, NoSQL Databases' },\r\n\r\n  // R23 REGULATION - ECE\r\n  {\r\n    id: '39',\r\n    code: 'R233111',\r\n    name: 'Signals and Systems',\r\n    semester: 3,\r\n    credits: 3,\r\n    department: 'ECE',\r\n    description: 'Signal analysis, Fourier Transform, Laplace Transform',\r\n    units: [\r\n      { title: 'Unit I: Introduction to Signals', content: 'Classification of signals: Continuous and Discrete, Periodic and Aperiodic, Even and Odd, Energy and Power signals. Basic operations on signals. Unit Impulse, Unit Step, Unit Ramp functions.' },\r\n      { title: 'Unit II: Fourier Series & Fourier Transform', content: 'Fourier Series representation of periodic signals, Dirichlet conditions. Fourier Transform: Properties, Magnitude and Phase spectra. Parsevals Theorem.' },\r\n      { title: 'Unit III: Linear Time Invariant Systems', content: 'System properties: Linearity, Causality, Stability, Time-invariance. Impulse Response, Convolution Integral, Convolution Sum. Transfer function.' },\r\n      { title: 'Unit IV: Laplace Transforms', content: 'ROC, Properties of Laplace Transform, Inverse Laplace Transform. Analysis of LTI systems using Laplace Transform. Solution of differential equations.' },\r\n      { title: 'Unit V: Sampling & Z-Transforms', content: 'Sampling Theorem, Aliasing. Reconstruction. Z-Transform: ROC, Properties, Inverse Z-Transform. Analysis of Discrete LTI systems.' }\r\n    ]\r\n  },\r\n  { id: '40', code: 'R233112', name: 'Electronic Devices and Circuits', semester: 3, credits: 3, department: 'ECE', description: 'Diodes, BJT, FET, Amplifiers' },\r\n  { id: '41', code: 'R233113', name: 'Network Analysis', semester: 3, credits: 3, department: 'ECE', description: 'Circuit theorems, Network functions, Two-port networks' },\r\n  { id: '42', code: 'R233211', name: 'Analog Communications', semester: 4, credits: 3, department: 'ECE', description: 'AM, FM, PM Modulation techniques' },\r\n  { id: '43', code: 'R233212', name: 'Digital Electronics', semester: 4, credits: 3, department: 'ECE', description: 'Logic gates, Flip-flops, Counters, Registers' },\r\n  { id: '44', code: 'R233311', name: 'Electromagnetic Fields', semester: 5, credits: 3, department: 'ECE', description: 'Electrostatics, Magnetostatics, Maxwells equations' },\r\n  { id: '45', code: 'R233312', name: 'Digital Signal Processing', semester: 5, credits: 3, department: 'ECE', description: 'DFT, FFT, Digital Filters' },\r\n  { id: '46', code: 'R233411', name: 'VLSI Design', semester: 6, credits: 3, department: 'ECE', description: 'CMOS technology, Logic design, Layout' },\r\n  { id: '47', code: 'R233412', name: 'Microwave Engineering', semester: 6, credits: 3, department: 'ECE', description: 'Waveguides, Antennas, Microwave devices' },\r\n  { id: '47a', code: 'R234111', name: 'Optical Communications', semester: 7, credits: 3, department: 'ECE', description: 'Optical fibers, Transmitters, Receivers' },\r\n  { id: '47b', code: 'R234112', name: 'Embedded Systems', semester: 7, credits: 3, department: 'ECE', description: 'Microcontrollers, Real-time OS, IoT' },\r\n  { id: '47c', code: 'R234211', name: 'Wireless Communications', semester: 8, credits: 3, department: 'ECE', description: 'Mobile communications, 5G, Satellite' },\r\n  { id: '47d', code: 'R234212', name: 'Radar Systems', semester: 8, credits: 3, department: 'ECE', description: 'Radar principles, Signal processing' },\r\n\r\n  // R23 REGULATION - EEE\r\n  {\r\n    id: '48',\r\n    code: 'R233121',\r\n    name: 'Electrical Circuits',\r\n    semester: 3,\r\n    credits: 3,\r\n    department: 'EEE',\r\n    description: 'DC and AC circuits, Network theorems',\r\n    units: [\r\n      { title: 'Unit I: Introduction to Electrical Circuits', content: 'Circuit concepts: R, L, C parameters, Voltage and Current sources. Independent and Dependent sources. KCL, KVL, Node and Mesh analysis.' },\r\n      { title: 'Unit II: Network Theorems (DC & AC)', content: 'Superposition, Thevenins, Nortons, Maximum Power Transfer, Reciprocity, Millmans, Tellegens theorems. Applications to DC and AC circuits.' },\r\n      { title: 'Unit III: Single Phase AC Circuits', content: 'RMS, Average values, Form factor, Peak factor. Phasor representation. J-notation. Analysis of R, L, C, RL, RC, RLC series and parallel circuits. Resonance.' },\r\n      { title: 'Unit IV: Two Port Networks', content: 'Impedance (Z), Admittance (Y), Transmission (ABCD), Hybrid (h) parameters. Inter-relations between parameters. Interconnection of two-port networks.' },\r\n      { title: 'Unit V: Transients', content: 'Transient response of RL, RC, RLC circuits for DC and AC excitations using differential equation approach and Laplace Transform method.' }\r\n    ]\r\n  },\r\n  { id: '49', code: 'R233122', name: 'Electrical Machines - I', semester: 3, credits: 3, department: 'EEE', description: 'DC Machines, Transformers' },\r\n  { id: '50', code: 'R233221', name: 'Electrical Machines - II', semester: 4, credits: 3, department: 'EEE', description: 'Induction Motors, Synchronous Machines' },\r\n  { id: '51', code: 'R233222', name: 'Power Electronics', semester: 4, credits: 3, department: 'EEE', description: 'Converters, Inverters, Choppers' },\r\n  { id: '52', code: 'R233321', name: 'Power Systems - I', semester: 5, credits: 3, department: 'EEE', description: 'Generation, Transmission, Distribution' },\r\n  { id: '53', code: 'R233322', name: 'Control Systems', semester: 5, credits: 3, department: 'EEE', description: 'Transfer functions, Stability analysis' },\r\n  { id: '54', code: 'R233421', name: 'Power Systems - II', semester: 6, credits: 3, department: 'EEE', description: 'Load flow, Fault analysis, Protection' },\r\n  { id: '55', code: 'R233422', name: 'Electrical Measurements', semester: 6, credits: 3, department: 'EEE', description: 'Instruments, Bridges, Transducers' },\r\n  { id: '55a', code: 'R234121', name: 'High Voltage Engineering', semester: 7, credits: 3, department: 'EEE', description: 'Insulation, Testing, Lightning protection' },\r\n  { id: '55b', code: 'R234122', name: 'Renewable Energy Systems', semester: 7, credits: 3, department: 'EEE', description: 'Solar, Wind, Hydro power systems' },\r\n  { id: '55c', code: 'R234221', name: 'Smart Grid Technology', semester: 8, credits: 3, department: 'EEE', description: 'Grid automation, Energy management' },\r\n  { id: '55d', code: 'R234222', name: 'Electric Vehicles', semester: 8, credits: 3, department: 'EEE', description: 'EV technology, Battery management, Charging' },\r\n\r\n  // R23 REGULATION - MECH\r\n  {\r\n    id: '56',\r\n    code: 'R233131',\r\n    name: 'Engineering Mechanics',\r\n    semester: 3,\r\n    credits: 3,\r\n    department: 'MECH',\r\n    description: 'Statics, Dynamics, Friction',\r\n    units: [\r\n      { title: 'Unit I: Introduction to Mechanics & Forces', content: 'Basic concepts, System of Forces, Resultant of Coplanar concurrent forces. Parallelogram law, Triangle law. Moment of a force, Varignons theorem.' },\r\n      { title: 'Unit II: Equilibrium of Systems', content: 'Free Body Diagrams, Equations of Equilibrium. Lamis Theorem. Types of Supports and Reactions. Equilibrium of rigid bodies.' },\r\n      { title: 'Unit III: Friction', content: 'Types of friction, Laws of friction, Limiting friction, Angle of repose. Applications: Wedge friction, Ladder friction, Screw friction.' },\r\n      { title: 'Unit IV: Centroid & Moment of Inertia', content: 'Centroid of simple figures and composite areas. Center of Gravity. Moment of Inertia: Parallel and Perpendicular axis theorems. MI of composite sections.' },\r\n      { title: 'Unit V: Dynamics', content: 'Kinematics: Rectilinear motion, Curvilinear motion, Projectiles. Kinetics: Newtons Second Law, DAlemberts principle. Work-Energy method, Impulse-Momentum method.' }\r\n    ]\r\n  },\r\n  { id: '57', code: 'R233132', name: 'Strength of Materials', semester: 3, credits: 3, department: 'MECH', description: 'Stress, Strain, Bending, Torsion' },\r\n  { id: '58', code: 'R233231', name: 'Thermodynamics', semester: 4, credits: 3, department: 'MECH', description: 'Laws of thermodynamics, Entropy, Cycles' },\r\n  { id: '59', code: 'R233232', name: 'Manufacturing Technology', semester: 4, credits: 3, department: 'MECH', description: 'Casting, Welding, Machining' },\r\n  { id: '60', code: 'R233331', name: 'Fluid Mechanics', semester: 5, credits: 3, department: 'MECH', description: 'Fluid statics, Dynamics, Bernoullis equation' },\r\n  { id: '61', code: 'R233332', name: 'Machine Design', semester: 5, credits: 3, department: 'MECH', description: 'Design of machine elements, Gears, Bearings' },\r\n  { id: '62', code: 'R233431', name: 'Heat Transfer', semester: 6, credits: 3, department: 'MECH', description: 'Conduction, Convection, Radiation' },\r\n  { id: '63', code: 'R233432', name: 'Automobile Engineering', semester: 6, credits: 3, department: 'MECH', description: 'IC Engines, Transmission, Chassis' },\r\n  { id: '63a', code: 'R234131', name: 'Refrigeration and Air Conditioning', semester: 7, credits: 3, department: 'MECH', description: 'Refrigeration cycles, AC systems' },\r\n  { id: '63b', code: 'R234132', name: 'Mechatronics', semester: 7, credits: 3, department: 'MECH', description: 'Sensors, Actuators, Control systems' },\r\n  { id: '63c', code: 'R234231', name: 'Robotics', semester: 8, credits: 3, department: 'MECH', description: 'Robot kinematics, Dynamics, Programming' },\r\n  { id: '63d', code: 'R234232', name: 'Additive Manufacturing', semester: 8, credits: 3, department: 'MECH', description: '3D Printing, Rapid prototyping' },\r\n\r\n  // R23 REGULATION - CIVIL\r\n  {\r\n    id: '64',\r\n    code: 'R233141',\r\n    name: 'Surveying',\r\n    semester: 3,\r\n    credits: 3,\r\n    department: 'CIVIL',\r\n    description: 'Leveling, Theodolite, Total station',\r\n    units: [\r\n      { title: 'Unit I: Introduction & Chain Surveying', content: 'Principles of Surveying, Classification, Scales. Ranging, Chaining, Errors in chaining. Tape corrections. Offset methods.' },\r\n      { title: 'Unit II: Compass Surveying & Plane Table', content: 'Prismatic Compass, Surveyors Compass. Bearings, Local Attraction. Dip and Declination. Plane Table: Methods, Radiation, Intersection.' },\r\n      { title: 'Unit III: Leveling & Contouring', content: 'Types of levels, Dumpy level, Leveling staff. HI method, Rise and Fall method. Curvature and Refraction. Contouring: Characteristics, Methods.' },\r\n      { title: 'Unit IV: Theodolite Surveying', content: 'Temporary and Permanent adjustments. Measurement of horizontal and vertical angles. Trigonometric leveling. Tacheometry basics.' },\r\n      { title: 'Unit V: Advanced Surveying', content: 'Introduction to Total Station. EDM. Global Positioning System (GPS). Basics of GIS and Remote Sensing. Curves: Simple curves.' }\r\n    ]\r\n  },\r\n  { id: '65', code: 'R233142', name: 'Building Materials and Construction', semester: 3, credits: 3, department: 'CIVIL', description: 'Cement, Concrete, Masonry' },\r\n  { id: '66', code: 'R233241', name: 'Structural Analysis - I', semester: 4, credits: 3, department: 'CIVIL', description: 'Beams, Frames, Trusses' },\r\n  { id: '67', code: 'R233242', name: 'Geotechnical Engineering', semester: 4, credits: 3, department: 'CIVIL', description: 'Soil properties, Compaction, Consolidation' },\r\n  { id: '68', code: 'R233341', name: 'Structural Analysis - II', semester: 5, credits: 3, department: 'CIVIL', description: 'Slope deflection, Moment distribution' },\r\n  { id: '69', code: 'R233342', name: 'Water Resources Engineering', semester: 5, credits: 3, department: 'CIVIL', description: 'Hydrology, Irrigation, Dams' },\r\n  { id: '70', code: 'R233441', name: 'Design of Concrete Structures', semester: 6, credits: 3, department: 'CIVIL', description: 'RCC design, Beams, Columns, Slabs' },\r\n  { id: '71', code: 'R233442', name: 'Transportation Engineering', semester: 6, credits: 3, department: 'CIVIL', description: 'Highway design, Traffic engineering' },\r\n  { id: '71a', code: 'R234141', name: 'Environmental Engineering', semester: 7, credits: 3, department: 'CIVIL', description: 'Water treatment, Waste management' },\r\n  { id: '71b', code: 'R234142', name: 'Construction Management', semester: 7, credits: 3, department: 'CIVIL', description: 'Project planning, Cost estimation' },\r\n  { id: '71c', code: 'R234241', name: 'Earthquake Engineering', semester: 8, credits: 3, department: 'CIVIL', description: 'Seismic design, Structural dynamics' },\r\n  { id: '71d', code: 'R234242', name: 'Green Building Technology', semester: 8, credits: 3, department: 'CIVIL', description: 'Sustainable construction, LEED certification' },\r\n\r\n  // ========================================\r\n  // R22 REGULATION - EXPANDED (Sem 3-8)\r\n  // ========================================\r\n  // Common\r\n  { id: 'R22-1', code: 'R221101', name: 'Mathematics - I', semester: 1, credits: 3, department: 'Basic Science', description: 'Calculus, Differential equations' },\r\n  { id: 'R22-2', code: 'R221102', name: 'Physics', semester: 1, credits: 3, department: 'Basic Science', description: 'Mechanics, Optics' },\r\n  { id: 'R22-3', code: 'R221103', name: 'English', semester: 1, credits: 2, department: 'Humanities', description: 'Communication skills' },\r\n  // CSE\r\n  { id: 'R22-CSE-1', code: 'R222101', name: 'Data Structures', semester: 3, credits: 3, department: 'CSE', description: 'Arrays, Linked Lists, Trees, Graphs' },\r\n  { id: 'R22-CSE-2', code: 'R222102', name: 'Computer Organization', semester: 3, credits: 3, department: 'CSE', description: 'CPU, Memory, I/O organization' },\r\n  { id: 'R22-CSE-3', code: 'R222201', name: 'Operating Systems', semester: 4, credits: 3, department: 'CSE', description: 'Process, Memory, File management' },\r\n  { id: 'R22-CSE-4', code: 'R223101', name: 'Computer Networks', semester: 5, credits: 3, department: 'CSE', description: 'Network layers, Protocols' },\r\n  // ECE\r\n  { id: 'R22-ECE-1', code: 'R222111', name: 'Electronic Devices and Circuits', semester: 3, credits: 3, department: 'ECE', description: 'Diodes, BJT, FET, Amplifiers' },\r\n  { id: 'R22-ECE-2', code: 'R222112', name: 'Signals and Systems', semester: 3, credits: 3, department: 'ECE', description: 'Fourier, Laplace transforms' },\r\n  { id: 'R22-ECE-3', code: 'R222211', name: 'Analog Communications', semester: 4, credits: 3, department: 'ECE', description: 'AM, FM, PM Modulation' },\r\n  { id: 'R22-ECE-4', code: 'R223111', name: 'Microprocessors', semester: 5, credits: 3, department: 'ECE', description: '8086 Architecture, Interfacing' },\r\n  // EEE\r\n  { id: 'R22-EEE-1', code: 'R222121', name: 'Electrical Circuits', semester: 3, credits: 3, department: 'EEE', description: 'Network theorems, AC analysis' },\r\n  { id: 'R22-EEE-2', code: 'R222122', name: 'Electrical Machines-I', semester: 3, credits: 3, department: 'EEE', description: 'DC Machines, Transformers' },\r\n  { id: 'R22-EEE-3', code: 'R222221', name: 'Power Systems-I', semester: 4, credits: 3, department: 'EEE', description: 'Generation, Transmission' },\r\n  { id: 'R22-EEE-4', code: 'R223121', name: 'Control Systems', semester: 5, credits: 3, department: 'EEE', description: 'Time/Freq domain analysis' },\r\n  // MECH\r\n  { id: 'R22-MECH-1', code: 'R222131', name: 'Engineering Mechanics', semester: 3, credits: 3, department: 'MECH', description: 'Statics and Dynamics' },\r\n  { id: 'R22-MECH-2', code: 'R222132', name: 'Thermodynamics', semester: 3, credits: 3, department: 'MECH', description: 'Laws of Thermodynamics' },\r\n  { id: 'R22-MECH-3', code: 'R222231', name: 'Fluid Mechanics', semester: 4, credits: 3, department: 'MECH', description: 'Fluid properties, Flow analysis' },\r\n  { id: 'R22-MECH-4', code: 'R223131', name: 'Heat Transfer', semester: 5, credits: 3, department: 'MECH', description: 'Conduction, Convection, Radiation' },\r\n  // CIVIL\r\n  { id: 'R22-CIVIL-1', code: 'R222141', name: 'Surveying', semester: 3, credits: 3, department: 'CIVIL', description: 'Measurement techniques' },\r\n  { id: 'R22-CIVIL-2', code: 'R222142', name: 'Building Materials', semester: 3, credits: 3, department: 'CIVIL', description: 'Construction materials properties' },\r\n  { id: 'R22-CIVIL-3', code: 'R222241', name: 'Structural Analysis', semester: 4, credits: 3, department: 'CIVIL', description: 'Analysis of trusses/beams' },\r\n  { id: 'R22-CIVIL-4', code: 'R223141', name: 'Concrete Technology', semester: 5, credits: 3, department: 'CIVIL', description: 'Concrete mix design' },\r\n\r\n  // ========================================\r\n  // R21 REGULATION - EXPANDED (Sem 3-8)\r\n  // ========================================\r\n  // CSE\r\n  { id: 'R21-CSE-1', code: 'R212101', name: 'Data Structures', semester: 3, credits: 3, department: 'CSE', description: 'DS Implementation' },\r\n  { id: 'R21-CSE-2', code: 'R212201', name: 'Java Programming', semester: 4, credits: 3, department: 'CSE', description: 'OOP with Java' },\r\n  { id: 'R21-CSE-3', code: 'R213101', name: 'Computer Networks', semester: 5, credits: 3, department: 'CSE', description: 'Networking concepts' },\r\n  { id: 'R21-CSE-4', code: 'R213201', name: 'Machine Learning', semester: 6, credits: 3, department: 'CSE', description: 'ML Algorithms' },\r\n  // ECE\r\n  { id: 'R21-ECE-1', code: 'R212111', name: 'Electronic Devices', semester: 3, credits: 3, department: 'ECE', description: 'Semiconductor physics' },\r\n  { id: 'R21-ECE-2', code: 'R212211', name: 'Signal Processing', semester: 4, credits: 3, department: 'ECE', description: 'Signals analysis' },\r\n  { id: 'R21-ECE-3', code: 'R213111', name: 'Antennas', semester: 5, credits: 3, department: 'ECE', description: 'Antenna Wave Propagation' },\r\n  { id: 'R21-ECE-4', code: 'R213211', name: 'VLSI Design', semester: 6, credits: 3, department: 'ECE', description: 'IC Design' },\r\n  // EEE\r\n  { id: 'R21-EEE-1', code: 'R212121', name: 'Circuit Theory', semester: 3, credits: 3, department: 'EEE', description: 'Circuit analysis' },\r\n  { id: 'R21-EEE-2', code: 'R212221', name: 'Electrical Machines-II', semester: 4, credits: 3, department: 'EEE', description: 'AC Machines' },\r\n  { id: 'R21-EEE-3', code: 'R213121', name: 'Power Electronics', semester: 5, credits: 3, department: 'EEE', description: 'Power semiconductor devices' },\r\n  { id: 'R21-EEE-4', code: 'R213221', name: 'Power System Protection', semester: 6, credits: 3, department: 'EEE', description: 'Relays and Circuit Breakers' },\r\n  // MECH\r\n  { id: 'R21-MECH-1', code: 'R212131', name: 'Material Science', semester: 3, credits: 3, department: 'MECH', description: 'Structure of materials' },\r\n  { id: 'R21-MECH-2', code: 'R212231', name: 'Kinematics of Machinery', semester: 4, credits: 3, department: 'MECH', description: 'Linkages, Cams, Gears' },\r\n  { id: 'R21-MECH-3', code: 'R213131', name: 'Dynamics of Machinery', semester: 5, credits: 3, department: 'MECH', description: 'Forces in machines' },\r\n  { id: 'R21-MECH-4', code: 'R213231', name: 'CAD/CAM', semester: 6, credits: 3, department: 'MECH', description: 'Computer Aided Design' },\r\n  // CIVIL\r\n  { id: 'R21-CIVIL-1', code: 'R212141', name: 'Fluid Mechanics', semester: 3, credits: 3, department: 'CIVIL', description: 'Fluid properties' },\r\n  { id: 'R21-CIVIL-2', code: 'R212241', name: 'Hydraulics', semester: 4, credits: 3, department: 'CIVIL', description: 'Open channel flow' },\r\n  { id: 'R21-CIVIL-3', code: 'R213141', name: 'Soil Mechanics', semester: 5, credits: 3, department: 'CIVIL', description: 'Soil properties' },\r\n  { id: 'R21-CIVIL-4', code: 'R213241', name: 'Foundation Engineering', semester: 6, credits: 3, department: 'CIVIL', description: 'Shallow/Deep foundations' },\r\n\r\n  // ========================================\r\n  // R20 REGULATION - EXPANDED (Sem 3-8)\r\n  // ========================================\r\n  // CSE\r\n  { id: 'R20-CSE-S3-1', code: 'R202101', name: 'Data Structures', semester: 3, credits: 3, department: 'CSE', description: 'DS Implementation' },\r\n  { id: 'R20-CSE-S3-2', code: 'R202102', name: 'Obj Oriented Prog', semester: 3, credits: 3, department: 'CSE', description: 'Java OOP' },\r\n  { id: 'R20-CSE-S4-1', code: 'R202201', name: 'Operating Systems', semester: 4, credits: 3, department: 'CSE', description: 'OS Concepts' },\r\n  { id: 'R20-CSE-S4-2', code: 'R202202', name: 'Database Systems', semester: 4, credits: 3, department: 'CSE', description: 'DBMS SQL' },\r\n  { id: 'R20-CSE-1', code: 'R203101', name: 'Web Technologies', semester: 5, credits: 3, department: 'CSE', description: 'Web Dev' },\r\n  { id: 'R20-CSE-2', code: 'R203201', name: 'Data Mining', semester: 6, credits: 3, department: 'CSE', description: 'KDD knowledge' },\r\n  { id: 'R20-CSE-3', code: 'R204101', name: 'Cloud Computing', semester: 7, credits: 3, department: 'CSE', description: 'Cloud services' },\r\n  { id: 'R20-CSE-4', code: 'R204201', name: 'Project Work', semester: 8, credits: 10, department: 'CSE', description: 'Major Project' },\r\n  // ECE\r\n  { id: 'R20-ECE-S3-1', code: 'R202111', name: 'Electronic Devices', semester: 3, credits: 3, department: 'ECE', description: 'Semiconductors' },\r\n  { id: 'R20-ECE-S3-2', code: 'R202112', name: 'Network Analysis', semester: 3, credits: 3, department: 'ECE', description: 'KCL KVL' },\r\n  { id: 'R20-ECE-S4-1', code: 'R202211', name: 'Analog Circuits', semester: 4, credits: 3, department: 'ECE', description: 'Amplifiers' },\r\n  { id: 'R20-ECE-S4-2', code: 'R202212', name: 'Signals & Systems', semester: 4, credits: 3, department: 'ECE', description: 'Fourier Transforms' },\r\n  { id: 'R20-ECE-1', code: 'R203111', name: 'Linear IC Applications', semester: 5, credits: 3, department: 'ECE', description: 'Op-Amps' },\r\n  { id: 'R20-ECE-2', code: 'R203211', name: 'Digital Signal Processing', semester: 6, credits: 3, department: 'ECE', description: 'DSP Algorithms' },\r\n  { id: 'R20-ECE-3', code: 'R204111', name: 'Microwave Engineering', semester: 7, credits: 3, department: 'ECE', description: 'Microwaves' },\r\n  { id: 'R20-ECE-4', code: 'R204211', name: 'Project Work', semester: 8, credits: 10, department: 'ECE', description: 'Major Project' },\r\n  // EEE\r\n  { id: 'R20-EEE-S3-1', code: 'R202121', name: 'Electrical Circuits', semester: 3, credits: 3, department: 'EEE', description: 'Network Theorems' },\r\n  { id: 'R20-EEE-S3-2', code: 'R202122', name: 'EM-I', semester: 3, credits: 3, department: 'EEE', description: 'DC Machines' },\r\n  { id: 'R20-EEE-S4-1', code: 'R202221', name: 'EM-II', semester: 4, credits: 3, department: 'EEE', description: 'AC Machines' },\r\n  { id: 'R20-EEE-S4-2', code: 'R202222', name: 'Power Systems-I', semester: 4, credits: 3, department: 'EEE', description: 'Generation' },\r\n  { id: 'R20-EEE-1', code: 'R203121', name: 'Power Systems-II', semester: 5, credits: 3, department: 'EEE', description: 'Transmission Lines' },\r\n  { id: 'R20-EEE-2', code: 'R203221', name: 'Microprocessors', semester: 6, credits: 3, department: 'EEE', description: 'MPMC' },\r\n  { id: 'R20-EEE-3', code: 'R204121', name: 'HVDCT', semester: 7, credits: 3, department: 'EEE', description: 'High Voltage DC' },\r\n  { id: 'R20-EEE-4', code: 'R204221', name: 'Project Work', semester: 8, credits: 10, department: 'EEE', description: 'Major Project' },\r\n  // MECH\r\n  { id: 'R20-MECH-S3-1', code: 'R202131', name: 'Thermodynamics', semester: 3, credits: 3, department: 'MECH', description: 'Laws of Thermo' },\r\n  { id: 'R20-MECH-S3-2', code: 'R202132', name: 'Mechanics of Solids', semester: 3, credits: 3, department: 'MECH', description: 'Stress Strain' },\r\n  { id: 'R20-MECH-S4-1', code: 'R202231', name: 'Fluid Mechanics', semester: 4, credits: 3, department: 'MECH', description: 'Fluid Dynamics' },\r\n  { id: 'R20-MECH-S4-2', code: 'R202232', name: 'Production Tech', semester: 4, credits: 3, department: 'MECH', description: 'Manufacturing' },\r\n  { id: 'R20-MECH-1', code: 'R203131', name: 'Machine Tools', semester: 5, credits: 3, department: 'MECH', description: 'Lathe, Milling' },\r\n  { id: 'R20-MECH-2', code: 'R203231', name: 'Heat Transfer', semester: 6, credits: 3, department: 'MECH', description: 'Conduction, Convection' },\r\n  { id: 'R20-MECH-3', code: 'R204131', name: 'Finite Element Methods', semester: 7, credits: 3, department: 'MECH', description: 'FEM Analysis' },\r\n  { id: 'R20-MECH-4', code: 'R204231', name: 'Project Work', semester: 8, credits: 10, department: 'MECH', description: 'Major Project' },\r\n  // CIVIL\r\n  { id: 'R20-CIVIL-S3-1', code: 'R202141', name: 'Surveying', semester: 3, credits: 3, department: 'CIVIL', description: 'Surveying' },\r\n  { id: 'R20-CIVIL-S3-2', code: 'R202142', name: 'Strength of Materials', semester: 3, credits: 3, department: 'CIVIL', description: 'SOM' },\r\n  { id: 'R20-CIVIL-S4-1', code: 'R202241', name: 'Hydraulics', semester: 4, credits: 3, department: 'CIVIL', description: 'Fluid Mech' },\r\n  { id: 'R20-CIVIL-S4-2', code: 'R202242', name: 'Building Planning', semester: 4, credits: 3, department: 'CIVIL', description: 'Building Drawing' },\r\n  { id: 'R20-CIVIL-1', code: 'R203141', name: 'Structural Analysis-II', semester: 5, credits: 3, department: 'CIVIL', description: 'Advanced structures' },\r\n  { id: 'R20-CIVIL-2', code: 'R203241', name: 'Geotechnical Engineering-II', semester: 6, credits: 3, department: 'CIVIL', description: 'Foundation design' },\r\n  { id: 'R20-CIVIL-3', code: 'R204141', name: 'Remote Sensing', semester: 7, credits: 3, department: 'CIVIL', description: 'GIS and RS' },\r\n  { id: 'R20-CIVIL-4', code: 'R204241', name: 'Project Work', semester: 8, credits: 10, department: 'CIVIL', description: 'Major Project' },\r\n];\r\n\r\nexport default function Syllabus() {\r\n  const { user, userRole } = useAuth();\r\n\r\n  const isAdmin = userRole === 'admin';\r\n  const isTeacher = userRole === 'teacher';\r\n\r\n  const { data: courses, isLoading: loadingCourses } = useCourses();\r\n  const { data: classes } = useClasses();\r\n  const { data: assignments } = useAssignments();\r\n  const { data: submissions } = useSubmissions(user?.id);\r\n\r\n  const [expandedCourses, setExpandedCourses] = useState<string[]>([]);\r\n  const [selectedRegulation, setSelectedRegulation] = useState('R23');\r\n  const [selectedBranch, setSelectedBranch] = useState('CSE');\r\n  const [selectedYear, setSelectedYear] = useState('All');\r\n\r\n  // const { mutate: seedDatabase, isPending: isSeeding } = useSeedDatabase();\r\n\r\n  // const handleSeed = () => {\r\n  //   toast.info(\"Starting database seed...\");\r\n  //   seedDatabase(undefined, {\r\n  //     onSuccess: (data) => {\r\n  //       toast.success(`Data loaded! Added ${data.courses} courses.`);\r\n  //       // Force reload or let React Query handle invalidation\r\n  //     },\r\n  //     onError: (err) => {\r\n  //       toast.error(\"Failed to seed: \" + err.message);\r\n  //     }\r\n  //   });\r\n  // };\r\n\r\n  // Filter courses based on Regulation and Branch\r\n  const filteredCourses = useMemo(() => {\r\n\r\n    // Helper: Filtering Logic\r\n    const getFiltered = (sourceData: any[]) => {\r\n      return sourceData.filter((course: any) => {\r\n        // 1. Regulation Filter\r\n        const regulationMatch = (course.regulation === selectedRegulation) || course.code?.startsWith(selectedRegulation);\r\n\r\n        // 2. Branch Filter\r\n        const commonDepartments = ['Basic Science', 'Humanities', 'Engineering Science', 'Management'];\r\n        const isCommonSubject = commonDepartments.includes(course.department || '');\r\n        const isBranchSubject = course.department === selectedBranch;\r\n\r\n        // 3. Year Filter\r\n        let yearMatch = true;\r\n        if (selectedYear === 'I') yearMatch = [1, 2].includes(course.semester);\r\n        else if (selectedYear === 'II') yearMatch = [3, 4].includes(course.semester);\r\n        else if (selectedYear === 'III') yearMatch = [5, 6].includes(course.semester);\r\n        else if (selectedYear === 'IV') yearMatch = [7, 8].includes(course.semester);\r\n\r\n        return regulationMatch && (isCommonSubject || isBranchSubject) && yearMatch;\r\n      });\r\n    };\r\n\r\n    // Strategy 1: Try filtering from API courses first\r\n    if (courses && courses.length > 0) {\r\n      const apiResults = getFiltered(courses);\r\n      // If we found matches in the DB, use them (Single Source of Truth)\r\n      if (apiResults.length > 0) {\r\n        return apiResults;\r\n      }\r\n      // If DB has data but NOTHING for this selection (e.g. DB has only R23, user selected R20),\r\n      // Fall through to Strategy 2 (Fallback Data)\r\n    }\r\n\r\n    // Strategy 2: Use internal JNTUGV_DATA Fallback\r\n    // This allows users to see R20/R21 data even if they only seeded R23\r\n    return getFiltered(JNTUGV_DATA);\r\n\r\n  }, [courses, selectedRegulation, selectedBranch, selectedYear]);\r\n\r\n  // Calculate course progress based on completed assignments\r\n  const courseProgress = useMemo(() => {\r\n    if (!filteredCourses || !assignments || !submissions) return {};\r\n\r\n    const progress: Record<string, { completed: number; total: number; percentage: number }> = {};\r\n\r\n    filteredCourses.forEach(course => {\r\n      const courseClasses = classes?.filter(c => c.course_id === course.id) || [];\r\n      const classIds = courseClasses.map(c => c.id);\r\n\r\n      const courseAssignments = assignments.filter(a => classIds.includes(a.class_id));\r\n      const completedAssignments = courseAssignments.filter(a =>\r\n        submissions?.some(s => s.assignment_id === a.id && s.marks !== null)\r\n      );\r\n\r\n      const total = courseAssignments.length;\r\n      const completed = completedAssignments.length;\r\n      const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;\r\n\r\n      progress[course.id] = { completed, total, percentage };\r\n    });\r\n\r\n    return progress;\r\n  }, [filteredCourses, classes, assignments, submissions]);\r\n\r\n  const toggleCourse = (courseId: string) => {\r\n    setExpandedCourses(prev =>\r\n      prev.includes(courseId)\r\n        ? prev.filter(id => id !== courseId)\r\n        : [...prev, courseId]\r\n    );\r\n  };\r\n\r\n  if (loadingCourses) {\r\n    return (\r\n      <DashboardLayout>\r\n        <div className=\"flex items-center justify-center h-64\">\r\n          <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n        </div>\r\n      </DashboardLayout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <DashboardLayout>\r\n      <div className=\"space-y-6 stagger-fade-in\">\r\n        {/* Header */}\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n          <div>\r\n            <h1 className=\"text-2xl font-display font-bold\">Syllabus</h1>\r\n            <p className=\"text-muted-foreground\">\r\n              {isTeacher ? 'Manage course syllabi and content' : 'Track your course progress and content'}\r\n            </p>\r\n          </div>\r\n          <div className=\"flex flex-col sm:flex-row gap-4\">\r\n            <Select value={selectedRegulation} onValueChange={setSelectedRegulation}>\r\n              <SelectTrigger className=\"w-[180px] glass-card\">\r\n                <SelectValue placeholder=\"Regulation\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"R23\">R23 Regulation</SelectItem>\r\n                <SelectItem value=\"R22\">R22 Regulation</SelectItem>\r\n                <SelectItem value=\"R21\">R21 Regulation</SelectItem>\r\n                <SelectItem value=\"R20\">R20 Regulation</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n\r\n            <Select value={selectedBranch} onValueChange={setSelectedBranch}>\r\n              <SelectTrigger className=\"w-[180px] glass-card\">\r\n                <SelectValue placeholder=\"Branch\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"CSE\">CSE</SelectItem>\r\n                <SelectItem value=\"ECE\">ECE</SelectItem>\r\n                <SelectItem value=\"EEE\">EEE</SelectItem>\r\n                <SelectItem value=\"MECH\">Mechanical</SelectItem>\r\n                <SelectItem value=\"CIVIL\">Civil</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n\r\n            <Select value={selectedYear} onValueChange={setSelectedYear}>\r\n              <SelectTrigger className=\"w-[140px] glass-card\">\r\n                <SelectValue placeholder=\"Year\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"All\">All Years</SelectItem>\r\n                <SelectItem value=\"I\">I Year</SelectItem>\r\n                <SelectItem value=\"II\">II Year</SelectItem>\r\n                <SelectItem value=\"III\">III Year</SelectItem>\r\n                <SelectItem value=\"IV\">IV Year</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n\r\n\r\n          {isAdmin && <AddSubjectDialog />}\r\n\r\n        </div>\r\n        {/* Progress Overview */}\r\n        {filteredCourses && filteredCourses.length > 0 ? (\r\n          <>\r\n            <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\r\n              {filteredCourses.slice(0, 4).map((course) => {\r\n                const progress = courseProgress[course.id] || { completed: 0, total: 0, percentage: 0 };\r\n                return (\r\n                  <Card\r\n                    key={course.id}\r\n                    className=\"shadow-card hover:shadow-card-hover transition-shadow cursor-pointer\"\r\n                    onClick={() => toggleCourse(course.id)}\r\n                  >\r\n                    <CardContent className=\"p-4\">\r\n                      <div className=\"flex items-center justify-between mb-3\">\r\n                        <BookOpen className=\"h-5 w-5 text-primary\" />\r\n                        <Badge variant={progress.percentage >= 70 ? \"default\" : progress.percentage >= 40 ? \"secondary\" : \"outline\"} className=\"shadow-sm\">\r\n                          {progress.percentage}%\r\n                        </Badge>\r\n                      </div>\r\n                      <h3 className=\"font-display font-bold text-lg mb-1 truncate group-hover:text-primary transition-colors\">{course.name}</h3>\r\n                      <p className=\"text-sm text-muted-foreground\">{course.credits} Credits  Sem {course.semester}</p>\r\n                      <Progress value={progress.percentage} className=\"h-2 mt-3\" />\r\n                    </CardContent>\r\n                  </Card>\r\n                );\r\n              })}\r\n            </div>\r\n\r\n            {/* Detailed Syllabus */}\r\n            <div className=\"space-y-4\">\r\n              {filteredCourses.map((course) => {\r\n                const progress = courseProgress[course.id] || { completed: 0, total: 0, percentage: 0 };\r\n                const courseClasses = classes?.filter(c => c.course_id === course.id) || [];\r\n                const classIds = courseClasses.map(c => c.id);\r\n                const courseAssignments = assignments?.filter(a => classIds.includes(a.class_id)) || [];\r\n\r\n                return (\r\n                  <Card key={course.id} className=\"glass-card overflow-hidden transition-all duration-300\">\r\n                    <CardHeader\r\n                      className=\"cursor-pointer hover:bg-muted/50 transition-colors\"\r\n                      onClick={() => toggleCourse(course.id)}\r\n                    >\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                          {expandedCourses.includes(course.id) ? (\r\n                            <ChevronDown className=\"h-5 w-5 text-muted-foreground\" />\r\n                          ) : (\r\n                            <ChevronRight className=\"h-5 w-5 text-muted-foreground\" />\r\n                          )}\r\n                          <div>\r\n                            <CardTitle className=\"font-display font-bold text-lg\">{course.name}</CardTitle>\r\n                            <CardDescription>\r\n                              {course.code}  {course.credits} Credits  Semester {course.semester}\r\n                            </CardDescription>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-4\">\r\n                          <div className=\"text-right\">\r\n                            <p className=\"text-sm font-medium\">{progress.percentage}% Complete</p>\r\n                            <Progress value={progress.percentage} className=\"h-2 w-24\" />\r\n                          </div>\r\n\r\n                        </div>\r\n                      </div>\r\n                    </CardHeader>\r\n\r\n                    {expandedCourses.includes(course.id) && (\r\n                      <CardContent className=\"pt-0\">\r\n                        {(course as any).units ? (\r\n                          <div className=\"space-y-4 mb-6\">\r\n                            {(course as any).units.map((unit: any, index: number) => (\r\n                              <div key={index} className=\"space-y-1\">\r\n                                <h4 className=\"font-semibold text-primary\">{unit.title}</h4>\r\n                                <p className=\"text-sm text-muted-foreground leading-relaxed\">{unit.content}</p>\r\n                              </div>\r\n                            ))}\r\n                          </div>\r\n                        ) : (\r\n                          course.description && (\r\n                            <p className=\"text-muted-foreground mb-4\">{course.description}</p>\r\n                          )\r\n                        )}\r\n\r\n                        <div className=\"flex justify-start mb-6\">\r\n                          <Button variant=\"outline\" size=\"sm\" asChild>\r\n                            <a href=\"https://jntugv.edu.in/syllabus\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n                              <BookOpen className=\"h-4 w-4 mr-2\" />\r\n                              View Official Syllabus (External)\r\n                            </a>\r\n                          </Button>\r\n                        </div>\r\n\r\n                        {courseAssignments.length > 0 ? (\r\n                          <div className=\"space-y-4\">\r\n                            <h4 className=\"font-semibold\">Assignments & Assessments</h4>\r\n                            {courseAssignments.map((assignment) => {\r\n                              const hasSubmission = submissions?.some(s =>\r\n                                s.assignment_id === assignment.id && s.marks !== null\r\n                              );\r\n\r\n                              return (\r\n                                <div key={assignment.id} className={cn(\r\n                                  \"p-4 rounded-xl border transition-all hover:bg-muted/40\",\r\n                                  hasSubmission ? \"bg-success/5 border-success/20\" : \"bg-card/50\"\r\n                                )}>\r\n                                  <div className=\"flex items-center gap-3\">\r\n                                    {hasSubmission ? (\r\n                                      <CheckCircle className=\"h-5 w-5 text-success\" />\r\n                                    ) : (\r\n                                      <Circle className=\"h-5 w-5 text-muted-foreground\" />\r\n                                    )}\r\n                                    <div className=\"flex-1\">\r\n                                      <h5 className=\"font-semibold\">{assignment.title}</h5>\r\n                                      {assignment.description && (\r\n                                        <p className=\"text-sm text-muted-foreground\">{assignment.description}</p>\r\n                                      )}\r\n                                    </div>\r\n                                    <div className=\"text-right\">\r\n                                      <Badge variant=\"outline\">{assignment.max_marks} marks</Badge>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              );\r\n                            })}\r\n                          </div>\r\n                        ) : (\r\n                          <p className=\"text-muted-foreground text-center py-4\">\r\n                            No assignments available for this course\r\n                          </p>\r\n                        )}\r\n                      </CardContent>\r\n                    )}\r\n                  </Card>\r\n                );\r\n              })}\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <Card className=\"shadow-card\">\r\n            <CardContent className=\"p-8 text-center\">\r\n              <BookOpen className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\r\n              <p className=\"text-muted-foreground mb-4\">No courses available for {selectedRegulation} - {selectedBranch}</p>\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n      </div>\r\n    </DashboardLayout >\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\Timetable.tsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: Expected corresponding closing tag for JSX fragment.","line":529,"column":6}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { useAuth } from '@/hooks/useAuth';\r\nimport { useTimetable } from '@/hooks/useLMS';\r\nimport { DashboardLayout } from '@/components/layout/dashboard-layout';\r\nimport TimetableGenerator from '@/components/timetable/TimetableGenerator';\r\nimport ManualTimetableEntry from '@/components/timetable/ManualTimetableEntry';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Calendar, Clock, Wand2, Loader2, TableIcon, Phone, User, GraduationCap, FileDown, PenLine, Building2, BookOpen } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport { generateTimetablePdf } from '@/lib/generateTimetablePdf';\r\n\r\nconst DAYS = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n\r\nconst TIME_SLOTS = [\r\n  { start: '09:15', end: '10:05', label: '9:15 - 10:05' },\r\n  { start: '10:05', end: '10:55', label: '10:05 - 10:55' },\r\n  { start: '11:05', end: '11:55', label: '11:05 - 11:55' },\r\n  { start: '11:55', end: '12:45', label: '11:55 - 12:45' },\r\n  { start: '12:45', end: '13:25', label: '12:45 - 1:25', isLunch: true },\r\n  { start: '13:25', end: '14:15', label: '1:25 - 2:15' },\r\n  { start: '14:15', end: '15:05', label: '2:15 - 3:05' },\r\n  { start: '15:05', end: '15:55', label: '3:05 - 3:55' },\r\n];\r\n\r\n// Academic taxonomy\r\nconst DEPARTMENTS = [\r\n  { value: 'CSE', label: 'Computer Science & Engineering' },\r\n  { value: 'AI&DS', label: 'AI & Data Science' },\r\n  { value: 'EEE', label: 'Electrical & Electronics Engineering' },\r\n  { value: 'ECE', label: 'Electronics & Communication Engineering' },\r\n  { value: 'MECH', label: 'Mechanical Engineering' },\r\n];\r\n\r\nconst YEARS = [\r\n  { value: 'I', label: 'I Year' },\r\n  { value: 'II', label: 'II Year' },\r\n  { value: 'III', label: 'III Year' },\r\n  { value: 'IV', label: 'IV Year' },\r\n];\r\n\r\nconst SEMESTERS = [\r\n  { value: '1-1', label: '1st Semester' },\r\n  { value: '1-2', label: '2nd Semester' },\r\n  { value: '2-1', label: '3rd Semester' },\r\n  { value: '2-2', label: '4th Semester' },\r\n  { value: '3-1', label: '5th Semester' },\r\n  { value: '3-2', label: '6th Semester' },\r\n  { value: '4-1', label: '7th Semester' },\r\n  { value: '4-2', label: '8th Semester' },\r\n];\r\n\r\nconst SECTIONS = [\r\n  { value: 'A', label: 'Section A' },\r\n  { value: 'B', label: 'Section B' },\r\n  { value: 'C', label: 'Section C' },\r\n];\r\n\r\nconst subjectColors: Record<string, string> = {\r\n  'Data Structures & Algorithms': 'bg-blue-100 text-blue-800 border-blue-300',\r\n  'Database Management Systems': 'bg-purple-100 text-purple-800 border-purple-300',\r\n  'Operating Systems': 'bg-green-100 text-green-800 border-green-300',\r\n  'Computer Networks': 'bg-yellow-100 text-yellow-800 border-yellow-300',\r\n  'Software Engineering': 'bg-cyan-100 text-cyan-800 border-cyan-300',\r\n  'Machine Learning': 'bg-pink-100 text-pink-800 border-pink-300',\r\n  'Artificial Intelligence': 'bg-indigo-100 text-indigo-800 border-indigo-300',\r\n  'default': 'bg-gray-100 text-gray-800 border-gray-300',\r\n};\r\n\r\n// Generate abbreviation from course name\r\nconst getAbbreviation = (name?: string): string => {\r\n  if (!name) return '---';\r\n  const words = name.split(' ').filter(w => w.length > 2 && !['and', 'the', 'for', 'with'].includes(w.toLowerCase()));\r\n  if (words.length === 1) return words[0].substring(0, 3).toUpperCase();\r\n  return words.map(w => w[0]).join('').toUpperCase().substring(0, 4);\r\n};\r\n\r\n// Get full department name\r\nconst getDepartmentFullName = (code: string): string => {\r\n  const dept = DEPARTMENTS.find(d => d.value === code);\r\n  return dept ? `DEPARTMENT OF ${dept.label.toUpperCase()}` : 'DEPARTMENT';\r\n};\r\n\r\n// Get semester display text\r\nconst getSemesterDisplay = (year: string, semester: string): string => {\r\n  const yearLabel = YEARS.find(y => y.value === year)?.label || year;\r\n  const semLabel = SEMESTERS.find(s => s.value === semester)?.label || semester;\r\n  return `${yearLabel} ${semLabel}`;\r\n};\r\n\r\nexport default function Timetable() {\r\n  const { user } = useAuth();\r\n  // Simplified role check, assuming we have role in user object or using hook\r\n  const isTeacherOrAdmin = user?.email?.includes('admin') || true; // Temporary bypass for dev\r\n\r\n  // Filter states\r\n  const [selectedDepartment, setSelectedDepartment] = useState('CSE');\r\n  const [selectedYear, setSelectedYear] = useState('III');\r\n  const [selectedSemester, setSelectedSemester] = useState('3-2');\r\n  const [selectedSection, setSelectedSection] = useState('A');\r\n\r\n  const { data: timetableData, isLoading } = useTimetable(user?.id);\r\n\r\n  const getScheduleForSlot = (day: string, slot: typeof TIME_SLOTS[0]) => {\r\n    return timetableData?.find(entry => {\r\n      const entryStart = entry.start_time.substring(0, 5);\r\n      // Case insensitive day match\r\n      return entry.day_of_week.toLowerCase() === day.toLowerCase() && entryStart === slot.start;\r\n    });\r\n  };\r\n\r\n  const getSubjectColor = (courseName?: string) => {\r\n    if (!courseName) return subjectColors.default;\r\n    return subjectColors[courseName] || subjectColors.default;\r\n  };\r\n\r\n  // Get unique subjects with faculty info for the legend\r\n  const subjectFacultyMap = new Map<string, { name: string; code: string; faculty: string; phone?: string }>();\r\n  timetableData?.forEach(t => {\r\n    const courseName = t.classes?.courses?.name;\r\n    const courseCode = t.classes?.courses?.code;\r\n    const facultyName = t.classes?.profiles?.full_name;\r\n    if (courseName && !subjectFacultyMap.has(courseName)) {\r\n      subjectFacultyMap.set(courseName, {\r\n        name: courseName,\r\n        code: courseCode || getAbbreviation(courseName),\r\n        faculty: facultyName || 'TBA',\r\n        phone: undefined,\r\n      });\r\n    }\r\n  });\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <DashboardLayout>\r\n        <div className=\"flex items-center justify-center h-64\">\r\n          <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n        </div>\r\n      </DashboardLayout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <DashboardLayout>\r\n      <div className=\"space-y-6\">\r\n        {/* Header */}\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n          <div>\r\n            <h1 className=\"text-2xl font-display font-bold\">Timetable</h1>\r\n            <p className=\"text-muted-foreground\">\r\n              {isTeacherOrAdmin ? 'Manage and generate class schedules' : 'Your class schedule for this semester'}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {isTeacherOrAdmin ? (\r\n          <Tabs defaultValue=\"view\" className=\"space-y-6\">\r\n            <TabsList className=\"grid w-full max-w-lg grid-cols-3\">\r\n              <TabsTrigger value=\"view\" className=\"flex items-center gap-2\">\r\n                <TableIcon className=\"h-4 w-4\" />\r\n                View Schedule\r\n              </TabsTrigger>\r\n              <TabsTrigger value=\"manual\" className=\"flex items-center gap-2\">\r\n                <PenLine className=\"h-4 w-4\" />\r\n                Manual Entry\r\n              </TabsTrigger>\r\n              <TabsTrigger value=\"generate\" className=\"flex items-center gap-2\">\r\n                <Wand2 className=\"h-4 w-4\" />\r\n                Auto Generate\r\n              </TabsTrigger>\r\n            </TabsList>\r\n\r\n            <TabsContent value=\"view\" className=\"space-y-6\">\r\n              <TimetableView\r\n                timetableData={timetableData}\r\n                getScheduleForSlot={getScheduleForSlot}\r\n                getSubjectColor={getSubjectColor}\r\n                subjectFacultyMap={subjectFacultyMap}\r\n                selectedDepartment={selectedDepartment}\r\n                setSelectedDepartment={setSelectedDepartment}\r\n                selectedYear={selectedYear}\r\n                setSelectedYear={setSelectedYear}\r\n                selectedSemester={selectedSemester}\r\n                setSelectedSemester={setSelectedSemester}\r\n                selectedSection={selectedSection}\r\n                setSelectedSection={setSelectedSection}\r\n                isAdmin={true}\r\n              />\r\n            </TabsContent>\r\n\r\n            <TabsContent value=\"manual\">\r\n              <ManualTimetableEntry />\r\n            </TabsContent>\r\n\r\n            <TabsContent value=\"generate\">\r\n              <TimetableGenerator />\r\n            </TabsContent>\r\n          </Tabs>\r\n        ) : (\r\n          <TimetableView\r\n            timetableData={timetableData}\r\n            getScheduleForSlot={getScheduleForSlot}\r\n            getSubjectColor={getSubjectColor}\r\n            subjectFacultyMap={subjectFacultyMap}\r\n            selectedDepartment={selectedDepartment}\r\n            setSelectedDepartment={setSelectedDepartment}\r\n            selectedYear={selectedYear}\r\n            setSelectedYear={setSelectedYear}\r\n            selectedSemester={selectedSemester}\r\n            setSelectedSemester={setSelectedSemester}\r\n            selectedSection={selectedSection}\r\n            setSelectedSection={setSelectedSection}\r\n            isAdmin={false}\r\n          />\r\n        )}\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n}\r\n\r\ninterface TimetableViewProps {\r\n  timetableData: any[] | undefined;\r\n  getScheduleForSlot: (day: string, slot: typeof TIME_SLOTS[0]) => any;\r\n  getSubjectColor: (courseName?: string) => string;\r\n  subjectFacultyMap: Map<string, { name: string; code: string; faculty: string; phone?: string }>;\r\n  selectedDepartment: string;\r\n  setSelectedDepartment: (value: string) => void;\r\n  selectedYear: string;\r\n  setSelectedYear: (value: string) => void;\r\n  selectedSemester: string;\r\n  setSelectedSemester: (value: string) => void;\r\n  selectedSection: string;\r\n  setSelectedSection: (value: string) => void;\r\n  isAdmin: boolean;\r\n}\r\n\r\nfunction TimetableView({\r\n  timetableData,\r\n  getScheduleForSlot,\r\n  getSubjectColor,\r\n  subjectFacultyMap,\r\n  selectedDepartment,\r\n  setSelectedDepartment,\r\n  selectedYear,\r\n  setSelectedYear,\r\n  selectedSemester,\r\n  setSelectedSemester,\r\n  selectedSection,\r\n  setSelectedSection,\r\n  isAdmin,\r\n}: TimetableViewProps) {\r\n  const handleExportPdf = () => {\r\n    if (!timetableData) return;\r\n    generateTimetablePdf({\r\n      timetableData,\r\n      departmentName: getDepartmentFullName(selectedDepartment),\r\n      academicYear: '2025-2026',\r\n      semester: getSemesterDisplay(selectedYear, selectedSemester),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Filter Controls - Admin Only */}\r\n      {isAdmin && (\r\n        <Card className=\"shadow-card\">\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label className=\"flex items-center gap-2\">\r\n                  <Building2 className=\"h-4 w-4\" />\r\n                  Branch / Department\r\n                </Label>\r\n                <Select value={selectedDepartment} onValueChange={setSelectedDepartment}>\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Select branch\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {DEPARTMENTS.map(dept => (\r\n                      <SelectItem key={dept.value} value={dept.value}>\r\n                        {dept.value} - {dept.label}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label className=\"flex items-center gap-2\">\r\n                  <GraduationCap className=\"h-4 w-4\" />\r\n                  Year\r\n                </Label>\r\n                <Select value={selectedYear} onValueChange={setSelectedYear}>\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Select year\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {YEARS.map(year => (\r\n                      <SelectItem key={year.value} value={year.value}>\r\n                        {year.label}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label className=\"flex items-center gap-2\">\r\n                  <BookOpen className=\"h-4 w-4\" />\r\n                  Semester\r\n                </Label>\r\n                <Select value={selectedSemester} onValueChange={setSelectedSemester}>\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Select semester\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {SEMESTERS.map(sem => (\r\n                      <SelectItem key={sem.value} value={sem.value}>\r\n                        {sem.label}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label className=\"flex items-center gap-2\">\r\n                  <User className=\"h-4 w-4\" />\r\n                  Section\r\n                </Label>\r\n                <Select value={selectedSection} onValueChange={setSelectedSection}>\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Select section\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {SECTIONS.map(sec => (\r\n                      <SelectItem key={sec.value} value={sec.value}>\r\n                        {sec.label}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* College Header */}\r\n      <Card className=\"shadow-card border-2 border-primary/20\">\r\n        <CardHeader className=\"text-center pb-2\">\r\n          <div className=\"flex items-center justify-center gap-3 mb-2\">\r\n            <GraduationCap className=\"h-8 w-8 text-primary\" />\r\n            <div>\r\n              <CardTitle className=\"text-xl font-display text-primary\">\r\n                {getDepartmentFullName(selectedDepartment)}\r\n              </CardTitle>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                {getSemesterDisplay(selectedYear, selectedSemester)} | Section {selectedSection} | A.Y: 2025-2026\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex justify-center mt-3\">\r\n            <Button onClick={handleExportPdf} variant=\"outline\" className=\"gap-2\">\r\n              <FileDown className=\"h-4 w-4\" />\r\n              Export as PDF\r\n            </Button>\r\n          </div>\r\n        </CardHeader>\r\n      </Card>\r\n\r\n      {/* Weekly Timetable Grid */}\r\n      <Card className=\"shadow-card overflow-hidden\">\r\n        <CardContent className=\"p-0\">\r\n          {timetableData && timetableData.length > 0 ? (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full min-w-[900px] border-collapse\">\r\n                <thead>\r\n                  <tr className=\"bg-primary text-primary-foreground\">\r\n                    <th className=\"p-3 text-center font-bold border border-primary-foreground/20 w-28\">\r\n                      DAY/TIME\r\n                    </th>\r\n                    {TIME_SLOTS.map((slot, idx) => (\r\n                      <th\r\n                        key={idx}\r\n                        className={cn(\r\n                          \"p-2 text-center font-semibold text-xs border border-primary-foreground/20\",\r\n                          slot.isLunch && \"bg-amber-500\"\r\n                        )}\r\n                      >\r\n                        {slot.isLunch ? (\r\n                          <div className=\"flex flex-col\">\r\n                            <span>LUNCH</span>\r\n                            <span>BREAK</span>\r\n                          </div>\r\n                        ) : (\r\n                          slot.label\r\n                        )}\r\n                      </th>\r\n                    ))}\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {DAYS.map((day, dayIndex) => (\r\n                    <tr key={day} className={dayIndex % 2 === 0 ? 'bg-background' : 'bg-muted/30'}>\r\n                      <td className=\"p-3 font-bold text-sm text-center border bg-muted/50\">\r\n                        {day}\r\n                      </td>\r\n                      {TIME_SLOTS.map((slot, slotIndex) => {\r\n                        if (slot.isLunch) {\r\n                          return (\r\n                            <td\r\n                              key={slotIndex}\r\n                              className=\"p-2 text-center border bg-amber-50 dark:bg-amber-900/20\"\r\n                              rowSpan={1}\r\n                            >\r\n                              <span className=\"text-amber-600 dark:text-amber-400 font-medium text-xs\">\r\n                                \r\n                              </span>\r\n                            </td>\r\n                          );\r\n                        }\r\n\r\n                        const schedule = getScheduleForSlot(day, slot);\r\n                        const courseName = schedule?.classes?.courses?.name;\r\n                        const courseCode = schedule?.classes?.courses?.code;\r\n                        const abbrev = courseCode || getAbbreviation(courseName);\r\n\r\n                        return (\r\n                          <td\r\n                            key={slotIndex}\r\n                            className={cn(\r\n                              \"p-2 text-center border min-w-[80px]\",\r\n                              schedule && getSubjectColor(courseName)\r\n                            )}\r\n                          >\r\n                            {schedule && (\r\n                              <div className=\"flex flex-col items-center gap-0.5\">\r\n                                <span className=\"font-bold text-sm\">{abbrev}</span>\r\n                              </div>\r\n                            )}\r\n                          </td>\r\n                        );\r\n                      })}\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex flex-col items-center justify-center py-16\">\r\n              <Calendar className=\"h-12 w-12 text-muted-foreground mb-4\" />\r\n              <p className=\"text-muted-foreground text-center\">No timetable entries found</p>\r\n              <p className=\"text-sm text-muted-foreground mt-1\">Ask your administrator to generate a timetable</p>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Subject Legend Table */}\r\n      {subjectFacultyMap.size > 0 && (\r\n        <Card className=\"shadow-card\">\r\n          <CardHeader className=\"pb-3\">\r\n            <CardTitle className=\"font-display text-lg flex items-center gap-2\">\r\n              <User className=\"h-5 w-5 text-primary\" />\r\n              Subject & Faculty Details\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow className=\"bg-muted/50\">\r\n                  <TableHead className=\"font-bold\">SUBJECT CODE</TableHead>\r\n                  <TableHead className=\"font-bold\">SUBJECT NAME</TableHead>\r\n                  <TableHead className=\"font-bold\">FACULTY</TableHead>\r\n                  <TableHead className=\"font-bold\">\r\n                    <div className=\"flex items-center gap-1\">\r\n                      <Phone className=\"h-4 w-4\" />\r\n                      CONTACT\r\n                    </div>\r\n                  </TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                {Array.from(subjectFacultyMap.values()).map((subject, idx) => (\r\n                  <TableRow key={idx}>\r\n                    <TableCell>\r\n                      <Badge variant=\"outline\" className={cn(\"font-mono\", getSubjectColor(subject.name))}>\r\n                        {subject.code || getAbbreviation(subject.name)}\r\n                      </Badge>\r\n                    </TableCell>\r\n                    <TableCell className=\"font-medium\">{subject.name}</TableCell>\r\n                    <TableCell>{subject.faculty}</TableCell>\r\n                    <TableCell className=\"text-muted-foreground\">\r\n                      {subject.phone || '---'}\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Footer Info */}\r\n      <Card className=\"shadow-card\">\r\n        <CardContent className=\"py-4\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-center\">\r\n            <div>\r\n              <p className=\"text-xs text-muted-foreground uppercase tracking-wide\">Time Table In-Charge</p>\r\n              <p className=\"font-semibold\">---</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-xs text-muted-foreground uppercase tracking-wide\">Class In-Charge</p>\r\n              <p className=\"font-semibold\">---</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-xs text-muted-foreground uppercase tracking-wide\">HOD</p>\r\n              <p className=\"font-semibold\">---</p>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </DashboardLayout >\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\Upload.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\pages\\Users.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\test\\example.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\test\\setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\supabase\\functions\\chatbot\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\supabase\\functions\\create-user\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\tailwind.config.ts","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":118,"column":13,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":118,"endColumn":43}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { Config } from \"tailwindcss\";\r\n\r\nexport default {\r\n  darkMode: [\"class\"],\r\n  content: [\"./pages/**/*.{ts,tsx}\", \"./components/**/*.{ts,tsx}\", \"./app/**/*.{ts,tsx}\", \"./src/**/*.{ts,tsx}\"],\r\n  prefix: \"\",\r\n  theme: {\r\n    container: {\r\n      center: true,\r\n      padding: \"2rem\",\r\n      screens: {\r\n        \"2xl\": \"1400px\",\r\n      },\r\n    },\r\n    extend: {\r\n      fontFamily: {\r\n        sans: ['Inter', 'system-ui', 'sans-serif'],\r\n        display: ['Poppins', 'system-ui', 'sans-serif'],\r\n      },\r\n      colors: {\r\n        border: \"hsl(var(--border))\",\r\n        input: \"hsl(var(--input))\",\r\n        ring: \"hsl(var(--ring))\",\r\n        background: \"hsl(var(--background))\",\r\n        foreground: \"hsl(var(--foreground))\",\r\n        primary: {\r\n          DEFAULT: \"hsl(var(--primary))\",\r\n          foreground: \"hsl(var(--primary-foreground))\",\r\n        },\r\n        secondary: {\r\n          DEFAULT: \"hsl(var(--secondary))\",\r\n          foreground: \"hsl(var(--secondary-foreground))\",\r\n        },\r\n        destructive: {\r\n          DEFAULT: \"hsl(var(--destructive))\",\r\n          foreground: \"hsl(var(--destructive-foreground))\",\r\n        },\r\n        muted: {\r\n          DEFAULT: \"hsl(var(--muted))\",\r\n          foreground: \"hsl(var(--muted-foreground))\",\r\n        },\r\n        accent: {\r\n          DEFAULT: \"hsl(var(--accent))\",\r\n          foreground: \"hsl(var(--accent-foreground))\",\r\n        },\r\n        popover: {\r\n          DEFAULT: \"hsl(var(--popover))\",\r\n          foreground: \"hsl(var(--popover-foreground))\",\r\n        },\r\n        card: {\r\n          DEFAULT: \"hsl(var(--card))\",\r\n          foreground: \"hsl(var(--card-foreground))\",\r\n        },\r\n        success: {\r\n          DEFAULT: \"hsl(var(--success))\",\r\n          foreground: \"hsl(var(--success-foreground))\",\r\n        },\r\n        warning: {\r\n          DEFAULT: \"hsl(var(--warning))\",\r\n          foreground: \"hsl(var(--warning-foreground))\",\r\n        },\r\n        info: {\r\n          DEFAULT: \"hsl(var(--info))\",\r\n          foreground: \"hsl(var(--info-foreground))\",\r\n        },\r\n        sidebar: {\r\n          DEFAULT: \"hsl(var(--sidebar-background))\",\r\n          foreground: \"hsl(var(--sidebar-foreground))\",\r\n          primary: \"hsl(var(--sidebar-primary))\",\r\n          \"primary-foreground\": \"hsl(var(--sidebar-primary-foreground))\",\r\n          accent: \"hsl(var(--sidebar-accent))\",\r\n          \"accent-foreground\": \"hsl(var(--sidebar-accent-foreground))\",\r\n          border: \"hsl(var(--sidebar-border))\",\r\n          ring: \"hsl(var(--sidebar-ring))\",\r\n        },\r\n      },\r\n      borderRadius: {\r\n        lg: \"var(--radius)\",\r\n        md: \"calc(var(--radius) - 2px)\",\r\n        sm: \"calc(var(--radius) - 4px)\",\r\n      },\r\n      boxShadow: {\r\n        'glow': '0 0 40px hsl(var(--primary) / 0.3)',\r\n        'card': '0 4px 6px -1px hsl(var(--foreground) / 0.1), 0 2px 4px -2px hsl(var(--foreground) / 0.1)',\r\n        'card-hover': '0 10px 15px -3px hsl(var(--foreground) / 0.1), 0 4px 6px -4px hsl(var(--foreground) / 0.1)',\r\n      },\r\n      keyframes: {\r\n        \"accordion-down\": {\r\n          from: { height: \"0\" },\r\n          to: { height: \"var(--radix-accordion-content-height)\" },\r\n        },\r\n        \"accordion-up\": {\r\n          from: { height: \"var(--radix-accordion-content-height)\" },\r\n          to: { height: \"0\" },\r\n        },\r\n        \"float\": {\r\n          \"0%, 100%\": { transform: \"translateY(0)\" },\r\n          \"50%\": { transform: \"translateY(-10px)\" },\r\n        },\r\n        \"slide-up\": {\r\n          from: { opacity: \"0\", transform: \"translateY(20px)\" },\r\n          to: { opacity: \"1\", transform: \"translateY(0)\" },\r\n        },\r\n        \"fade-in\": {\r\n          from: { opacity: \"0\" },\r\n          to: { opacity: \"1\" },\r\n        },\r\n      },\r\n      animation: {\r\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\r\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\r\n        \"float\": \"float 6s ease-in-out infinite\",\r\n        \"slide-up\": \"slide-up 0.5s ease-out forwards\",\r\n        \"fade-in\": \"fade-in 0.5s ease-out forwards\",\r\n      },\r\n    },\r\n  },\r\n  plugins: [require(\"tailwindcss-animate\")],\r\n} satisfies Config;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mohan\\Downloads\\Mohan Files\\lms\\miracle-lms-\\vitest.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]